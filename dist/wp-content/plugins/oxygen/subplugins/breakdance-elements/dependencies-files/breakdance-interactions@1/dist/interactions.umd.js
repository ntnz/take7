(function(d){typeof define=="function"&&define.amd?define(d):d()})(function(){"use strict";function d(r){const e=/\{random:(-?\d+),(-?\d+)}/g;return r.replace(e,(n,s,t)=>{const o=parseInt(s),l=parseInt(t),i=Math.min(o,l),u=Math.max(o,l);return Math.floor(Math.random()*(u-i+1)+i).toString()})}function w(r,e){if(!r)return;const n=/\{(\w+)(?:\s+([^\}]+))?\}/g;return r.replace(n,(s,t,o)=>{const l=e[t];return typeof l=="function"?`${l(o)}`:l||s})}function g(){const r=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--wp-admin--admin-bar--height"));return isNaN(r)?0:r}function b(r){if(!r.dataset.interactions)return[];try{const e=JSON.parse(r.dataset.interactions);if(Array.isArray(e))return e}catch(e){console.error("Error parsing interactions:",e)}return[]}function _(r){var n;return Array.from(((n=r.parentElement)==null?void 0:n.children)||[]).indexOf(r)+1}function k(r,e,n,s){const t=w(s,{index:`${_(e)}`,parent_index:l=>{const i=l?e.closest(l):e.parentElement;return i?_(i):""}});if(!t)return[];const o=()=>{switch(n){case"limit_to_this_element":return r.querySelectorAll(t);case"closest_parent":{const l=s?e.closest(s):null;return l?[l]:[]}case"children_of_target":return e.querySelectorAll(t);case"everywhere":default:return document.querySelectorAll(t)}};return Array.from(o())}function p(r,e,n,s,t){return n==="custom"?k(r,e,t,s):n==="target"?[e]:[r]}function A(r,e){return r===e||r.contains(e)}function S(r){var t;if(!r.name)return!0;const e=((t=r.advanced)==null?void 0:t.disable_at)||[];if(!(e!=null&&e.length))return!1;const{getCurrentBreakpoint:n}=window.BreakdanceFrontend.utils,s=n().id;return e.includes(s)}function y(r){return r.startsWith(".")?r.slice(1).trim():r.trim()}function E(){}function C(r,e,n){if(!(n!=null&&n.css_class))return;const s=y(n.css_class);e.classList.add(s)}function M(r,e,n){if(!(n!=null&&n.css_class))return;const s=y(n.css_class);e.classList.remove(s)}function I(r,e,n){if(!(n!=null&&n.css_class))return;const s=y(n.css_class);e.classList.toggle(s)}function L(r,e,n){e.style.display="none"}function O(r,e,n){e.style.display==="none"&&(e.style.display=""),getComputedStyle(e).display==="none"&&(e.style.display=(n==null?void 0:n.display)||"block")}function B(r,e,n){var o;const s=(o=n==null?void 0:n.variable_name)==null?void 0:o.replace("--","");if((n==null?void 0:n.variable_value)===void 0||(n==null?void 0:n.variable_value)===null){e.style.removeProperty(`--${s}`);return}const t=d(n.variable_value);e.style.setProperty(`--${s}`,t)}function V(r,e,n){if(!(n!=null&&n.attribute_name))return;const s=d(n.attribute_value||"");e.setAttribute(n.attribute_name,s)}function F(r,e,n){n!=null&&n.attribute_name&&e.removeAttribute(n.attribute_name)}function T(r,e,n){const s=(n==null?void 0:n.scroll_offset)||0,t=(n==null?void 0:n.scroll_delay)||{number:0,style:"0",unit:"ms"},o=g(),l=t.number||0,i=t.unit==="s"?l*1e3:l;setTimeout(()=>{const u=e.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:u-s-o,behavior:"smooth"})},i)}function K(r,e,n){if(!(n!=null&&n.js_function_name))return;const s=window[n.js_function_name];if(!s){console.log(`[INTERACTIONS] Function ${n.js_function_name} not found.`);return}s(r,e,n)}function P(r,e,n){e.focus()}function x(r,e,n){e.blur()}class ${constructor(){this.actionMap=new Map([["add_class",C],["remove_class",M],["toggle_class",I],["hide_element",L],["show_element",O],["set_variable",B],["set_attribute",V],["remove_attribute",F],["scroll_to",T],["focus",P],["blur",x],["javascript_function",K]])}getActionByName(e){const n=this.actionMap.get(e);return n?n.bind(this):(console.error(`Action ${e} not found.`),null)}runAction(e,n,s,t){if(S(t))return;const o=this.getActionByName(t.name);if(!o)return;p(s,n,t.target,t.css_selector,t.match).forEach(i=>{console.debug("Running action:",t.name,`on element "${i.classList[0]}"`,t),o(e,i,t)})}}class D{constructor(){this.actions=new $,this.listeners=new Map([]),this.triggerMap=new Map([["click",this.handleClick],["mouse_enter",this.handleMouseEnter],["mouse_leave",this.handleMouseLeave],["scroll_into_view",this.handleScrollIntoView],["scroll_out_of_view",this.handleScrollOutOfView],["page_loaded",this.handlePageLoaded],["page_scrolled",this.handlePageScrolled],["key_down",this.handleKeyDown],["key_up",this.handleKeyUp]]),["click","mouseenter","mouseleave","scroll","keydown","keyup"].forEach(e=>this.listen(e))}getTriggerByName(e){const n=this.triggerMap.get(e);return n?n.bind(this):(console.error(`Trigger ${e} not found.`),null)}on(e,n){const s=this.listeners.get(e)||[];s.push(n),this.listeners.set(e,s)}off(e,n){const s=this.listeners.get(e)||[];this.listeners.set(e,s.filter(t=>t.fn!==n.fn))}listen(e){const n=["scroll"].includes(e);document.addEventListener(e,s=>{const t=this.listeners.get(e)||[];t.length&&t.forEach(({node:o,fn:l})=>{!n&&!A(o,s.target)||l(s)})},{capture:!0})}handleClick(e,n,s){let t=!1;const o=l=>{var i;(i=e==null?void 0:e.advanced)!=null&&i.run_only_once&&t||(this.actions.runAction(l,s,n,e),t=!0)};return this.on("click",{node:s,fn:o}),()=>{this.off("click",{node:s,fn:o})}}handleMouseEnter(e,n,s){let t=!1;const o=l=>{var i;(i=e==null?void 0:e.advanced)!=null&&i.run_only_once&&t||(this.actions.runAction(l,s,n,e),t=!0)};return this.on("mouseenter",{node:s,fn:o}),()=>{this.off("mouseenter",{node:s,fn:o})}}handleMouseLeave(e,n,s){let t=!1;const o=l=>{var i;(i=e==null?void 0:e.advanced)!=null&&i.run_only_once&&t||(this.actions.runAction(l,s,n,e),t=!0)};return this.on("mouseleave",{node:s,fn:o}),()=>{this.off("mouseleave",{node:s,fn:o})}}handleScrollIntoView(e,n,s){let t=!1;const o={threshold:e.threshold||.5},l=new IntersectionObserver(i=>{i.forEach(u=>{var c;u.isIntersecting&&(this.actions.runAction(u,s,n,e),t=!0),(c=e==null?void 0:e.advanced)!=null&&c.run_only_once&&t&&l.disconnect()})},o);return l.observe(s),()=>{l.disconnect()}}handleScrollOutOfView(e,n,s){let t=!1;const o={threshold:e.threshold||.5},l=new IntersectionObserver(i=>{i.forEach(u=>{var c;u.isIntersecting||(this.actions.runAction(u,s,n,e),t=!0),(c=e==null?void 0:e.advanced)!=null&&c.run_only_once&&t&&l.disconnect()})},o);return l.observe(s),()=>{l.disconnect()}}handlePageLoaded(e,n,s){return this.actions.runAction(void 0,n,n,e),()=>{}}handlePageScrolled(e,n,s){let t=0,o=!1;const l=i=>{var u;(u=e==null?void 0:e.advanced)!=null&&u.run_only_once&&o||(window.scrollY>t&&(this.actions.runAction(i,s,n,e),o=!0),t=window.scrollY)};return this.on("scroll",{node:s,fn:l}),()=>{this.off("scroll",{node:s,fn:l})}}handleKeyDown(e,n,s,t){let o=!1;const l=t.shift_key,i=t.ctrl_key,u=c=>{var f,a;const m=c.key.toLowerCase()===((f=t.key)==null?void 0:f.toLowerCase());l&&!c.shiftKey||i&&!c.ctrlKey||(a=e==null?void 0:e.advanced)!=null&&a.run_only_once&&o||(!t.key||m)&&(this.actions.runAction(c,s,n,e),o=!0)};return this.on("keydown",{node:s,fn:u}),()=>{this.off("keydown",{node:s,fn:u})}}handleKeyUp(e,n,s,t){let o=!1;const l=t.shift_key,i=t.ctrl_key,u=c=>{var f,a;const m=c.key.toLowerCase()===((f=t.key)==null?void 0:f.toLowerCase());l&&!c.shiftKey||i&&!c.ctrlKey||(a=e==null?void 0:e.advanced)!=null&&a.run_only_once&&o||(!t.key||m)&&(this.actions.runAction(c,s,n,e),o=!0)};return this.on("keyup",{node:s,fn:u}),()=>{this.off("keyup",{node:s,fn:u})}}}const j=new D,h=new Map;function q(r){return j.getTriggerByName(r)||window[r]||E}function R(r){var n,s;const e=r.target;h.has(e)&&((s=(n=h.get(e))==null?void 0:n.filter(Boolean))==null||s.forEach(t=>t()),h.delete(e)),v(e)}function U(r,e){const{trigger:n,target:s,css_selector:t,match:o,actions:l}=e;if(!n)return;const i=p(r,r,s,t,o),u=q(n);i.forEach(c=>{const f=[...h.get(r)||[]];l==null||l.forEach(a=>{const H=u(a,r,c,e);f.push(H)}),h.set(r,f)})}function v(r){b(r).forEach(n=>U(r,n))}function Y(){Array.from(document.querySelectorAll("[data-interactions]")).forEach(e=>v(e))}addEventListener("breakdance_refresh_interactions",R),document.addEventListener("DOMContentLoaded",()=>Y())});
