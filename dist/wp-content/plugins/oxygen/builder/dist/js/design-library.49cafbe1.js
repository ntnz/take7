(()=>{"use strict";var t={67007:(t,s,e)=>{var a=e(20144),i=e(85450),r=e(49026),o=e(74604),l=e(31096),n=function(){var t=this,s=t._self._c;t._self._setupProxy;return s(l.Z,{staticClass:"breakdance-admin-wp"},[t.isLoading?s("Loading"):t._e(),s("Notifications"),s("div",{staticClass:"design-library"},[s("h1",{staticClass:"design-library__title"},[t._v("Design Library")]),s("div",{staticClass:"design-library__grid"},t._l(t.designProviders,(function(e){return s("DesignLibraryItem",{key:e.name,attrs:{provider:e},on:{select:t.setProviderToImport}})})),1)]),t.showOverrideWarning?s("DesignLibraryConfirmImportDialog",{attrs:{provider:t.providerToImport,"provider-data":t.loadedData,"show-password-form":t.showPasswordForm,loading:t.loadingDesignSetData},on:{refresh:t.getDesignSetData,import:t.importFullSite,close:t.closeOverrideWarningDialog}}):t.showImportingDialog?s("DesignLibraryImportingDialog",{attrs:{value:t.providerToImport,"provider-data":t.loadedData},on:{close:t.closeImportingDialog}}):t._e()],1)},p=[],d=e(70655),u=e(38085),g=e(11529),m=e(3735),c=e(48973),h=e(98851),_=e(92260),b=e(80427),v=e(89137),y=e(85283),D=function(){var t=this,s=t._self._c;t._self._setupProxy;return s("div",["loading"===t.status?s("Icon",{staticClass:"design_library__spinning_icon",attrs:{icon:"SpinnerIcon",title:"Importing the data"}}):"success"===t.status||"successNothingToDo"===t.status?s("Icon",{staticClass:"design_library__icon_success",attrs:{icon:"CheckSquareIcon",title:"Success loading the data"}}):"error"!==t.status&&t.status?"partialError"===t.status?s("Icon",{staticClass:"design_library__icon_partial_error",attrs:{icon:"ExclamationMarkCircleIcon",title:"Some requests failed. Try again"}}):t._e():s("Icon",{staticClass:"design_library__icon_error",attrs:{icon:"CloseSquareIcon",title:"There was an error loading the data"}})],1)},S=[];let f=class extends a.ZP{};(0,d.gn)([(0,u.fI)()],f.prototype,"status",void 0),f=(0,d.gn)([(0,u.wA)({components:{Icon:y.Z}})],f);const T=f,I=T;var P=e(1001),w=(0,P.Z)(I,D,S,!1,null,null,null);const k=w.exports;var x=e(82202),O=e(37179),C=e(73385),E=e(75223),Z=e(12570),L=function(){var t=this,s=t._self._c;t._self._setupProxy;return s(Z.Z,{attrs:{value:!0,width:500,persistent:!0},on:{input:t.close}},[s(C.Z,{staticClass:"breakdance-dialog",attrs:{tile:"",flat:""}},[s(E.EB,{staticClass:"breakdance-dialog-title"},[t._v(' Importing the "'+t._s(t.value?t.value.name:"")+'" site ')]),s(E.ZB,{staticClass:"breakdance-dialog-contents"},[s("div",{staticClass:"design_library__importing_item"},[s("DesignLibraryStatusIcon",{attrs:{status:t.importingDataStatus["trashingTemplates"]}}),s("div",["loading"===t.importingDataStatus["trashingTemplates"]?s("span",[t._v(" Trashing ")]):"success"===t.importingDataStatus["trashingTemplates"]?s("span",[t._v(" Successfully trashed ")]):"error"===t.importingDataStatus["trashingTemplates"]?s("span",[t._v(" Error trashing ")]):t._e(),t._v(" existing Templates, Headers, Footers, "+t._s(t.$bdox("global_blocks"))+", and Popups. ")])],1),t._l(t.infoToImport,(function(e){return s("div",{staticClass:"design_library__importing_item"},[s("DesignLibraryStatusIcon",{attrs:{status:t.importingDataStatus[e.statusKey]}}),s("div",["loading"===t.importingDataStatus[e.statusKey]?s("span",[t._v(" Importing ")]):"success"===t.importingDataStatus[e.statusKey]?s("span",[t._v(" Successfully imported ")]):"successNothingToDo"===t.importingDataStatus[e.statusKey]?s("span",[t._v(" Nothing to import for ")]):"error"===t.importingDataStatus[e.statusKey]?s("span",[t._v(" Error importing ")]):"partialError"===t.importingDataStatus[e.statusKey]?s("span",[t._v(" Failed to import all ")]):t._e(),s("b",[t._v(t._s(e.label))])])],1)})),t.canCloseImportingDialog?t._e():s(x.Z,{staticClass:"mt-4",attrs:{text:"",color:"red"}},[s("span",{staticClass:"text-body-2"},[t._v("Please don't close this tab until the import is finished.")])])],2),t.canCloseImportingDialog?s(E.h7,{staticClass:"breakdance-dialog-actions"},[s(O.Z,{on:{click:t.close}},[t._v(" Close ")]),t.getImportedSiteHomepageUrl?s(O.Z,{staticClass:"ml-2",attrs:{href:t.getImportedSiteHomepageUrl,target:"_blank",color:"primary",link:!0}},[t._v(" Open in "+t._s(t.$bdox("plugin_name"))+" ")]):t._e()],1):t._e()],1)],1)},N=[],A=e(39664),F=e(32521),B=e(96065),G=e(75031),H=e(71688),U=e(89412);let $=class extends a.ZP{constructor(){super(...arguments),this.importingDataStatus={trashingTemplates:null,globalSettings:null,designPresets:null,postsAndPages:null,templates:null,headers:null,footers:null,popups:null,blocks:null,variables:null,oxySelectors:null},this.temporaryDataStatus={trashingTemplates:null,globalSettings:null,designPresets:null,postsAndPages:null,templates:null,headers:null,footers:null,popups:null,blocks:null,variables:null,oxySelectors:null},this.remoteHomepageId=null,this.importedHomepageIdOrFirstPostId=null,this.idsOfPostsAndPagesToImport=null,this.idsOfTemplatesToImport=null,this.oldToNewBlockIdsMap={}}async mounted(){this.value?((0,U.w)(),this.applyStatusToAllTemplateStatuses("loading"),this.importingDataStatus.postsAndPages="loading",this.importingDataStatus.globalSettings="loading",this.importingDataStatus.designPresets="loading",this.importingDataStatus.variables="loading",this.importingDataStatus.oxySelectors="loading",this.importingDataStatus.trashingTemplates="loading",this.setFullSiteLastImportedFromUrl(),this.idsOfTemplatesToImport=await this.getTemplateIdsToImport(this.value.url),this.isGlobalSettingsEnabled?this.importGlobalSettings():this.importingDataStatus.globalSettings="successNothingToDo",this.isDesignPresetsEnabled?this.importDesignPresets():this.importingDataStatus.designPresets="successNothingToDo",this.isVariablesEnabled?this.importVariables():this.importingDataStatus.variables="successNothingToDo",this.isOxySelectorsEnabled?this.importOxySelectors():this.importingDataStatus.oxySelectors="successNothingToDo",await this.trashAllTemplatesHeadersFooters(),await this.importAllBlocks(),this.importAllTemplates(),await this.getRemoteHomepageId(),this.importPostsAndPages()):A.Z.log.errorMessage("Couldn't import site, something went wrong")}get infoToImport(){const t=[{label:"Posts and Pages",statusKey:"postsAndPages"},{label:"Templates",statusKey:"templates"},{label:"Headers",statusKey:"headers"},{label:"Footers",statusKey:"footers"},{label:"Popups",statusKey:"popups"},{label:this.$bdox("global_blocks"),statusKey:"blocks"}],s=[];return this.isGlobalSettingsEnabled&&s.push({label:"Global Settings",statusKey:"globalSettings"}),this.isDesignPresetsEnabled&&s.push({label:"Design Presets",statusKey:"designPresets"}),this.isVariablesEnabled&&s.push({label:"Variables",statusKey:"variables"}),this.isOxySelectorsEnabled&&s.push({label:"Selectors",statusKey:"oxySelectors"}),[...s,...t]}get isGlobalSettingsEnabled(){return this.providerData?.isGlobalSettingsEnabled}get isDesignPresetsEnabled(){return this.providerData?.isDesignPresetsEnabled}get isVariablesEnabled(){return this.providerData?.isVariablesEnabled}get isOxySelectorsEnabled(){return this.providerData?.isOxySelectorsEnabled}get isPopupsEnabled(){return this.providerData?.isPopupsEnabled}get canCloseImportingDialog(){const t=t=>"loading"!==t;return t(this.importingDataStatus.postsAndPages)&&t(this.importingDataStatus.globalSettings)&&t(this.importingDataStatus.designPresets)&&t(this.importingDataStatus.templates)&&t(this.importingDataStatus.blocks)&&t(this.importingDataStatus.popups)&&t(this.importingDataStatus.footers)&&t(this.importingDataStatus.headers)&&t(this.importingDataStatus.variables)&&t(this.importingDataStatus.oxySelectors)}get getImportedSiteHomepageUrl(){if(!this.value||!this.importedHomepageIdOrFirstPostId||!window.Breakdance.homeUrl)return null;const t=new URL(window.Breakdance.homeUrl);return t.searchParams.append(window.Breakdance.builderMode,"builder"),t.searchParams.append("id",`${this.importedHomepageIdOrFirstPostId}`),t.href}close(){this.$emit("close")}setFullSiteLastImportedFromUrl(){this.value&&(0,h.D)({action:"breakdance_save_arbitrary",dataToPost:{key:"design_library_full_site_last_imported_from_url",data:this.value.url},decoder:F._4})}async importGlobalSettings(){this.value&&(0,m.zG)(await(0,h.D)({action:"breakdance_import_external_global_settings",decoder:G.az,dataToPost:{url:this.value.url},friendlyName:"Importing Global Settings"}),(0,c.g_)((()=>{this.importingDataStatus.globalSettings="error"}),(()=>{(0,H.h)(),this.importingDataStatus.globalSettings="success"})))}async importDesignPresets(){this.value&&(0,m.zG)(await(0,h.D)({action:"breakdance_import_external_design_presets",decoder:F.dt({success:F.Z_,successNothingToDo:F.G0([F.S1,F.O7])}),dataToPost:{url:this.value.url},friendlyName:"Importing Design Presets"}),(0,c.g_)((()=>{this.importingDataStatus.designPresets="error"}),(t=>{this.importingDataStatus.designPresets=t?.successNothingToDo?"successNothingToDo":"success"})))}async importVariables(){this.value&&(0,m.zG)(await(0,h.D)({action:"breakdance_import_external_variables",decoder:F.dt({success:F.Z_,successNothingToDo:F.G0([F.S1,F.O7])}),dataToPost:{url:this.value.url},friendlyName:"Importing Variables"}),(0,c.g_)((()=>{this.importingDataStatus.variables="error"}),(t=>{this.importingDataStatus.variables=t?.successNothingToDo?"successNothingToDo":"success"})))}async importOxySelectors(){this.value&&(0,m.zG)(await(0,h.D)({action:"breakdance_import_external_oxy_selectors",decoder:F.dt({success:F.Z_,successNothingToDo:F.G0([F.S1,F.O7])}),dataToPost:{url:this.value.url},friendlyName:"Importing Oxy Selectors"}),(0,c.g_)((()=>{this.importingDataStatus.oxySelectors="error"}),(t=>{this.importingDataStatus.oxySelectors=t?.successNothingToDo?"successNothingToDo":"success"})))}async importPostsAndPages(){this.value&&(this.idsOfPostsAndPagesToImport=await this.getPostsIdsToImport(this.value.url),null!==this.idsOfPostsAndPagesToImport?this.idsOfPostsAndPagesToImport.length?this.importPostsAndPagesOneByOne(this.idsOfPostsAndPagesToImport):this.importingDataStatus.postsAndPages="successNothingToDo":this.importingDataStatus.postsAndPages="error")}async getPostsIdsToImport(t){return(0,m.zG)(await(0,h.D)({action:"breakdance_design_lib_get_ids_of_posts_and_pages_to_import",decoder:F.G0([F.IX(F.pk),F.lB]),dataToPost:{url:t},friendlyName:"Getting Posts IDs to import"}),(0,c.g_)((()=>null),(t=>t)))}async importPostsAndPagesOneByOne(t){if(!this.value)return;let s=!1,e=!1,a=null;for(const i of t)(0,m.zG)(await(0,h.D)({action:"breakdance_design_lib_import_post_or_page",decoder:F.dt({success:F.Z_,postId:F.G0([F.pk,F.S1])}),dataToPost:{id:i,url:this.value.url,idsToMap:this.oldToNewBlockIdsMap},friendlyName:"Importing all post and pages"}),(0,c.g_)((()=>{s=!0}),(t=>{!a&&t.postId&&(a=t.postId),i===this.remoteHomepageId&&t.postId&&(this.importedHomepageIdOrFirstPostId=t.postId),e=!0})));this.importedHomepageIdOrFirstPostId||(this.importedHomepageIdOrFirstPostId=a),this.updateTemporaryState("postsAndPages",s,e),this.importingDataStatus.postsAndPages=this.temporaryDataStatus.postsAndPages}updateTemporaryState(t,s,e){s&&e?this.temporaryDataStatus[t]="partialError":s?this.temporaryDataStatus[t]="error":e&&(this.temporaryDataStatus[t]="success")}async trashAllTemplatesHeadersFooters(){const t=await Promise.all([this.trashTemplateByPostType("headers"),this.trashTemplateByPostType("footers"),this.trashTemplateByPostType("templates"),this.trashTemplateByPostType("global_blocks"),this.trashTemplateByPostType("popups")]);return this.importingDataStatus["trashingTemplates"]=this.temporaryDataStatus["trashingTemplates"],t}async trashTemplateByPostType(t){return(0,m.zG)(await(0,h.D)({action:"breakdance_design_lib_trash_all_templates_by_type",decoder:F.dt({success:F.Z_}),dataToPost:{templateType:t},friendlyName:`Trashing all ${t}`}),(0,c.g_)((()=>{this.updateTemporaryState("trashingTemplates",!0,"success"===this.temporaryDataStatus["trashingTemplates"])}),(()=>{this.updateTemporaryState("trashingTemplates","error"===this.temporaryDataStatus["trashingTemplates"],!0)})))}async importAllTemplates(){this.value&&this.idsOfTemplatesToImport&&(0!==Object.values(this.idsOfTemplatesToImport).flat().length?(this.importTemplates(this.idsOfTemplatesToImport.templateIds),this.importHeaders(this.idsOfTemplatesToImport.headerIds),this.importFooter(this.idsOfTemplatesToImport.footerIds),this.isPopupsEnabled?this.importPopups(this.idsOfTemplatesToImport.popupIds):this.importingDataStatus.popups="successNothingToDo"):this.applyStatusToAllTemplateStatuses("successNothingToDo"))}async importAllBlocks(){this.value&&this.idsOfTemplatesToImport&&await this.importBlocks(this.idsOfTemplatesToImport.blockIds)}applyStatusToAllTemplateStatuses(t){this.importingDataStatus.templates=t,this.importingDataStatus.headers=t,this.importingDataStatus.footers=t,this.importingDataStatus.blocks=t,this.importingDataStatus.popups=t}async getTemplateIdsToImport(t){return(0,m.zG)(await(0,h.D)({action:"breakdance_design_lib_get_ids_of_templates_to_import",decoder:B.Z,dataToPost:{url:t},friendlyName:"Getting template IDs to import"}),(0,c.g_)((()=>(this.applyStatusToAllTemplateStatuses("error"),null)),(t=>t)))}async importTemplates(t){if(t.length){for(const s of t)await this.importTemplateById(s,"templates");this.importingDataStatus.templates=this.temporaryDataStatus.templates,this.temporaryDataStatus.templates=null}else this.importingDataStatus.templates="successNothingToDo"}async importHeaders(t){if(t.length){for(const s of t)await this.importTemplateById(s,"headers");this.importingDataStatus.headers=this.temporaryDataStatus.headers,this.temporaryDataStatus.headers=null}else this.importingDataStatus.headers="successNothingToDo"}async importFooter(t){if(t.length){for(const s of t)await this.importTemplateById(s,"footers");this.importingDataStatus.footers=this.temporaryDataStatus.footers,this.temporaryDataStatus.footers=null}else this.importingDataStatus.footers="successNothingToDo"}async importPopups(t){if(t.length){for(const s of t)await this.importTemplateById(s,"popups");this.importingDataStatus.popups=this.temporaryDataStatus.popups,this.temporaryDataStatus.popups=null}else this.importingDataStatus.popups="successNothingToDo"}async importBlocks(t){if(t.length){for(const s of t){const t=await this.importTemplateById(s,"blocks");t&&(this.oldToNewBlockIdsMap[s]=t)}this.importingDataStatus.blocks=this.temporaryDataStatus.blocks,this.temporaryDataStatus.blocks=null}else this.importingDataStatus.blocks="successNothingToDo"}async importTemplateById(t,s){if(this.value)return(0,m.zG)(await(0,h.D)({action:"breakdance_design_lib_import_template_by_id",decoder:F.dt({success:F.Z_,postId:F.pk}),dataToPost:{id:t,url:this.value.url,idsToMap:this.oldToNewBlockIdsMap},friendlyName:`Importing template with ID "${t}"`}),(0,c.g_)((()=>(this.updateTemporaryState(s,!0,"success"===this.temporaryDataStatus[s]),null)),(t=>(this.updateTemporaryState(s,"error"===this.temporaryDataStatus[s],!0),t.postId))))}async getRemoteHomepageId(){if(this.value)return(0,m.zG)(await(0,h.D)({action:"breakdance_design_lib_get_homepage_id_to_import",decoder:F.dt({id:F.pk}),dataToPost:{url:this.value.url},friendlyName:"Importing homepage id"}),(0,c.g_)((()=>{}),(t=>{this.remoteHomepageId=t.id})))}};(0,d.gn)([(0,u.fI)()],$.prototype,"value",void 0),(0,d.gn)([(0,u.fI)()],$.prototype,"providerData",void 0),$=(0,d.gn)([(0,u.wA)({components:{DesignLibraryStatusIcon:k}})],$);const K=$,V=K;var z=(0,P.Z)(V,L,N,!1,null,null,null);const M=z.exports;var j=e(62846),q=e(2028),W=e(98949),R=e(80265),Y=e(58720),J=function(){var t=this,s=t._self._c;t._self._setupProxy;return s("div",{staticClass:"design-library-item"},[s("div",{staticClass:"design-library-item__preview"},[s("span",{staticClass:"design-library-item__preview-button"},[s(O.Z,{attrs:{color:"secondary",rounded:""},on:{click:t.previewProvider}},[t._v(" Live Preview ")])],1),t.provider.meta?.thumbnailUrl?s("img",{staticClass:"design-library-item__thumbnail",attrs:{src:t.provider.meta?.thumbnailUrl,width:"300",alt:`Thumbnail image for the ${t.provider.name} site`}}):s("Icon",{staticClass:"design-library-item__thumbnail-icon",attrs:{icon:"ImageIcon",size:"24"}})],1),s("div",[s("div",{staticClass:"design-library-item__meta"},[s("h2",{staticClass:"design-library-item__title"},[t._v(" "+t._s(t.provider.name)+" ")]),s("div",{staticClass:"design-library-item__import-button"},[s("NiceButton",{attrs:{color:"secondary"},on:{click:function(s){return t.$emit("select",t.provider.url)}}},[t._v(" Import ")])],1)])])])},X=[],Q=e(47431);let tt=class extends u.w3{previewProvider(){(0,Q.K)("Design Library",{action:"provider_previewed",provider:this.provider?.name}),window.open(this.provider?.url,"_blank")}};(0,d.gn)([(0,u.fI)()],tt.prototype,"provider",void 0),tt=(0,d.gn)([(0,u.wA)({components:{Icon:y.Z,NiceButton:b.Z}})],tt);const st=tt,et=st;var at=(0,P.Z)(et,J,X,!1,null,null,null);const it=at.exports;var rt=function(){var t=this,s=t._self._c;t._self._setupProxy;return s("Dialog",{attrs:{value:!0,width:700,"min-height":500,"content-class":"design-library-confirm-import-dialog"},on:{close:function(s){return t.$emit("close")},"click:outside":function(s){return t.$emit("close")},keydown:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"esc",27,s.key,["Esc","Escape"])?null:t.$emit("close")}},scopedSlots:t._u([{key:"text",fn:function(){return[s("div",{staticClass:"design-library-confirm-import__grid"},[s("div",{staticClass:"design-library-confirm-import__thumbnail"},[t.provider?.meta?.thumbnailUrl?s("img",{attrs:{src:t.provider.meta.thumbnailUrl,width:"300",alt:`Thumbnail image for the ${t.provider.name} site`}}):s("Icon",{staticClass:"design-library-item__thumbnail-icon",attrs:{icon:"ImageIcon",size:"24"}})],1),s("div",{staticClass:"design-library-confirm-import__content"},[s("h3",{staticClass:"design-library-confirm-import__title"},[t._v(" Import "+t._s(t.provider?t.provider.name:"")+" ")]),t.loading?s("LoadingSpinner",{staticClass:"design-library-confirm-import__loading",attrs:{color:"var(--gray500)",size:45}}):t.showPasswordForm?s("DesignLibraryPassword",{attrs:{provider:t.provider},on:{"password-validated":function(s){return t.$emit("refresh",s)}}}):[s("p",[t._v(" Importing a full site will replace your site's "),t.isGlobalSettingsEnabled?[s("b",[t._v("Global Settings")]),t._v(", ")]:t._e(),t.isDesignPresetsEnabled?[s("b",[t._v("Design Presets")]),t._v(", ")]:t._e(),t.isVariablesEnabled?[s("b",[t._v("Variables")]),t._v(", ")]:t._e(),t.isOxySelectorsEnabled?[s("b",[t._v("Selectors")]),t._v(", ")]:t._e(),s("b",[t._v(t._s(t.$bdox("plugin_name"))+" Settings")]),t._v(", and also import all "),s("b",[t._v("Pages")]),t._v(", "),s("b",[t._v("Posts")]),t._v(", and "),s("b",[t._v("Templates")]),t._v(" from the design set. ")],2),s("p",[t._v(" Your existing "),s("span",{domProps:{innerHTML:t._s(t.itemsToTrash)}}),t._v(" will be moved to the trash. You can restore them from the trash after the import. ")]),s("div",{staticClass:"design-library-confirm-import-footer"},[t.providerData?.fullSiteLastImportedFromUrl?s(x.Z,{attrs:{color:"red",text:""}},[t.providerData?.fullSiteLastImportedFromUrl===t.provider?.url?s("span",{staticClass:"text-body-2"},[t._v(" You already did full site import for this site. ")]):s("strong",{staticClass:"text-body-2"},[t._v(" The last full site import you performed was for "+t._s(t.providerData?.fullSiteLastImportedFromUrl)+" ")])]):t._e(),s("div",{staticClass:"design-library-confirm-import__actions"},[s(O.Z,{attrs:{text:""},on:{click:function(s){return t.$emit("close")}}},[t._v(" Cancel ")]),s(O.Z,{attrs:{color:"blue",dark:""},on:{click:t.importProvider}},[t._v(" Confirm Overwrite & Import ")])],1)],1)]],2)])]},proxy:!0}])})},ot=[];let lt=class extends u.w3{importProvider(){(0,Q.K)("Design Library",{action:"provider_imported",provider:this.provider?.name}),this.$emit("import")}get isGlobalSettingsEnabled(){return this.providerData?.isGlobalSettingsEnabled}get isDesignPresetsEnabled(){return this.providerData?.isDesignPresetsEnabled}get isVariablesEnabled(){return this.providerData?.isVariablesEnabled}get isOxySelectorsEnabled(){return this.providerData?.isOxySelectorsEnabled}get isPopupsEnabled(){return this.providerData?.isPopupsEnabled}get itemsToTrash(){const t=[];t.push("Templates"),t.push("Headers"),t.push("Footers"),t.push(this.$bdox("global_blocks")),this.isPopupsEnabled&&t.push("Popups");const s=t.map((t=>`<b>${t}</b>`)),e=s.pop();return`${s.join(", ")}, and ${e}`}};(0,d.gn)([(0,u.fI)()],lt.prototype,"provider",void 0),(0,d.gn)([(0,u.fI)()],lt.prototype,"providerData",void 0),(0,d.gn)([(0,u.fI)({default:!1})],lt.prototype,"loading",void 0),(0,d.gn)([(0,u.fI)({default:!1})],lt.prototype,"showPasswordForm",void 0),lt=(0,d.gn)([(0,u.wA)({components:{Icon:y.Z,DesignLibraryPassword:R.Z,Dialog:v.Z,LoadingSpinner:Y.Z}})],lt);const nt=lt,pt=nt;var dt=(0,P.Z)(pt,rt,ot,!1,null,null,null);const ut=dt.exports;let gt=class extends a.ZP{constructor(){super(...arguments),this.isLoading=!0,this.loadedData={designProviders:[],globalSettingsLastImportedFromUrl:null,designPresetsLastImportedFromUrl:null,variablesLastImportedFromUrl:null,oxySelectorsLastImportedFromUrl:null,fullSiteLastImportedFromUrl:null,isGlobalSettingsEnabled:!0,isDesignPresetsEnabled:!0,isVariablesEnabled:!1,isOxySelectorsEnabled:!1,isPopupsEnabled:!0},this.showOverrideWarning=!1,this.showImportingDialog=!1,this.providerToImport=null,this.loadingDesignSetData=!1,this.requiresPassword=!1,this.passwordValid=!0}get showPasswordForm(){return this.requiresPassword&&!this.passwordValid}async mounted(){(0,m.zG)(await(0,h.D)({action:"breakdance_get_design_library_data",decoder:_.Jd}),(0,c.g_)((()=>{this.isLoading=!1}),(t=>{this.loadedData=t,this.isLoading=!1,(0,Q.K)("Design Library",{action:"design_library_viewed"})})))}get designProviders(){return this.loadedData.designProviders.filter((t=>!t.isLocal)).filter((t=>"complete_site"===t.type)).reverse()}async getDesignSetData(t){let s=this.providerToImport?.url;if(this.loadingDesignSetData=!0,s){if(t){const e=new URLSearchParams,a=new URL(s);e.append("password",t),a.search=e.toString(),s=a.toString()}(0,m.zG)(await(0,h.D)({action:this.providerToImport?.isLocal?"breakdance_get_local_design_set":"breakdance_get_external_design_set",decoder:_.i2,friendlyName:"Design Set Data",dataToPost:{url:s}}),(0,c.g_)((()=>{}),(t=>{this.requiresPassword=t.requiresPassword||!1,this.passwordValid=!!t.passwordValid}))),this.loadingDesignSetData=!1}}setProviderToImport(t){this.showOverrideWarning=!0,(0,U.w)(),this.providerToImport=this.designProviders.find((s=>s.url===t)),this.getDesignSetData()}closeImportingDialog(){this.showImportingDialog=!1,this.providerToImport=null}closeOverrideWarningDialog(){this.showOverrideWarning=!1,this.providerToImport=null}async importFullSite(){this.showOverrideWarning=!1,this.showImportingDialog=!0,this.providerToImport&&(this.loadedData.fullSiteLastImportedFromUrl=this.providerToImport.url,(0,W.Hw)(this.providerToImport.url))}};gt=(0,d.gn)([(0,u.wA)({components:{DesignLibraryConfirmImportDialog:ut,DesignLibraryItem:it,LoadingSpinner:Y.Z,DesignLibraryPassword:R.Z,AlertBox:q.Z,Notifications:j.Z,DesignLibraryImportingDialog:M,DesignLibraryStatusIcon:k,Icon:y.Z,Dialog:v.Z,NiceButton:b.Z,Loading:g.Z}})],gt);const mt=gt,ct=mt;var ht=(0,P.Z)(ct,n,p,!1,null,null,null);const _t=ht.exports;var bt=e(18082);a.ZP.directive("permission",o.Z),a.ZP.config.productionTip=!1,a.ZP.use(bt.k,{getTranslations:bt.F}),new a.ZP({store:i["default"],vuetify:r.Z,render:t=>t(_t)}).$mount("#design-library-wrapper")}},s={};function e(a){var i=s[a];if(void 0!==i)return i.exports;var r=s[a]={id:a,loaded:!1,exports:{}};return t[a].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}e.m=t,(()=>{var t=[];e.O=(s,a,i,r)=>{if(!a){var o=1/0;for(d=0;d<t.length;d++){for(var[a,i,r]=t[d],l=!0,n=0;n<a.length;n++)(!1&r||o>=r)&&Object.keys(e.O).every((t=>e.O[t](a[n])))?a.splice(n--,1):(l=!1,r<o&&(o=r));if(l){t.splice(d--,1);var p=i();void 0!==p&&(s=p)}}return s}r=r||0;for(var d=t.length;d>0&&t[d-1][2]>r;d--)t[d]=t[d-1];t[d]=[a,i,r]}})(),(()=>{e.n=t=>{var s=t&&t.__esModule?()=>t["default"]:()=>t;return e.d(s,{a:s}),s}})(),(()=>{e.d=(t,s)=>{for(var a in s)e.o(s,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:s[a]})}})(),(()=>{e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{e.o=(t,s)=>Object.prototype.hasOwnProperty.call(t,s)})(),(()=>{e.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}})(),(()=>{e.nmd=t=>(t.paths=[],t.children||(t.children=[]),t)})(),(()=>{e.j=35})(),(()=>{var t={35:0};e.O.j=s=>0===t[s];var s=(s,a)=>{var i,r,[o,l,n]=a,p=0;if(o.some((s=>0!==t[s]))){for(i in l)e.o(l,i)&&(e.m[i]=l[i]);if(n)var d=n(e)}for(s&&s(a);p<o.length;p++)r=o[p],e.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return e.O(d)},a=globalThis["webpackChunkbuilder"]=globalThis["webpackChunkbuilder"]||[];a.forEach(s.bind(null,0)),a.push=s.bind(null,a.push.bind(a))})();var a=e.O(void 0,[998,64],(()=>e(67007)));a=e.O(a)})();
//# sourceMappingURL=design-library.49cafbe1.js.map