(()=>{"use strict";var t={5502:(t,e,a)=>{function s(t){return"object"===typeof t&&null!==t&&!Array.isArray(t)}a.d(e,{S:()=>s})},89028:(t,e,a)=>{a.d(e,{ij:()=>b,gR:()=>v,l9:()=>_});a(27361),a(31381),a(85450);var s=a(45974),o=a(30902),n=(a(9950),a(69137),a(23128),a(65118)),l=(a(65669),a(84274),a(17879),a(12721)),i=a(31737),r=a(31549),c=a(75031),d=a(32521);const p=d.G0([c.NM,d.IX(c.NM)]),u=d.dt({controlSectionShapeHash:d.Z_,propertiesData:d.dt({propertiesData:d._4})}),m=d.dt({path:d.Z_,data:d._4}),h=d.r$({element:p,controlSectionPropertiesData:u,oxy:m});a(98949),a(47354);new l.hF;async function g(t){const{secure:e,permission:a}=await(0,i.fn)();return t&&!window.safari?"event":e?null===a||"denied"===a.state?"localstorage":"clipboard":"localstorage"}async function _(t){try{await navigator.clipboard.writeText(t),console.debug("Writing to clipboard")}catch(e){(0,i._G)(t),console.debug("Fallback: Writing to clipboard")}(0,r.r)("breakdance_clipboard",t)}async function v(t){const e=t?.clipboardData?.getData("text"),a=await g(t);return console.debug(`Reading clipboard from ${a}`),"event"===a?e:"localstorage"===a?(0,r.z)("breakdance_clipboard"):await navigator.clipboard.readText()}async function b(t){const e=await v(t);if(!e)return null;const a=(0,n.Z)(e,h);return(0,o.pipe)(a,(0,s.fold)((()=>null),(t=>t??null)))}},31737:(t,e,a)=>{async function s(){try{return await navigator.permissions.query({name:"clipboard-read",allowWithoutGesture:!1})}catch(t){return null}}async function o(){const t=await s();return{secure:window.isSecureContext,permission:t}}function n(t){const e=document.createElement("textarea");let a;e.value=t,e.style.top="0",e.style.left="0",e.style.position="fixed",e.classList.add("breakdance-offscreen-input"),document.body.appendChild(e),e.focus(),e.select();try{a=document.execCommand("copy")}catch(s){a=!1}return document.body.removeChild(e),a}a.d(e,{_G:()=>n,fn:()=>o})},1073:(t,e,a)=>{a.d(e,{T:()=>p});var s=a(98851),o=(a(75031),a(30902)),n=a(45974),l=a(51168),i=a(31044),r=a(32521),c=a(65669),d=a(69137);async function p(){return(0,o.pipe)(await(0,s.D)({friendlyName:"Saving global settings to WordPress",action:"breakdance_save_global_settings",dataToPost:{globalSettings:(0,c.J)(i.cr.globalSettings)},decoder:r._4}),(0,n.fold)((t=>((0,l.UE)(t),!1)),(()=>(d.n.ignore((()=>i.cr.markCurrentGlobalSettingsAsUntouched())),!0))))}},37982:(t,e,a)=>{a.d(e,{Fr:()=>_,y8:()=>m});a(21516);var s=a(98851),o=a(3735),n=a(48973),l=a(51168),i=a(31044),r=a(65669),c=a(32521),d=a(95690),p=a(69137),u=a(39664);function m(t){return/^-?[.]+[_a-zA-Z]+[_a-zA-Z0-9-]*$/.test(t)}function h(t){try{document.createDocumentFragment().querySelector(t)}catch{return!1}return!0}function g(t){if("class"===t.type){if(!m(t.name))return void u.Z.log.message(`${t.name} is not a valid CSS class name.`)}else if(!h(t.name))return void u.Z.log.message(`${t.name} is not a valid CSS selector.`);i.cr.cssSelectors.find((e=>e.name===t.name))?u.Z.log.message(`${t.name} is already present.`):p.n.transaction((()=>i.cr.setSelectors([...i.cr.cssSelectors,t])),"Add Selector")}function _(t){g(t),(0,d.O_)("selectors")||v()}async function v(){return(0,o.zG)(await(0,s.D)({friendlyName:"Saving selectors to WordPress",action:"breakdance_save_selectors",dataToPost:{selectors:(0,r.J)(i.cr.cssSelectors)},decoder:c._4}),(0,n.g_)((t=>((0,l.UE)(t),!1)),(()=>(p.n.ignore((()=>i.cr.markCurrentSelectorsAsUntouched())),!0))))}},24111:(t,e,a)=>{function s(t){return"class"===t.type?`.${t.name}`:t.name}a.d(e,{I:()=>s})},41836:(t,e,a)=>{a.d(e,{Ds:()=>m});var s=a(98851),o=a(3735),n=a(48973),l=a(51168),i=a(31044),r=a(65669),c=a(32521),d=a(95690),p=a(69137);a(17582);function u(t){p.n.transaction((()=>{const e=i.cr.variables;let a=e.length;for(let o=e.length-1;o>=0;o--)if(e[o].collection===t.collection){a=o+1;break}const s=[...e.slice(0,a),t,...e.slice(a)];i.cr.setVariables(s)}),"Add Variable")}function m(t){u(t),(0,d.O_)("variables")||h()}async function h(){return(0,o.zG)(await(0,s.D)({friendlyName:"Saving variables to WordPress",action:"breakdance_save_variables",dataToPost:{variables:(0,r.J)({variables:i.cr.variables,collections:i.cr.variablesCollections})},decoder:c._4}),(0,n.g_)((t=>((0,l.UE)(t),!1)),(()=>(p.n.ignore((()=>i.cr.markCurrentVariablesAsUntouched())),!0))))}},43530:(t,e,a)=>{var s=a(20144),o=a(85450),n=a(49026),l=a(31096),i=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(l.Z,{staticClass:"breakdance-admin-wp"},[e("Notifications"),e("div",{staticClass:"manage-templates-app"},[t.isBlockPostType?[e("ManageGlobalBlocks")]:[e("ManageTemplates",{attrs:{postType:t.postType}})]],2)],1)},r=[],c=a(70655),d=a(38085),p=a(62846),u=a(37179),m=a(30144),h=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[t.isLoadingData?e("Loading"):t._e(),e("div",{staticClass:"manage-templates"},[e("div",{staticClass:"manage-templates__header"},[e("h1",{staticClass:"manage-templates__title"},[t._v(" "+t._s(t.showTrash?`Deleted ${t.templateName}s`:`${t.templateName}s`)+" ")]),t.showTrash?t._e():[t.postType===t.breakdanceHeaderPostType||t.postType===t.breakdanceFooterPostType||"breakdance_popup"===t.postType?e(u.Z,{staticClass:"breakdance-wp-admin-templating-button",attrs:{elevation:"0",outlined:""},on:{click:function(e){t.modalData={type:"add",data:t.blankTemplateWithValidSettings}}}},[t.postType===t.breakdanceHeaderPostType?e("span",[t._v("Add Header")]):t._e(),t.postType===t.breakdanceFooterPostType?e("span",[t._v("Add Footer")]):t._e(),"breakdance_popup"===t.postType?e("span",[t._v("Add Popup")]):t._e()]):t._e(),t.postType===t.breakdanceTemplatePostType?e("AddTemplateDropdown",{attrs:{templateName:t.templateName,isWooCommerceActive:t.isWooCommerceActive,templates:t.templatesByStatus},on:{input:t.saveTemplate,blankModal:function(e){return t.handleTemplateCardModal("add",t.blankTemplateWithValidSettings)},modalWithSettings:function(e){return t.handleTemplateCardModal("add",e)}}}):t._e()]],2),this.templatesByStatus.length>0||this.filteredTemplatesBySearch.length>0||t.trashLength>0||t.showTrash?e("div",{staticClass:"manage-templates__actions"},[t.showTrash?t._e():e("div",{staticClass:"manage-templates__search"},[e("SearchInput",{attrs:{placeholder:t.searchInputPlaceholder},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e("div",{staticClass:"manage-templates__secondary-actions"},[t.showTrash&&this.templatesByStatus.length?e(u.Z,{staticClass:"mr-4",attrs:{text:"",loading:t.emptyingTrash},on:{click:t.emptyTrash}},[e("Icon",{staticClass:"mr-2",attrs:{icon:"TrashIcon",size:"16"}}),t._v(" Empty Trash ")],1):t._e(),t.trashLength||t.showTrash?e(u.Z,{attrs:{text:""},on:{click:function(e){t.showTrash=!t.showTrash}}},[t.showTrash?[e("Icon",{staticClass:"mr-2",attrs:{icon:"ArrowLeftLongIcon",size:"16"}}),t._v(" Back ")]:[e("Icon",{staticClass:"mr-2",attrs:{icon:"TrashIcon",size:"16"}}),t._v(" Trash ("+t._s(t.trashLength)+") ")]],2):t._e()],1)]):t._e()]),e("EmptyState",{attrs:{value:t.emptyStateData}}),t.filteredTemplatesBySearch.length>0?e(m.Z,{staticClass:"manage-templates__table breakdance-table",class:t.newTemplateAdded?"added":""},[e("thead",[e("tr",[e("th",{attrs:{width:"35%"}},[t._v("Template")]),e("th",{attrs:{width:"25%"}},[t._v("Applies to")]),e("th",{attrs:{width:"15%"}},[t._v("Conditions")]),"breakdance_popup"===t.postType?e("th",{attrs:{width:"15%"}},[t._v("Triggers")]):t._e(),"breakdance_popup"!==t.postType?e("th",{attrs:{width:"15%"}},[t._v("Priority")]):t._e(),e("th",{attrs:{width:"10%"}},[t._v("Active")])])]),e("transition-group",{attrs:{tag:"tbody",name:"fade",mode:"in-out"}},t._l(t.filteredTemplatesBySearch,(function(a){return e("TemplateRow",{key:a.id,class:t.newTemplateAdded?"":"animation-disabled",attrs:{value:t.getTemplateWithValidSettings(a),templateTypeCategories:t.templatesManagementData.templateTypeCategories,templateParents:t.templateParentsWithoutTrashed},on:{input:t.handleTemplateCardModal,update:t.updateTemplate,duplicate:t.duplicateTemplate,trash:t.trashTemplate,delete:t.deleteTemplate,restore:t.restoreTemplate}})})),1)],1):t._e(),t.modalData?e("EditTemplateModal",{attrs:{value:t.modalData.data,templatesManagementData:t.templatesManagementData,postType:t.postType,templateParents:t.templateParentsWithoutTrashed,templates:t.templatesByStatus,mode:t.modalData.type,skipWarning:t.skipWarning,hasPermissionToManageFallbacks:t.hasPermissionToManageFallbacks},on:{input:function(e){return t.saveTemplate(e)},close:function(e){t.modalData=!1},skipWarning:function(e){t.skipWarning=e}}}):t._e()],1)},g=[],_=a(30902),v=a(48262),b=a(45974),y=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("tr",[e("td",[e("div",{staticClass:"manage-templates__title-row"},["trash"===t.mode?e("span",{staticClass:"manage-templates__title-link"},[t._v(" "+t._s(t.value.title)+" "),e("span",{staticClass:"manage-templates__title-id"},[t._v("#"+t._s(t.value.id))])]):e("a",{staticClass:"manage-templates__title-link",attrs:{target:"_top",href:t.value.editInBreakdanceLink}},[t._v(" "+t._s(t.value.title)+" "),e("span",{staticClass:"manage-templates__title-id"},[t._v("#"+t._s(t.value.id))])])]),e("div",{staticClass:"manage-templates__row-actions"},["publish"===t.mode?e("a",{staticClass:"manage-templates__btn-action",attrs:{href:t.value.editInBreakdanceLink,target:"_top",title:`Edit in ${t.$bdox("plugin_name")}`}},[t._v(" Edit in "+t._s(t.$bdox("plugin_name"))+" ")]):t._e(),"publish"===t.mode?e("button",{staticClass:"manage-templates__btn-action",attrs:{title:"Settings"},on:{click:t.openEditTemplateModal}},[t._v(" Settings ")]):t._e(),"trash"===t.mode?e("button",{staticClass:"manage-templates__btn-action",attrs:{title:"Restore"},on:{click:t.restoreTemplate}},[t._v(" Restore ")]):t._e(),"publish"===t.mode?e("button",{staticClass:"manage-templates__btn-action",attrs:{title:"Duplicate"},on:{click:t.duplicateTemplate}},[t._v(" Duplicate ")]):t._e(),e("button",{staticClass:"manage-templates__btn-action is-danger",attrs:{title:"publish"===t.mode?"Trash":"Delete permanently"},on:{click:t.deleteTemplate}},[t._v(" "+t._s("publish"===t.mode?"Trash":"Delete permanently")+" ")])])]),e("td",{staticClass:"manage-template__applies-to"},[t.matchingQuickAddTemplate?[e("span",{staticClass:"d-block"},[t._v(t._s(t.matchingQuickAddTemplate.name))]),e("ElementBadge",{staticClass:"template-row-element-badge",attrs:{value:{backgroundColor:t.matchingQuickAddTemplate.backgroundColor,textColor:t.matchingQuickAddTemplate.textColor,label:t.matchingQuickAddTemplate.category}}})]:t.appliesToLabel?[t._v(t._s(t.appliesToLabel))]:t._e()],2),e("td",[t.value.settings.ruleGroups&&t.value.settings.ruleGroups.length?[e("ConditionsPreviewTooltip",{attrs:{value:t.value.settings.ruleGroups}})]:t._e()],2),"breakdance_popup"===t.value.postType?e("td",{staticClass:"manage-template__td_text"},[t._v(" "+t._s(t.triggerLabels(t.value.settings.triggers))+" ")]):t._e(),"breakdance_popup"!==t.value.postType?e("td",{staticClass:"manage-template__td_text"},[void 0!==t.value.settings.priority?[t._v(" "+t._s(t.value.settings.priority)+" ")]:t._e()],2):t._e(),e("td",{staticClass:"manage-template__td_text"},[[e("ToggleInput",{attrs:{value:!t.value.settings.disabled},on:{input:t.updateDisabled}})]],2)])},k=[],f=a(43432),T=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[[e(f.Z,{staticClass:"condition-preview-tooltip-element",attrs:{bottom:"",transition:"0"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({},"span",s,!1),a),[e("Icon",{attrs:{icon:"CodeBranchIcon",size:"18"}})],1)]}}])},[e("span",[e("div",{staticClass:"condition-preview-tooltip-contanier"},[t._l(t.value,(function(a,s){return[e("div",{staticClass:"condition-preview-tooltip"},[s>0?e("span",{staticClass:"condition-preview-or-separator"},[e("span",[t._v("OR")])]):t._e(),t._l(a,(function(t,a){return e("ConditionPreviewRule",{key:a,attrs:{rule:t,index:a}})}))],2)]}))],2)])])]],2)},w=[],C=a(23128),B=a(27844),Z=a(85283);let P=class extends s.ZP{edit(t){this.$emit("input",(0,C.Z)(t))}};(0,c.gn)([(0,d.fI)()],P.prototype,"value",void 0),P=(0,c.gn)([(0,d.wA)({components:{ConditionPreviewRule:B.Z,Icon:Z.Z}})],P);const S=P,x=S;var I=a(1001),D=(0,I.Z)(x,T,w,!1,null,null,null);const A=D.exports;var M=a(67132),$=a(46368);const L=[{name:"Single Product",category:"Woo",textColor:"var(--brandWooCommerce)",backgroundColor:"var(--brandWooCommerceBackground)",settings:{type:"product",ruleGroups:[],priority:20}},{name:"Shop Page & All Product Archives",category:"Woo",textColor:"var(--brandWooCommerce)",backgroundColor:"var(--brandWooCommerceBackground)",settings:{type:"all-product-archives",ruleGroups:[],priority:10}},{name:"Specific Product Archive",category:"Woo",textColor:"var(--brandWooCommerce)",backgroundColor:"var(--brandWooCommerceBackground)",settings:{type:"specific-product-archive",ruleGroups:[[{ruleSlug:"product-is-taxonomy",operand:"is",value:[]}]],priority:20},openDialog:!0},{name:"Single Post",category:"Blog",textColor:"var(--brandWordPress)",backgroundColor:"var(--brandWordPressBackground)",settings:{type:"post",ruleGroups:[],priority:20}},{name:"Post Archive",category:"Blog",textColor:"var(--brandWordPress)",backgroundColor:"var(--brandWordPressBackground)",settings:{type:"post-archives",ruleGroups:[],priority:10}},{name:"404 Not Found",category:"Other",textColor:$.Z.green800_light,backgroundColor:$.Z.green100_light,settings:{type:"404",ruleGroups:[]}},{name:"Search Results",textColor:$.Z.green800_light,backgroundColor:$.Z.green100_light,category:"Other",settings:{type:"search",ruleGroups:[]}}];var W=a(27517),G=a(72252);let N=class extends s.ZP{constructor(){super(...arguments),this.deleteInProgress=!1,this.restoreInProgress=!1}openEditTemplateModal(){"trash"!==this.mode&&this.$emit("input","edit",this.value)}get mode(){return this.value.status}get appliesToLabel(){const t=this.value.settings.type;let e="";return this.templateTypeCategories.some((a=>{const s=a.types.find((e=>e.slug===t));return!!s&&(e=s.label,!0)})),e}async deleteTemplate(){this.deleteInProgress=!0;const t=await(0,M.jZ)(this.value.title,this.value.id,this.value.status);t&&this.$emit("publish"===this.value.status?"trash":"delete",t),this.deleteInProgress=!1}async restoreTemplate(){this.restoreInProgress=!0;const t=await(0,M.ZU)(this.value.title,this.value.id);t&&this.$emit("restore",t),this.restoreInProgress=!1}duplicateTemplate(){const t=(0,C.Z)(this.value);t.title=`Copy of "${t.title}"`,t.settings.disabled=!0,this.$emit("duplicate",t)}get matchingQuickAddTemplate(){if("oxygen"!==window.Breakdance.builderMode)return L.find((t=>t.settings.type===this.value.settings.type))}triggerLabels(t){return t.map((t=>t.slug)).join(", ")}updateDisabled(t){const e=(0,C.Z)(this.value);e.settings.disabled=!t,this.$emit("update",e)}};(0,c.gn)([(0,d.fI)()],N.prototype,"value",void 0),(0,c.gn)([(0,d.fI)()],N.prototype,"templateTypeCategories",void 0),(0,c.gn)([(0,d.fI)()],N.prototype,"templateParents",void 0),N=(0,c.gn)([(0,d.wA)({components:{ToggleInput:G.Z,Icon:Z.Z,ConditionsPreviewTooltip:A,ElementBadge:W.Z}})],N);const F=N,E=F;var O=(0,I.Z)(E,y,k,!1,null,null,null);const U=O.exports;var V=a(73385),j=a(70248),R=a(61908),q=a(11193),z=function(){var t=this,e=t._self._c;t._self._setupProxy;return"breakdance"===t.builderMode?e("div",[e("Dropdown",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(u.Z,t._g({staticClass:"breakdance-wp-admin-templating-button",attrs:{elevation:"0",outlined:"",loading:t.quickAddInProgress}},a),[t._v(" Add Template ")])]}}],null,!1,1908114680),model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},[e(V.Z,[e(j.Z,{attrs:{dense:"",width:"350"}},[t._l(t.quickAddTemplates,(function(a){return e(R.Z,{key:a.name,on:{click:function(e){return t.quickAdd(a)}}},[e(q.V9,{staticClass:"quick-add-item"},[t._v(" "+t._s(a.name)+" "),e("ElementBadge",{attrs:{value:{backgroundColor:a.backgroundColor,textColor:a.textColor,label:a.category}}})],1)],1)})),e(R.Z,{staticClass:"add-custom-template-wrapper"},[e(q.V9,{staticClass:"add-custom-template-wrapper-title"},[e(u.Z,{staticClass:"breakdance-wp-admin-templating-button",attrs:{outlined:""},on:{click:function(e){return t.$emit("blankModal")}}},[t._v("Add Custom Template")])],1)],1)],2)],1)],1)],1):e("div",[e(u.Z,{staticClass:"breakdance-wp-admin-templating-button",attrs:{elevation:"0",outlined:""},on:{click:function(e){return t.$emit("blankModal")}}},[t._v(" Add Template ")])],1)},H=[],X=a(15133),K=a(39664),Q=a(47187),Y=a(20918);let J=class extends s.ZP{constructor(){super(...arguments),this.open=!1,this.quickAddInProgress=!1}get quickAddTemplates(){return this.isWooCommerceActive?L:L.filter((t=>"woocommerce"!==t.category.toLowerCase()))}async quickAdd(t){const e={id:-1,title:t.name,editInBreakdanceLink:"",postType:(0,Y.dG)(),settings:t.settings,status:"publish"};(0,Q.aA)(this.templates,t.settings,"template")&&(t.openDialog?this.$emit("modalWithSettings",e):(this.quickAddInProgress=!0,(0,_.pipe)(await(0,M.Qu)(e),(0,b.fold)((()=>{K.Z.log.message(`The new ${this.templateName} couldn't be saved`)}),(t=>{this.$emit("input",t)}))),this.quickAddInProgress=!1))}get builderMode(){return window.Breakdance.builderMode}};(0,c.gn)([(0,d.fI)()],J.prototype,"templateName",void 0),(0,c.gn)([(0,d.fI)()],J.prototype,"isWooCommerceActive",void 0),(0,c.gn)([(0,d.fI)()],J.prototype,"templates",void 0),J=(0,c.gn)([(0,d.wA)({components:{Dropdown:X.Z,ElementBadge:W.Z}})],J);const tt=J,et=tt;var at=(0,I.Z)(et,z,H,!1,null,null,null);const st=at.exports;var ot=a(31044),nt=a(93664),lt=a(11529),it=a(38562),rt=function(){var t=this,e=t._self._c;t._self._setupProxy;return 0===t.value.itemsByStatus||0===t.value.filteredItemsBySearch?e("div",{staticClass:"manage-templates__empty"},["Header"==t.value.templateName?e("svg",{staticClass:"manage-templates__empty-state-icon",attrs:{fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"}},[e("path",{attrs:{d:"M92.708 3.125H7.292a4.167 4.167 0 0 0-4.167 4.167v85.416a4.167 4.167 0 0 0 4.167 4.167h85.416a4.167 4.167 0 0 0 4.167-4.167V7.292a4.167 4.167 0 0 0-4.167-4.167ZM3.125 34.375h93.75",stroke:"currentColor","stroke-width":"6.25","stroke-linecap":"round","stroke-linejoin":"round"}})]):t._e(),"Footer"==t.value.templateName?e("svg",{staticClass:"manage-templates__empty-state-icon",attrs:{fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"}},[e("path",{attrs:{d:"M92.708 3.125H7.292a4.167 4.167 0 0 0-4.167 4.167v85.416a4.167 4.167 0 0 0 4.167 4.167h85.416a4.167 4.167 0 0 0 4.167-4.167V7.292a4.167 4.167 0 0 0-4.167-4.167ZM96.875 65.625H3.125",stroke:"currentColor","stroke-width":"6.25","stroke-linecap":"round","stroke-linejoin":"round"}})]):t._e(),"Template"==t.value.templateName||"Unsupported template"==t.value.templateName||"Global Block"==t.value.templateName?e("svg",{staticClass:"manage-templates__empty-state-icon",attrs:{fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"}},[e("path",{attrs:{d:"M92.708 3.125H7.292a4.167 4.167 0 0 0-4.167 4.167v85.416a4.167 4.167 0 0 0 4.167 4.167h85.416a4.167 4.167 0 0 0 4.167-4.167V7.292a4.167 4.167 0 0 0-4.167-4.167ZM50 3.125v93.75M50 34.375h46.875M96.875 65.625H50M50 50H3.125",stroke:"currentColor","stroke-width":"6.25","stroke-linecap":"round","stroke-linejoin":"round"}})]):0===t.value.itemsByStatus?e("div",[e("h4",[t._v(" You have no "+t._s(t.value.showTrash?"deleted":"published")+" "+t._s(t.value.templateName.toLowerCase())+"s. ")])]):0===t.value.filteredItemsBySearch?e("div",[e("h4",[t._v("No "+t._s(t.value.templateName.toLowerCase())+"s found.")])]):t._e()]):t._e()},ct=[],dt=a(82436);let pt=class extends s.ZP{get isBreakdanceDevelopmentEnvironment(){return(0,dt.y)()}};(0,c.gn)([(0,d.fI)()],pt.prototype,"value",void 0),pt=(0,c.gn)([(0,d.wA)({})],pt);const ut=pt,mt=ut;var ht=(0,I.Z)(mt,rt,ct,!1,null,null,null);const gt=ht.exports;var _t=a(16734),vt=a(90878);let bt=class extends s.ZP{constructor(){super(...arguments),this.modalData=!1,this.skipWarning=!1,this.templates=[],this.templatesManagementData={conditions:[],dynamicFields:[],templateTypeCategories:[],popupTriggers:null},this.isWooCommerceActive=!1,this.search="",this.showTrash=!1,this.newTemplateAdded=!1,this.hasPermissionToManageFallbacks=!1,this.emptyingTrash=!1,this.isLoadingData=!1,this.broadcastChannel=null}onTemplateAdded(){setTimeout((()=>this.newTemplateAdded=!1),1e3)}get breakdanceHeaderPostType(){return(0,Y.d0)()}get breakdanceFooterPostType(){return(0,Y.Yq)()}get breakdanceTemplatePostType(){return(0,Y.dG)()}get templatesForUi(){return this.hasPermissionToManageFallbacks?this.templatesByStatus:this.templatesByStatus.filter((t=>!t.settings?.fallback))}get filteredTemplatesBySearch(){return this.search?this.templatesForUi.filter((t=>t.title.toLowerCase().includes(this.search.toLowerCase())||t.settings?.type?.includes(this.search.toLowerCase()))):this.templatesForUi}get templatesByStatus(){return this.templates.filter((t=>this.showTrash?"trash"===t.status:"publish"===t.status))}get blankTemplateWithValidSettings(){return{id:-1,title:"",postType:this.postType,editInBreakdanceLink:"",settings:{},status:"publish"}}get trashLength(){return this.templates.filter((t=>"trash"===t.status)).length}async duplicateTemplate(t){(0,_.pipe)(await(0,M.UB)(t),(0,b.fold)((()=>{K.Z.log.message(`Duplicating template "${t.id}" failed`)}),(t=>{this.saveTemplate(t)})))}async updateTemplate(t){(0,_.pipe)(await(0,M.Qu)(t),(0,b.fold)((()=>{K.Z.log.message(`Update for template "${t.id}" failed`)}),(t=>{this.templates=(0,Q.u7)(t,this.templates)})))}saveTemplate(t){this.templates=(0,Q.u7)(t,this.templates),this.newTemplateAdded=!0}deleteTemplate(t){this.templates=(0,Q.Xc)(t,this.templates)}trashTemplate(t){this.templates=(0,Q.Uu)(t,this.templates,"trash")}restoreTemplate(t){this.templates=(0,Q.Uu)(t,this.templates,"publish")}async emptyTrash(){this.emptyingTrash=!0,await(0,M.Dq)(this.postType)&&(this.templates=(0,Q.zU)(this.templates),this.showTrash=!1),this.emptyingTrash=!1}get templateParentsWithoutTrashed(){return this.templates.filter((t=>"trash"!==t.status)).map((t=>({text:t.title,value:t.id})))}get templateName(){return this.postType===(0,Y.dG)()?"Template":this.postType===(0,Y.Yq)()?"Footer":this.postType===(0,Y.d0)()?"Header":"breakdance_popup"===this.postType?"Popup":"Unsupported template"}get emptyStateData(){return{itemsByStatus:this.templatesByStatus.length,filteredItemsBySearch:this.filteredTemplatesBySearch.length,templateName:this.templateName,showTrash:this.showTrash}}get searchInputPlaceholder(){const t=this.templateName.toLowerCase();return`Search for ${t}s`}beforeMount(){this.broadcastChannel=(0,vt.a)()}async mounted(){_t.uq.register("b r e a k d a n c e",(()=>{this.hasPermissionToManageFallbacks=!this.hasPermissionToManageFallbacks})),this.isLoadingData=!0,(0,_.pipe)(await(0,M.rf)(this.postType),(0,b.fold)((()=>{K.Z.log.message("Couldn't load templates data")}),(t=>{this.templates=t.templates,this.templatesManagementData=t.templatesManagementData,this.isWooCommerceActive=t.isWooCommerceActive,ot.PK.setDynamicFields(t.templatesManagementData.dynamicFields),ot.PK.setConditions(t.templatesManagementData.conditions),ot.PK.setEnvironment(t.environment)}))),this.isLoadingData=!1}beforeDestroy(){_t.uq.unbind("b r e a k d a n c e"),this.broadcastChannel&&this.broadcastChannel.close()}getTemplateWithValidSettings(t){return{...t,settings:(0,_.pipe)(t.settings,v.V4.decode,(0,b.fold)((()=>kt),(t=>t)))}}handleTemplateCardModal(t,e){this.modalData={type:t,data:e}}};(0,c.gn)([(0,d.fI)()],bt.prototype,"postType",void 0),(0,c.gn)([(0,d.RL)("newTemplateAdded")],bt.prototype,"onTemplateAdded",null),bt=(0,c.gn)([(0,d.wA)({components:{Icon:Z.Z,SearchInput:it.Z,Loading:lt.Z,Notifications:p.Z,EditTemplateModal:nt.Z,AddTemplateDropdown:st,TemplateRow:U,EmptyState:gt}})],bt);const yt=bt,kt={type:"none",ruleGroups:[]},ft=yt;var Tt=(0,I.Z)(ft,h,g,!1,null,null,null);const wt=Tt.exports;var Ct=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[t.isLoadingData?e("Loading"):t._e(),e("div",{staticClass:"manage-templates"},[e("div",{staticClass:"manage-templates__header"},[e("h1",{staticClass:"manage-templates__title"},[t._v(" "+t._s(t.showTrash?`Deleted ${t.$bdox("global_blocks")}`:t.$bdox("global_blocks"))+" ")]),t.showTrash?t._e():[e(u.Z,{staticClass:"breakdance-wp-admin-templating-button",attrs:{elevation:"0",outlined:""},on:{click:function(e){t.modalData={type:"add",data:t.blankGlobalBlock}}}},[t._v(" Add "+t._s(t.$bdox("global_block"))+" ")])]],2),this.globalBlocksByStatus.length>0||this.filteredBlocksBySearch.length>0||t.trashLength>0||t.showTrash?e("div",{staticClass:"manage-templates__actions"},[e("div",{staticClass:"manage-templates__search"},[e("SearchInput",{attrs:{placeholder:"Search blocks"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t.trashLength||t.showTrash?e("div",{staticClass:"manage-templates__secondary-actions"},[t.showTrash&&this.globalBlocksByStatus.length?e(u.Z,{attrs:{text:"",loading:t.emptyingTrash},on:{click:t.emptyTrash}},[e("Icon",{staticClass:"mr-2",attrs:{icon:"TrashIcon",size:"16"}}),t._v(" Empty Trash ")],1):t._e(),t.trashLength||t.showTrash?e(u.Z,{staticClass:"mr-2",attrs:{text:""},on:{click:function(e){t.showTrash=!t.showTrash}}},[t.showTrash?[e("Icon",{staticClass:"mr-2",attrs:{icon:"ArrowLeftLongIcon",size:"16"}}),t._v(" Back ")]:[e("Icon",{staticClass:"mr-2",attrs:{icon:"TrashIcon",size:"16"}}),t._v(" Trash ("+t._s(t.trashLength)+") ")]],2):t._e()],1):t._e()]):t._e()]),e("EmptyState",{attrs:{value:t.emptyStateData}}),t.filteredBlocksBySearch.length>0?e(m.Z,{staticClass:"manage-templates__table breakdance-table",class:t.newBlockAdded?"added":""},[e("thead",[e("tr",[e("th",[t._v("Template")]),e("th",[t._v("Shortcode")])])]),e("transition-group",{attrs:{tag:"tbody",name:"fade",mode:"out-in"}},t._l(t.filteredBlocksBySearch,(function(a){return e("BlockRow",{key:a.id,class:t.newBlockAdded?"":"animation-disabled",attrs:{value:a},on:{input:function(e){t.modalData={type:"edit",data:e}},trash:t.trashBlock,delete:t.deleteBlock,restore:t.restoreBlock,save:t.saveBlockToWordPress}})})),1)],1):t._e(),t.modalData?e("EditGlobalBlockModal",{attrs:{value:t.modalData.data,mode:t.modalData.type,globalBlocks:t.globalBlocksByStatus},on:{input:function(e){return t.saveBlock(e)},close:function(e){t.modalData=!1}}}):t._e()],1)},Bt=[],Zt=a(60744),Pt=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("tr",[e("td",[e("a",{staticClass:"manage-templates__title-link",attrs:{target:"_top",href:t.value.editInBreakdanceLink}},[t._v(" "+t._s(t.value.label)+" "),e("span",{staticClass:"manage-templates__title-id"},[t._v("#"+t._s(t.value.id))])]),e("div",{staticClass:"manage-templates__row-actions"},["publish"===t.mode?e("a",{staticClass:"manage-templates__btn-action",attrs:{href:t.value.editInBreakdanceLink,target:"_top",title:`Edit in ${t.$bdox("plugin_name")}`}},[t._v(" Edit in "+t._s(t.$bdox("plugin_name"))+" ")]):t._e(),"publish"===t.mode?e("button",{staticClass:"manage-templates__btn-action",on:{click:t.openEditBlockModal}},[t._v(" Settings ")]):t._e(),"publish"===t.mode?e("button",{staticClass:"manage-templates__btn-action",on:{click:t.duplicateBlock}},[t._v(" Duplicate ")]):t._e(),"trash"===t.mode?e("button",{staticClass:"manage-templates__btn-action",attrs:{title:"Restore"},on:{click:t.restoreBlock}},[t._v(" Restore ")]):t._e(),e("button",{staticClass:"manage-templates__btn-action is-danger",attrs:{title:"publish"===t.mode?"Trash":"Delete permanently"},on:{click:t.deleteBlock}},[t._v(" "+t._s("publish"===t.mode?"Trash":"Delete permanently")+" ")])])]),e("td",["breakdance"===t.builderMode?[e("input",{staticClass:"block-shortcode",attrs:{type:"text"},domProps:{value:`[breakdance_block blockId=${t.value.id}]`},on:{click:t.highlightValue}})]:t._e(),"oxygen"===t.builderMode?[e("input",{staticClass:"block-shortcode",attrs:{type:"text"},domProps:{value:`[oxygen_component blockId=${t.value.id}]`},on:{click:t.highlightValue}})]:t._e()],2)])},St=[];let xt=class extends s.ZP{constructor(){super(...arguments),this.deleteInProgress=!1,this.restoreInProgress=!1}openEditBlockModal(){this.$emit("input",this.value)}duplicateBlock(){const t=(0,C.Z)(this.value);t.id=-1,t.label=`Copy of "${t.label}"`,this.$emit("save",t)}get builderMode(){return window.Breakdance.builderMode}async deleteBlock(){this.deleteInProgress=!0;const t=await(0,M.jZ)(this.value.label,this.value.id,this.value.status);t&&this.$emit("publish"===this.value.status?"trash":"delete",t),this.deleteInProgress=!1}async restoreBlock(){this.restoreInProgress=!0;const t=await(0,M.ZU)(this.value.label,this.value.id);t&&this.$emit("restore",t),this.restoreInProgress=!1}get mode(){return this.value.status}highlightValue(t){const e=()=>t.target.select();setTimeout((()=>{e()}),100)}};(0,c.gn)([(0,d.fI)()],xt.prototype,"value",void 0),xt=(0,c.gn)([(0,d.wA)({components:{Icon:Z.Z}})],xt);const It=xt,Dt=It;var At=(0,I.Z)(Dt,Pt,St,!1,null,null,null);const Mt=At.exports;var $t=a(87615);let Lt=class extends s.ZP{constructor(){super(...arguments),this.modalData=!1,this.globalBlocks=[],this.showTrash=!1,this.newBlockAdded=!1,this.emptyingTrash=!1,this.isLoadingData=!1,this.search="",this.broadcastChannel=null}onBlockAdded(){setTimeout((()=>this.newBlockAdded=!1),1e3)}get blankGlobalBlock(){return{label:"",id:-1,tree:!1,editInBreakdanceLink:"",status:"publish"}}async saveBlockToWordPress(t){(0,_.pipe)(await(0,$t.v_)(t),(0,b.fold)((()=>{K.Z.log.message(`${this.$bdox("global_block")} was not saved`)}),(t=>{this.saveBlock(t)})))}saveBlock(t){this.globalBlocks=(0,Q.u7)(t,this.globalBlocks),this.newBlockAdded=!0,this.search=""}deleteBlock(t){this.globalBlocks=(0,Q.Xc)(t,this.globalBlocks)}trashBlock(t){this.globalBlocks=(0,Q.Uu)(t,this.globalBlocks,"trash")}restoreBlock(t){this.globalBlocks=(0,Q.Uu)(t,this.globalBlocks,"publish")}async emptyTrash(){this.emptyingTrash=!0,await(0,M.Dq)((0,Y.$M)())&&(this.globalBlocks=(0,Q.zU)(this.globalBlocks),this.showTrash=!1),this.emptyingTrash=!1}get emptyStateData(){return{itemsByStatus:this.globalBlocksByStatus.length,filteredItemsBySearch:this.filteredBlocksBySearch.length,templateName:this.$bdox("global_block"),showTrash:this.showTrash}}get filteredBlocksBySearch(){return this.globalBlocksByStatus.filter((t=>t.label.toLowerCase().includes(this.search.toLowerCase())))}get globalBlocksByStatus(){return this.globalBlocks.filter((t=>this.showTrash?"trash"===t.status:"publish"===t.status))}get trashLength(){return this.globalBlocks.filter((t=>"trash"===t.status)).length}beforeMount(){this.broadcastChannel=(0,vt.a)()}async mounted(){this.isLoadingData=!0,(0,_.pipe)(await(0,M.kt)(),(0,b.fold)((()=>{K.Z.log.message("Couldn't load blocks data")}),(t=>{this.globalBlocks=t}))),this.isLoadingData=!1}beforeDestroy(){this.broadcastChannel&&this.broadcastChannel.close()}};(0,c.gn)([(0,d.RL)("newBlockAdded")],Lt.prototype,"onBlockAdded",null),Lt=(0,c.gn)([(0,d.wA)({components:{Icon:Z.Z,SearchInput:it.Z,Loading:lt.Z,BlockRow:Mt,EditGlobalBlockModal:Zt.Z,EmptyState:gt}})],Lt);const Wt=Lt,Gt=Wt;var Nt=(0,I.Z)(Gt,Ct,Bt,!1,null,null,null);const Ft=Nt.exports;let Et=class extends s.ZP{constructor(){super(...arguments),this.addingTemplate=!1}mounted(){(0,_t.B6)(document),ot.PK.setSubscriptionMode(window.Breakdance.subscriptionMode)}get isBlockPostType(){return this.postType===(0,Y.$M)()||"breakdance_acf_block"===this.postType}};(0,c.gn)([(0,d.fI)()],Et.prototype,"postType",void 0),Et=(0,c.gn)([(0,d.wA)({components:{ManageGlobalBlocks:Ft,ManageTemplates:wt,Notifications:p.Z}})],Et);const Ot=Et,Ut=Ot;var Vt=(0,I.Z)(Ut,i,r,!1,null,null,null);const jt=Vt.exports;var Rt=a(74604),qt=a(18082);s.ZP.directive("permission",Rt.Z),s.ZP.config.productionTip=!1;const zt=new URLSearchParams(window.parent.location.search).get("page");s.ZP.use(qt.k,{getTranslations:qt.F}),new s.ZP({store:o["default"],vuetify:n.Z,render:t=>t(jt,{props:{postType:zt}})}).$mount("#manage-templates-wrapper")},67132:(t,e,a)=>{a.d(e,{Dq:()=>v,Qu:()=>p,UB:()=>u,ZU:()=>_,jZ:()=>g,kt:()=>h,rf:()=>m});var s=a(98851),o=a(48262),n=a(32521),l=a(9665),i=a(30902),r=a(45974),c=a(39664),d=a(65669);async function p(t){return await(0,s.D)({action:"breakdance_manage_templates_save",dataToPost:{id:t.id,title:t.title,postType:t.postType,settings:(0,d.J)(t.settings)},decoder:o.t0,resultKey:"data",friendlyName:"Save template"})}async function u(t){return await(0,s.D)({action:"breakdance_manage_templates_duplicate",dataToPost:{originalId:t.id,title:t.title,postType:t.postType,settings:(0,d.J)(t.settings)},decoder:o.t0,resultKey:"data",friendlyName:"Duplicate template"})}async function m(t){return await(0,s.D)({action:"breakdance_manage_templates_load_data",dataToPost:{post_type:t},decoder:o.YL,resultKey:"data",friendlyName:"Get templates data"})}async function h(){return await(0,s.D)({action:"breakdance_manage_global_blocks",decoder:l.GF,resultKey:"data",friendlyName:"Get global blocks data"})}async function g(t,e,a){if(confirm(`${"publish"===a?"Moving to trash":"Permanently deleting"} "${t}". Are you sure?`))return(0,i.pipe)(await(0,s.D)({action:"breakdance_manage_templates_delete",dataToPost:{id:e,trashOrDelete:"trash"===a?"delete":"trash"},decoder:n.i0("success"),resultKey:"data",friendlyName:`Deleting "${t}"`}),(0,r.fold)((()=>{c.Z.log.message(`Failed to delete "${t}"`)}),(()=>e)))}async function _(t,e){if(confirm(`Restoring "${t}". Are you sure?`))return(0,i.pipe)(await(0,s.D)({action:"breakdance_manage_templates_restore",dataToPost:{id:e},decoder:n.i0("success"),resultKey:"data",friendlyName:`Restoring ${t}`}),(0,r.fold)((()=>{c.Z.log.message(`Failed to restore "${t}"`)}),(()=>e)))}async function v(t){return!!confirm("Delete all trash permanently?")&&(0,i.pipe)(await(0,s.D)({action:"breakdance_manage_templates_empty_trash",dataToPost:{postType:t},decoder:n.i0("success"),resultKey:"data",friendlyName:`Emptying trash for ${t}`}),(0,r.fold)((()=>!1),(()=>!0)))}},47187:(t,e,a)=>{a.d(e,{Uu:()=>r,Xc:()=>i,aA:()=>d,u7:()=>l,zU:()=>c});var s=a(23128),o=a(18446),n=a.n(o);function l(t,e){const a=e.findIndex((e=>e.id===t.id)),o=(0,s.Z)(e);return-1!==a?o[a]=(0,s.Z)(t):o.unshift((0,s.Z)(t)),o}function i(t,e){const a=e.findIndex((e=>"id"in e&&e.id===t)),o=(0,s.Z)(e);return-1!==a&&o.splice(a,1),o}function r(t,e,a){const o=e.findIndex((e=>"id"in e&&e.id===t)),n=(0,s.Z)(e);return-1!==o&&(n[o].status=a),n}function c(t){return(0,s.Z)(t).filter((t=>"trash"!==t.status))}function d(t,e,a){const s=t.find((t=>n()(t.settings,e)));return!s||confirm(`You already have a ${a} with the same settings called "${s.title}". Continue anyway?`)}},48262:(t,e,a)=>{a.d(e,{V4:()=>d,YL:()=>v,t0:()=>h});var s=a(99697),o=a(47902),n=a(32521),l=a(73336),i=a(20918);const r=n.jV([n.dt({slug:n.Z_,label:n.Z_}),n.r$({defaultPriority:n.pk})]),c=(n.IX(n.dt({text:n.Z_,value:n.pk})),n.IX(n.dt({label:n.Z_,types:n.IX(r)}))),d=n.r$({parentId:n.pk,type:n.Z_,ruleGroups:n.IX(s.ZQ),triggers:s.Gc,priority:n.pk,disabled:n.O7,fallback:n.O7,onlyShowOnce:n.O7,avoidMultiple:n.O7,limitPageLoad:n.G0([n.pk,n.lB]),limitSession:n.G0([n.pk,n.lB]),limitForever:n.G0([n.pk,n.lB])}),p=n.G0([n.i0(i.AZ),n.i0(i.lM),n.i0(i.kl),n.i0(i.Nn),n.i0(i.WZ),n.i0(i.$v),n.i0(i.hF),n.i0(i.Zr),n.i0("breakdance_popup"),n.i0("breakdance_acf_block")]),u=n.dt({id:n.pk,title:n.Z_,editInBreakdanceLink:n.Z_,postType:p,status:n.G0([n.i0("publish"),n.i0("trash"),n.S1])}),m=n.jV([u,n.dt({settings:n.G0([d,n.lB])})]),h=n.jV([u,n.dt({settings:d})]),g=n.dt({text:n.Z_,value:n.Z_,proOnly:n.G0([n.S1,n.O7])}),_=n.dt({conditions:n.IX(s.dV),dynamicFields:n.IX(o.pG),templateTypeCategories:c,popupTriggers:n.G0([n.lB,n.IX(g)])}),v=n.dt({templates:n.IX(m),templatesManagementData:_,isWooCommerceActive:n.O7,environment:l.Pt})}},e={};function a(s){var o=e[s];if(void 0!==o)return o.exports;var n=e[s]={id:s,loaded:!1,exports:{}};return t[s].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=t,(()=>{var t=[];a.O=(e,s,o,n)=>{if(!s){var l=1/0;for(d=0;d<t.length;d++){for(var[s,o,n]=t[d],i=!0,r=0;r<s.length;r++)(!1&n||l>=n)&&Object.keys(a.O).every((t=>a.O[t](s[r])))?s.splice(r--,1):(i=!1,n<l&&(l=n));if(i){t.splice(d--,1);var c=o();void 0!==c&&(e=c)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[s,o,n]}})(),(()=>{a.n=t=>{var e=t&&t.__esModule?()=>t["default"]:()=>t;return a.d(e,{a:e}),e}})(),(()=>{a.d=(t,e)=>{for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})(),(()=>{a.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}})(),(()=>{a.nmd=t=>(t.paths=[],t.children||(t.children=[]),t)})(),(()=>{a.j=93})(),(()=>{var t={93:0};a.O.j=e=>0===t[e];var e=(e,s)=>{var o,n,[l,i,r]=s,c=0;if(l.some((e=>0!==t[e]))){for(o in i)a.o(i,o)&&(a.m[o]=i[o]);if(r)var d=r(a)}for(e&&e(s);c<l.length;c++)n=l[c],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(d)},s=globalThis["webpackChunkbuilder"]=globalThis["webpackChunkbuilder"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();var s=a.O(void 0,[998,64],(()=>a(43530)));s=a.O(s)})();
//# sourceMappingURL=manage-templates.2262af42.js.map