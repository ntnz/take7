const c={base64:new TextEncoder().encode("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),base64url:new TextEncoder().encode("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_")},f={base64:new Uint8Array(128).fill(64),base64url:new Uint8Array(128).fill(64)};c.base64.forEach((r,n)=>f.base64[r]=n),c.base64url.forEach((r,n)=>f.base64url[r]=n);function h(r){return((r+2)/3|0)*4}function b(r,n,a,e,i){for(n+=2;n<r.length;n+=3){let t=r[n-2]<<16|r[n-1]<<8|r[n];r[a++]=e[t>>18],r[a++]=e[t>>12&63],r[a++]=e[t>>6&63],r[a++]=e[t&63]}switch(n){case r.length+1:{let t=r[n-2]<<16;r[a++]=e[t>>18],r[a++]=e[t>>12&63],r[a++]=i,r[a++]=i;break}case r.length:{let t=r[n-2]<<16|r[n-1]<<8;r[a++]=e[t>>18],r[a++]=e[t>>12&63],r[a++]=e[t>>6&63],r[a++]=i;break}}return a}function g(r,n,a,e,i){for(let t=r.length-2;t<r.length;++t)if(r[t]===i){for(let l=t+1;l<r.length;++l)if(r[l]!==i)throw TypeError(`Cannot decode input as base64: Invalid character (${String.fromCharCode(r[l])})`);r=r.subarray(0,t);break}if((r.length-a)%4==1)throw RangeError(`Cannot decode input as base64: Length (${r.length-a}), excluding padding, must not have a remainder of 1 when divided by 4`);for(n+=3;n<r.length;n+=4){let t=o(r[n-3],e)<<18|o(r[n-2],e)<<12|o(r[n-1],e)<<6|o(r[n],e);r[a++]=t>>16,r[a++]=t>>8&255,r[a++]=t&255}switch(n){case r.length+1:{let t=o(r[n-3],e)<<18|o(r[n-2],e)<<12;r[a++]=t>>16;break}case r.length:{let t=o(r[n-3],e)<<18|o(r[n-2],e)<<12|o(r[n-1],e)<<6;r[a++]=t>>16,r[a++]=t>>8&255;break}}return a}function o(r,n){let a=n[r]??64;if(a===64)throw TypeError(`Cannot decode input as base64: Invalid character (${String.fromCharCode(r)})`);return a}function w(r,n){let a=r.length;if(r.byteOffset){let e=new Uint8Array(r.buffer);e.set(r),r=e.subarray(0,a)}return r=new Uint8Array(r.buffer.transfer(n)),r.set(r.subarray(0,a),n-a),[r,n-a]}var s=61,d=new TextEncoder().encode("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),u=new Uint8Array(128).fill(64);d.forEach((r,n)=>u[r]=n);function y(r){r=typeof r=="string"?new TextEncoder().encode(r):r instanceof ArrayBuffer?new Uint8Array(r).slice():r.slice();let[n,a]=w(r,h(r.length));return b(n,a,0,d,s),new TextDecoder().decode(n)}function E(r){let n=new TextEncoder().encode(r);return new Uint8Array(n.buffer.transfer(g(n,0,0,u,s)))}export{y as n,E as t};
