import"./dist-CyCkKGye.min.js";import{t as p}from"./preload-helper-hRiy8xQv.min.js";import"./dist-7RENR6RM.min.js";import{t as A}from"./logger-B3j_KY2M.js";import{n as P,t as k}from"./dist-DNqxA4Wq.min.js";import{t as O}from"./constant-Cr6G0kc1.js";(async()=>{var _=null,m=new Map,v=3e5,h=500;function w(t){let e=m.get(t);return e&&Date.now()-e.timestamp<v?e.value:null}function y(t,e){if(m.size>=h){let l=Array.from(m.entries());l.sort((o,a)=>o[1].timestamp-a[1].timestamp);let r=Math.floor(h*.7);for(let o=0;o<l.length-r;o++)m.delete(l[o][0])}m.set(t,{value:e,timestamp:Date.now()})}(async()=>_=await P({themes:[p(()=>import("./dark-plus-DUxK4Phe.min.js").then(async t=>(await t.__tla,t)),[],import.meta.url),p(()=>import("./light-plus-D1Qkc2mD.min.js").then(async t=>(await t.__tla,t)),[],import.meta.url)],langs:[p(()=>import("./css-CZ_P402v.min.js").then(async t=>(await t.__tla,t)),[],import.meta.url)],engine:k(p(()=>import("./wasm-AKcBxSw7.min.js").then(async t=>(await t.__tla,t)),[],import.meta.url))}))();async function E(t){return(await wp.hooks.applyFilters("windpresslivecanvas-autocomplete-items-query",t)).map(e=>({value:e.value,meta:"TW",caption:e.value,score:1e3,docHTML:e.color?`<div style="display: flex; align-items: center; gap: 8px;"><div style="width:16px; height:16px; background:${e.color}; border:1px solid #ccc;"></div><span>${e.color}</span></div>`:void 0}))}ace.require("ace/ext/language_tools").addCompleter({getCompletions:function(t,e,l,r,o){let a=e.getDocument().getLine(l.row).substring(0,l.column);/class=["|'][^"']*$/i.test(a)||/@apply\s+[^;]*$/i.test(a)?E(r).then(i=>{o(null,i)}).catch(i=>{console.error("Error fetching autocomplete suggestions:",i),o(i,[])}):o(null,[])}});var T=ace.require("ace/tooltip").Tooltip,n=new T(document.body);n.setText(""),n.hide();async function L(t){let e=t.getDocumentPosition(),l=lc_html_editor.getSession(),r=l.getTokenAt(e.row,e.column);if(!r||!/attribute-value/.test(r.type)){n.hide();return}let o=l.getLine(e.row),a=o.match(/class\s*=\s*["']([^"']*)["']/);if(!a){n.hide();return}let i=a[1],x=o.indexOf(i),c=e.column-x;if(c<0||c>i.length){n.hide();return}let D=i.split(/\s+/),u=null,d=0;for(let g of D){let b=d,f=d+g.length;if(c>=b&&c<=f){u=g;break}d=f+1}let s=w(u);s===null&&(s=await O.contentWindow.windpress.module.classnameToCss.generate(u),y(u,s)),s===null||s.trim()===""?n.hide():(n.setHtml(_.codeToHtml(s,{lang:"css",theme:"dark-plus"})),n.setPosition(t.domEvent.clientX+10,t.domEvent.clientY+10),n.show())}lc_html_editor.addEventListener("mousemove",L),lc_html_editor.container.addEventListener("mouseleave",function(){n.hide()}),A("Module loaded!",{module:"htmleditor"})})();
