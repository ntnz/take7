var bt=Object.defineProperty;var xt=(a,r,i)=>r in a?bt(a,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[r]=i;var U=(a,r,i)=>xt(a,typeof r!="symbol"?r+"":r,i);import{Bt as wt,Ct as E,Et as Ct,Gt as qt,Lt as kt,O as at,S,X as it,Xt as T,b as X,bn as L,er as v,gt as f,ir as lt,jn as G,mt as Et,nt as St,rr as It,rt as Ot,ut as ot,v as I,vt as N,x as b,xn as W,y as st,yn as Y}from"./runtime-core.esm-bundler-DRZAYnQ2.min.js";import{l as _t}from"./vue.runtime.esm-bundler-BlWQ9Hv9.min.js";import{F as Ft,G as nt,a as ut,b as $t,c as jt,d as dt,l as At,n as Bt,o as zt,u as Rt,v as Nt,y as M}from"./Button-DgwZaK7A.min.js";import{d as Wt,h as Dt,l as Pt}from"./core-8AzxaLAT.min.js";function Gt(a){return"schema"in a&&typeof a.coercer=="function"&&typeof a.validator=="function"&&typeof a.refiner=="function"}function Vt(a){return"~standard"in a}async function Xt(a,r){var l;let i=await r["~standard"].validate(a);return i.issues?{errors:((l=i.issues)==null?void 0:l.map(n=>{var w;return{name:((w=n.path)==null?void 0:w.map(p=>typeof p=="object"?p.key:p).join("."))||"",message:n.message}}))||[],result:null}:{errors:null,result:i.value}}async function Lt(a,r){let[i,l]=r.validate(a);return i?{errors:i.failures().map(n=>({message:n.message,name:n.path.join(".")})),result:null}:{errors:null,result:l}}function Mt(a,r){if(Vt(r))return Xt(a,r);if(Gt(r))return Lt(a,r);throw Error("Form validation failed: Unsupported form schema")}function Ut(a,r){return r?r.split(".").reduce((i,l)=>i==null?void 0:i[l],a):a}function Tt(a,r,i){if(!r)return Object.assign(a,i);if(!a)return a;let l=r.split("."),n=a;for(let p=0;p<l.length-1;p++){let g=l[p];(n[g]===void 0||n[g]===null)&&(p+1<l.length&&!Number.isNaN(Number(l[p+1]))?n[g]=[]:n[g]={}),n=n[g]}let w=l[l.length-1];return n[w]=i,a}var H=class ct extends Error{constructor(i,l){super("Form validation exception");U(this,"formId");U(this,"errors");this.formId=i,this.errors=l,Object.setPrototypeOf(this,ct.prototype)}},Yt={base:""},Ht={__name:"Form",props:{id:{type:[String,Number],required:!1},schema:{type:null,required:!1},state:{type:null,required:!1},validate:{type:Function,required:!1},validateOn:{type:Array,required:!1,default(){return["input","blur","change"]}},disabled:{type:Boolean,required:!1},name:{type:null,required:!1},validateOnInputDelay:{type:Number,required:!1,default:300},transform:{type:null,required:!1,default:()=>!0},nested:{type:null,required:!1},loadingAuto:{type:Boolean,required:!1,default:!0},class:{type:null,required:!1},onSubmit:{type:Function,required:!1}},emits:["submit","error"],setup(a,{expose:r,emit:i}){var rt;let l=a,n=i,w=nt(),p=I(()=>{var t;return M({extend:M(Yt),...((t=w.ui)==null?void 0:t.form)||{}})}),g=l.id??kt(),B=Pt(`form-${g}`),h=((rt=l.nested)==null?void 0:rt.toString())===""||l.nested===!0,O=h&&it(ut,void 0),u=h?it(dt,void 0):void 0,x=I(()=>u!=null&&u.value?l.name?Ut(u.value,l.name):u.value:l.state);N(ut,B),N(dt,x);let C=W(new Map);ot(async()=>{O&&(await Ot(),O.emit({type:"attach",validate:q,formId:g,name:l.name,api:et}))}),Et(()=>{B.reset(),O&&O.emit({type:"detach",formId:g})}),ot(async()=>{B.on(async t=>{var e;t.type==="attach"?C.value.set(t.formId,{validate:t.validate,name:t.name,api:t.api}):t.type==="detach"?C.value.delete(t.formId):(e=l.validateOn)!=null&&e.includes(t.type)&&!A.value&&(t.type==="input"?(t.eager||z.has(t.name))&&await q({name:t.name,silent:!0,nested:!1}):await q({name:t.name,silent:!0,nested:!1})),t.type==="blur"&&z.add(t.name),(t.type==="change"||t.type==="input"||t.type==="blur"||t.type==="focus")&&D.add(t.name),(t.type==="change"||t.type==="input")&&F.add(t.name)})});let d=W([]);N(zt,d);let _=W({});N(jt,_);let F=Y(new Set),D=Y(new Set),z=Y(new Set);function P(t){return t.map(e=>{var o;return{...e,id:e!=null&&e.name?(o=_.value[e.name])==null?void 0:o.id:void 0}})}let $=W(null);async function j(){let t=l.validate?await l.validate(x.value)??[]:[];if(l.schema){let{errors:e,result:o}=await Mt(x.value,l.schema);e?t=t.concat(e):$.value=o}return P(t)}async function q(t={silent:!1,nested:!1,transform:!1}){var R;let e=t.name&&!Array.isArray(t.name)?[t.name]:t.name,o=[],s=[];if(!e&&t.nested){let k=Array.from(C.value.values()).map(m=>pt(m,t)),y=await Promise.all(k);s=y.filter(m=>m.error).flatMap(m=>m.error.errors.map(V=>gt(V,m.name))),o=y.filter(m=>m.output!==void 0)}let c=[...await j(),...s];if(e?d.value=ft(c,e):d.value=c,(R=d.value)==null?void 0:R.length){if(t.silent)return!1;throw new H(g,d.value)}return t.transform?(o.forEach(k=>{k.name?Tt($.value,k.name,k.output):Object.assign($.value,k.output)}),$.value??x.value):x.value}let A=W(!1);N(At,L(A));async function J(t){var o;A.value=l.loadingAuto&&!0;let e=t;try{e.data=await q({nested:!0,transform:l.transform}),await((o=l.onSubmit)==null?void 0:o.call(l,e)),F.clear()}catch(s){if(!(s instanceof H))throw s;let c={...e,errors:s.errors};n("error",c)}finally{A.value=!1}}let K=I(()=>l.disabled||A.value);N(Rt,I(()=>({disabled:K.value,validateOnInputDelay:l.validateOnInputDelay})));async function pt(t,e){try{let o=await t.validate({...e,silent:!1});return{name:t.name,output:o}}catch(o){if(!(o instanceof H))throw o;return{name:t.name,error:o}}}function gt(t,e){return!e||!t.name?t:{...t,name:e+"."+t.name}}function ht(t,e){var c;let o=e+".",s=(c=t==null?void 0:t.name)!=null&&c.startsWith(o)?t.name.substring(o.length):t.name;return{...t,name:s}}function mt(t,e){return e?t.filter(o=>{var s;return(s=o==null?void 0:o.name)==null?void 0:s.startsWith(e+".")}).map(o=>ht(o,e)):t}function Q(t){return t.api.getErrors().map(e=>t.name?{...e,name:t.name+"."+e.name}:e)}function Z(t,e){return!t||!e?!0:t instanceof RegExp?t.test(e):e===t||typeof t=="string"&&t.startsWith(e+".")}function vt(t,e){if(!t||t instanceof RegExp)return t;if(e!==t)return typeof t=="string"&&t.startsWith(e+".")?t.substring(e.length+1):t}function ft(t,e){let o=new Set(e),s=e.map(y=>{var m,V;return(V=(m=_.value)==null?void 0:m[y])==null?void 0:V.pattern}).filter(Boolean),c=y=>y.name?o.has(y.name)?!0:s.some(m=>m.test(y.name)):!1,R=d.value.filter(y=>!c(y)),k=t.filter(c);return[...R,...k]}function yt(t,e){return t.filter(o=>e instanceof RegExp?!(o.name&&e.test(o.name)):!o.name||o.name!==e)}function tt(t){return!t.name||!!_.value[t.name]}let et={validate:q,errors:d,setErrors(t,e){let o=P(t.filter(tt)),s=[];for(let c of C.value.values())if(Z(e,c.name)){let R=mt(t,c.name);c.api.setErrors(R,vt(e,c.name||"")),s.push(...Q(c))}e?d.value=[...yt(d.value,e),...o,...s]:d.value=[...o,...s]},async submit(){await J(new Event("submit"))},getErrors(t){return t?d.value.filter(e=>t instanceof RegExp?e.name&&t.test(e.name):e.name===t):d.value},clear(t){let e=t?d.value.filter(s=>tt(s)&&(t instanceof RegExp?!(s.name&&t.test(s.name)):s.name!==t)):[],o=[];for(let s of C.value.values())Z(t,s.name)&&s.api.clear(),o.push(...Q(s));d.value=[...e,...o]},disabled:K,loading:A,dirty:I(()=>!!F.size),dirtyFields:L(F),blurredFields:L(z),touchedFields:L(D)};return r(et),(t,e)=>(f(),X(Ct(G(O)?"div":"form"),{id:G(g),class:v(p.value({class:l.class})),onSubmit:_t(J,["prevent"])},{default:T(()=>[E(t.$slots,"default",{errors:d.value,loading:A.value})]),_:3},40,["id","class"]))}},Jt={slots:{root:"relative flex rounded-lg",spotlight:"absolute inset-0 rounded-[inherit] pointer-events-none bg-default/90",container:"relative flex flex-col flex-1 lg:grid gap-x-8 gap-y-4 p-4 sm:p-6",wrapper:"flex flex-col flex-1 items-start",header:"mb-4",body:"flex-1",footer:"pt-4 mt-auto",leading:"inline-flex items-center mb-2.5",leadingIcon:"size-5 shrink-0 text-primary",title:"text-base text-pretty font-semibold text-highlighted",description:"text-[15px] text-pretty"},variants:{orientation:{horizontal:{container:"lg:grid-cols-2 lg:items-center"},vertical:{container:""}},reverse:{true:{wrapper:"lg:order-last"}},variant:{solid:{root:"bg-inverted text-inverted",title:"text-inverted",description:"text-dimmed"},outline:{root:"bg-default ring ring-default",description:"text-muted"},soft:{root:"bg-elevated/50",description:"text-toned"},subtle:{root:"bg-elevated/50 ring ring-default",description:"text-toned"},ghost:{description:"text-muted"},naked:{container:"p-0 sm:p-0",description:"text-muted"}},to:{true:{root:["transition"]}},title:{true:{description:"mt-1"}},highlight:{true:{root:"ring-2"}},highlightColor:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},spotlight:{true:{root:"[--spotlight-size:400px] before:absolute before:-inset-px before:pointer-events-none before:rounded-[inherit] before:bg-[radial-gradient(var(--spotlight-size)_var(--spotlight-size)_at_calc(var(--spotlight-x,0px))_calc(var(--spotlight-y,0px)),var(--spotlight-color),transparent_70%)]"}},spotlightColor:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""}},compoundVariants:[{variant:"solid",to:!0,class:{root:"hover:bg-inverted/90"}},{variant:"outline",to:!0,class:{root:"hover:bg-elevated/50"}},{variant:"soft",to:!0,class:{root:"hover:bg-elevated"}},{variant:"subtle",to:!0,class:{root:"hover:bg-elevated"}},{variant:"subtle",to:!0,highlight:!1,class:{root:"hover:ring-accented"}},{variant:"ghost",to:!0,class:{root:"hover:bg-elevated/50"}},{highlightColor:"primary",highlight:!0,class:{root:"ring-primary"}},{highlightColor:"secondary",highlight:!0,class:{root:"ring-secondary"}},{highlightColor:"success",highlight:!0,class:{root:"ring-success"}},{highlightColor:"info",highlight:!0,class:{root:"ring-info"}},{highlightColor:"warning",highlight:!0,class:{root:"ring-warning"}},{highlightColor:"error",highlight:!0,class:{root:"ring-error"}},{highlightColor:"neutral",highlight:!0,class:{root:"ring-inverted"}},{spotlightColor:"primary",spotlight:!0,class:{root:"[--spotlight-color:var(--ui-primary)]"}},{spotlightColor:"secondary",spotlight:!0,class:{root:"[--spotlight-color:var(--ui-secondary)]"}},{spotlightColor:"success",spotlight:!0,class:{root:"[--spotlight-color:var(--ui-success)]"}},{spotlightColor:"info",spotlight:!0,class:{root:"[--spotlight-color:var(--ui-info)]"}},{spotlightColor:"warning",spotlight:!0,class:{root:"[--spotlight-color:var(--ui-warning)]"}},{spotlightColor:"error",spotlight:!0,class:{root:"[--spotlight-color:var(--ui-error)]"}},{spotlightColor:"neutral",spotlight:!0,class:{root:"[--spotlight-color:var(--ui-bg-inverted)]"}},{to:!0,class:{root:"has-focus-visible:ring-2 has-focus-visible:ring-primary"}}],defaultVariants:{variant:"outline",highlightColor:"primary",spotlightColor:"primary"}},Kt=Object.assign({inheritAttrs:!1},{__name:"PageCard",props:{as:{type:null,required:!1},icon:{type:[String,Object],required:!1},title:{type:String,required:!1},description:{type:String,required:!1},orientation:{type:null,required:!1,default:"vertical"},reverse:{type:Boolean,required:!1},highlight:{type:Boolean,required:!1},highlightColor:{type:null,required:!1},spotlight:{type:Boolean,required:!1},spotlightColor:{type:null,required:!1},variant:{type:null,required:!1},to:{type:null,required:!1},target:{type:[String,Object,null],required:!1},onClick:{type:Function,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1}},setup(a){let r=a,i=wt(),l=W(),n=Dt(),w=nt(),{elementX:p,elementY:g}=Wt(l,{eventFilter:n.eventFilter}),B=I(()=>r.spotlight&&(p.value!==0||g.value!==0));qt(()=>r.spotlight,u=>{u?n.resume():n.pause()},{immediate:!0});let h=I(()=>{var u;return M({extend:M(Jt),...((u=w.ui)==null?void 0:u.pageCard)||{}})({orientation:r.orientation,reverse:r.reverse,variant:r.variant,to:!!r.to||!!r.onClick,title:!!r.title||!!i.title,highlight:r.highlight,highlightColor:r.highlightColor,spotlight:B.value,spotlightColor:r.spotlightColor})}),O=I(()=>(i.title&&Ft(i.title())||r.title||"Card link").trim());return(u,x)=>{var C;return f(),X(G($t),{ref_key:"cardRef",ref:l,as:a.as,"data-orientation":a.orientation,class:v(h.value.root({class:[(C=r.ui)==null?void 0:C.root,r.class]})),style:It(B.value&&{"--spotlight-x":`${G(p)}px`,"--spotlight-y":`${G(g)}px`}),onClick:a.onClick},{default:T(()=>{var d,_,F,D,z,P,$;return[r.spotlight?(f(),S("div",{key:0,class:v(h.value.spotlight({class:(d=r.ui)==null?void 0:d.spotlight}))},null,2)):b("",!0),st("div",{class:v(h.value.container({class:(_=r.ui)==null?void 0:_.container}))},[i.header||a.icon||i.leading||i.body||a.title||i.title||a.description||i.description||i.footer?(f(),S("div",{key:0,class:v(h.value.wrapper({class:(F=r.ui)==null?void 0:F.wrapper}))},[i.header?(f(),S("div",{key:0,class:v(h.value.header({class:(D=r.ui)==null?void 0:D.header}))},[E(u.$slots,"header")],2)):b("",!0),a.icon||i.leading?(f(),S("div",{key:1,class:v(h.value.leading({class:(z=r.ui)==null?void 0:z.leading}))},[E(u.$slots,"leading",{},()=>{var j;return[a.icon?(f(),X(Nt,{key:0,name:a.icon,class:v(h.value.leadingIcon({class:(j=r.ui)==null?void 0:j.leadingIcon}))},null,8,["name","class"])):b("",!0)]})],2)):b("",!0),i.body||a.title||i.title||a.description||i.description?(f(),S("div",{key:2,class:v(h.value.body({class:(P=r.ui)==null?void 0:P.body}))},[E(u.$slots,"body",{},()=>{var j,q;return[a.title||i.title?(f(),S("div",{key:0,class:v(h.value.title({class:(j=r.ui)==null?void 0:j.title}))},[E(u.$slots,"title",{},()=>[at(lt(a.title),1)])],2)):b("",!0),a.description||i.description?(f(),S("div",{key:1,class:v(h.value.description({class:(q=r.ui)==null?void 0:q.description}))},[E(u.$slots,"description",{},()=>[at(lt(a.description),1)])],2)):b("",!0)]})],2)):b("",!0),i.footer?(f(),S("div",{key:3,class:v(h.value.footer({class:($=r.ui)==null?void 0:$.footer}))},[E(u.$slots,"footer")],2)):b("",!0)],2)):b("",!0),E(u.$slots,"default")],2),a.to?(f(),X(Bt,St({key:1,"aria-label":O.value},{to:a.to,target:a.target,...u.$attrs},{class:"focus:outline-none peer",raw:""}),{default:T(()=>[...x[0]||(x[0]=[st("span",{class:"absolute inset-0","aria-hidden":"true"},null,-1)])]),_:1},16,["aria-label"])):b("",!0)]}),_:3},8,["as","data-orientation","class","style","onClick"])}}});export{Ht as n,Kt as t};
