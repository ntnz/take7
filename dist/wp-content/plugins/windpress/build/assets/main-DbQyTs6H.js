import{s as z}from"./chunk-BP1tGd43.min.js";import"./dist-gE_XXzPp.min.js";import{Gt as T,rt as d,xn as w}from"./runtime-core.esm-bundler-DRZAYnQ2.min.js";import"./vue.runtime.esm-bundler-BlWQ9Hv9.min.js";import"./dist-CyCkKGye.min.js";import"./core-8AzxaLAT.min.js";import"./isObject-DkMBgCmn.min.js";import"./_toKey-lf-76zFF.min.js";import{t as G}from"./debounce-DmqvMdin.min.js";import"./set-D10waSiW.min.js";import"./get-CMyps7rf.min.js";import"./virtualRef-CZBazqxr.js";import{t as _}from"./preload-helper-hRiy8xQv.min.js";import"./dist-7RENR6RM.min.js";import{t as H}from"./logger-B3j_KY2M.js";import{n as V,t as W}from"./tippy.esm-CtRNZGHn.min.js";import{n as B,t as X}from"./dist-DNqxA4Wq.min.js";import{n as E,t as Y}from"./highlight-in-textarea-By4lYHKb.js";import{t as J}from"./tribute.min-CuxQbPzU.min.js";import{a as y,i as c,n as l,r as F}from"./constant-BwtmMKdP.js";(async()=>{var O=z(J()),C=null;(async()=>C=await B({themes:[_(()=>import("./dark-plus-DUxK4Phe.min.js").then(async e=>(await e.__tla,e)),[],import.meta.url),_(()=>import("./light-plus-D1Qkc2mD.min.js").then(async e=>(await e.__tla,e)),[],import.meta.url)],langs:[_(()=>import("./css-CZ_P402v.min.js").then(async e=>(await e.__tla,e)),[],import.meta.url)],engine:X(_(()=>import("./wasm-AKcBxSw7.min.js").then(async e=>(await e.__tla,e)),[],import.meta.url))}))();var i=document.createRange().createContextualFragment(`
    <textarea id="windpressbricks-plc-input" class="windpressbricks-plc-input" rows="2" spellcheck="false"></textarea>
`).querySelector("#windpressbricks-plc-input"),k=[],L=document.createRange().createContextualFragment(`
    <span id="windpressbricks-plc-class-sort" class="bricks-svg-wrapper windpressbricks-plc windpressbricks-plc-class-sort" data-balloon="Automatic Class Sorting" data-balloon-pos="left">
        <svg xmlns="http://www.w3.org/2000/svg" class="bricks-svg" viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round" class="bricks-svg icon icon-tabler icons-tabler-outline icon-tabler-reorder"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" /><path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" /><path d="M17 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" /><path d="M5 11v-3a3 3 0 0 1 3 -3h8a3 3 0 0 1 3 3v3" /><path d="M16.5 8.5l2.5 2.5l2.5 -2.5" /></svg>    
    </span>
`).querySelector("#windpressbricks-plc-class-sort"),$=document.createRange().createContextualFragment(`
    <span id="windpressbricks-plc-class-down" class="bricks-svg-wrapper windpressbricks-plc windpressbricks-plc-class-down" data-balloon="Move Classes to Plain Classes" data-balloon-pos="left">
        <svg xmlns="http://www.w3.org/2000/svg" class="bricks-svg" width="32" height="32" viewBox="0 0 24 24"><!-- Icon from Lucide by Lucide Contributors - https://github.com/lucide-icons/lucide/blob/main/LICENSE --><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.5 13h6M2 16l4.5-9l4.5 9m7-9v9m-4-4l4 4l4-4"/></svg>    
    </span>
`).querySelector("#windpressbricks-plc-class-down");k.push(L),k.push($);var S=w(!1),p=w([]),v=w(0),M=null;E(i);var I=[];wp.hooks.addAction("windpressbricks-autocomplete-items-refresh","windpressbricks",()=>{I=wp.hooks.applyFilters("windpressbricks-autocomplete-items",[],i.value)}),wp.hooks.doAction("windpressbricks-autocomplete-items-refresh");var u=new O.default({containerClass:"windpressbricks-tribute-container",autocompleteMode:!0,menuItemLimit:50,noMatchTemplate:"",values:async function(e,t){if(!y("module.plain-classes.autocomplete",!0).value){t([]);return}let s=await wp.hooks.applyFilters("windpressbricks-autocomplete-items-query",I,e);t(s)},lookup:"value",itemClass:"class-item",menuItemTemplate:function(e){let t="";return e.original.color!==void 0&&(t+=`background-color: ${e.original.color};`),e.original.fontWeight!==void 0&&(t+=`font-weight: ${e.original.fontWeight};`),`
            <span class="class-name" data-tribute-class-name="${e.original.value}">${e.string}</span>
            <span class="class-hint" style="${t}"></span>
        `}});u.setMenuContainer=function(e){this.menuContainer=e};var P=u.events.callbacks;u.events.callbacks=function(){return{...P.call(this),up:(e,t)=>{if(this.tribute.isActive&&this.tribute.current.filteredItems){e.preventDefault(),e.stopPropagation();let s=this.tribute.current.filteredItems.length,n=this.tribute.menuSelected;s>n&&n>0?(this.tribute.menuSelected--,this.setActiveLi()):n===0&&(this.tribute.menuSelected=s-1,this.setActiveLi(),this.tribute.menu.scrollTop=this.tribute.menu.scrollHeight),q()}},down:(e,t)=>{if(this.tribute.isActive&&this.tribute.current.filteredItems){e.preventDefault(),e.stopPropagation();let s=this.tribute.current.filteredItems.length-1,n=this.tribute.menuSelected;s>n?(this.tribute.menuSelected++,this.setActiveLi()):s===n&&(this.tribute.menuSelected=0,this.setActiveLi(),this.tribute.menu.scrollTop=0),q()}}}},u.attach(i),new MutationObserver(function(e){e.forEach(function(t){t.type==="attributes"?t.target.id==="bricks-panel-element"&&t.attributeName==="style"&&(S.value=t.target.style.display!=="none"):t.type==="childList"&&t.addedNodes.length>0&&t.target.dataset&&t.target.dataset.controlkey==="_cssClasses"&&t.addedNodes[0].childNodes.length>0&&document.querySelector("#_cssClasses").addEventListener("input",function(s){d(()=>{i.value=s.target.value,h()})})})}).observe(document.getElementById("bricks-panel-element"),{subtree:!0,attributes:!0,childList:!0}),new MutationObserver(function(e){l.$_state.selectedElements.length>0?p.value=l.$_state.selectedElements.map(t=>t.id):l.$_activeElement.value?p.value=[l.$_activeElement.value.id]:p.value=[]}).observe(document.querySelector("#bricks-structure"),{subtree:!0,attributes:!0,childList:!0}),new MutationObserver(function(e){d(()=>{v.value===l.$_state.historyIndex&&(v.value=0),v.value=l.$_state.historyIndex})}).observe(document.querySelector("#bricks-toolbar > ul.group-wrapper.end > li.undo"),{subtree:!1,attributeFilter:["class"]}),T([p,S,v],(e,t)=>{(e[0]!==t[0]||e[2]!==t[2])&&d(()=>{if(e[0].length>0){let s=e[0].map(n=>{var a,o,r,f,x;return l.$_state.activeComponent?((r=(o=(a=l.$_state.components.find(m=>m.id===l.$_state.activeComponent.id))==null?void 0:a.elements.find(m=>m.id===n))==null?void 0:o.settings)==null?void 0:r._cssClasses)||"":((x=(f=l.$_state[A()].find(m=>m.id===n))==null?void 0:f.settings)==null?void 0:x._cssClasses)||""});i.value=s.every(n=>n===s[0])?s[0]:""}else i.value="";h()}),e[0]&&e[1]&&d(()=>{let s=document.querySelector("#bricks-panel-sticky");if(y("module.plain-classes.input-field",!0).value&&s){if(s.querySelector(".windpressbricks-plc-input")===null){let a=document.createElement("div");a.style.padding="0 var(--builder-spacing)",a.appendChild(i),s.appendChild(a),M=new Y(i,{highlight:[{highlight:new RegExp("(?<=\\s|^)(?:(?!\\s).)+(?=\\s|$)","g"),className:"word"},{highlight:new RegExp("(?<=\\s)\\s","g"),className:"multispace",blank:!0}]}),E.update(i)}let n=document.querySelector("#bricks-panel-element-classes > div > div.actions-wrapper > div > div.dropdown-wrapper > div");n.querySelectorAll(".windpressbricks-plc").length===0&&k.forEach(a=>{n.appendChild(a)})}})}),i.addEventListener("input",function(e){p.value.forEach(t=>{if(l.$_state.activeComponent){let s=l.$_state.components.find(n=>n.id===l.$_state.activeComponent.id);if(s){let n=s.elements.find(a=>a.id===t);n&&(n.settings._cssClasses=e.target.value)}}else{let s=l.$_state[A()].find(n=>n.id===t);s&&(s.settings._cssClasses=e.target.value)}})});function h(){d(()=>{try{M.handleInput()}catch{}E.update(i),u.hideMenu()})}i.addEventListener("highlights-updated",function(e){R()});var b=V(document.createElement("div"),{plugins:[W],allowHTML:!0,arrow:!1,duration:[500,0],followCursor:!0,trigger:"manual"});function R(){let e=document.querySelector(".hit-container");if(e===null)return;b.reference=e;async function t(a){let o=a.textContent,r=await F.contentWindow.windpress.module.classnameToCss.generate(o);if(r===null||r.trim()==="")return null;b.setContent(C.codeToHtml(r,{lang:"css",theme:"dark-plus"})),b.show()}let s=w(null),n=G(function(a){if(!y("module.plain-classes.hover-preview-classes",!0).value)return;let o=a.clientX,r=a.clientY;s.value=document.elementsFromPoint(o,r).find(f=>f.matches('mark[class="word"]'))||null},10);e.addEventListener("mousemove",n),e.addEventListener("mouseleave",function(a){n.cancel(),s.value=null}),T(s,(a,o)=>{a&&a!==o?t(a):b.hide()})}var D=new MutationObserver(function(e){e.forEach(function(t){t.type==="childList"&&t.addedNodes.length>0&&t.addedNodes.forEach(s=>{let n=s.querySelector(".class-name").dataset.tributeClassName;s.addEventListener("mouseenter",a=>{j(n)}),s.addEventListener("mouseleave",a=>{N()}),s.addEventListener("click",a=>{N()})})})}),g=null;i.addEventListener("tribute-active-true",function(e){g===null&&(g=document.querySelector(".windpressbricks-tribute-container>ul")),d(()=>{g&&D.observe(g,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"]})})}),L.addEventListener("click",async function(e){i.value=await F.contentWindow.windpress.module.classSorter.sort(i.value);let t=new Event("input",{bubbles:!0});i.dispatchEvent(t),h()}),$.addEventListener("click",async function(e){var a;let t=l.$_activeElement.value,s=i.value.split(" ");((a=t.settings)!=null&&a._cssGlobalClasses?[...t.settings._cssGlobalClasses]:[]).forEach(o=>{let r=l.$_getGlobalClassName(o);s.includes(r)||s.push(r)}),i.value=s.join(" ");let n=new Event("input",{bubbles:!0});i.dispatchEvent(n),t.settings._cssGlobalClasses=[],h()});function j(e){c.$_getElementNode(c.$_activeElement.value).classList.add(e)}function N(){let e=c.$_activeElement.value,t=c.$_getElementNode(e),s=c.$_getElementClasses(e);t.classList.value=s.join(" ")}function q(){let e=u.menu.querySelector("li.highlight>span.class-name"),t=c.$_activeElement.value,s=c.$_getElementNode(t),n=c.$_getElementClasses(t);s.classList.value=n.join(" ")+" "+e.dataset.tributeClassName}function A(){let e=l.$_state.templateType;return["header","footer"].includes(e)?e:"content"}H("Module loaded!",{module:"plain-classes"})})();
