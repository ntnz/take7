import"./source-map-generator-CYV46cXA.min.js";import"./dist-gE_XXzPp.min.js";import{Ct as ee,Gt as M,O as je,Qt as I,S as d,St as z,Tt as G,X as S,Xt as C,b as qe,er as Me,gt as p,ir as K,jn as L,k as h,rr as D,s as V,u as ze,ut as te,wt as De,x as F,xn as _,y as b}from"./runtime-core.esm-bundler-DRZAYnQ2.min.js";import{n as Ve,r as Fe,s as Ue}from"./vue.runtime.esm-bundler-BlWQ9Hv9.min.js";import"./dist-CyCkKGye.min.js";import"./log-BpAY2Wg4.js";import"./chunk-HTB5LLOP-BErhSb2z.min.js";import{f as Be}from"./core-8AzxaLAT.min.js";import"./floating-ui.core-BwRAMOlv.min.js";import"./api-j1hi8yn9.js";import"./index.browser-DQZXIZaU.min.js";import"./isObject-DkMBgCmn.min.js";import"./_toKey-lf-76zFF.min.js";import{t as Re}from"./set-D10waSiW.min.js";import"./preload-helper-hRiy8xQv.min.js";import"./base64-F91Q3Zd1.min.js";import"./lib-DdqEuSaZ.min.js";import"./dist-7RENR6RM.min.js";import"./path-browserify-QbCHt7ci.min.js";import"./pre-process-DdabCSb9.js";import{__tla as He}from"./cssesc-CRBmtthf.js";import{__tla as Xe}from"./lightningcss-wasm-Dq7A3rEr.min.js";import"./build-CCjEc_ld.js";import{t as Ye}from"./vfs-Nkm45dX9.js";import{c as Ge,i as Ke}from"./intellisense-Dz5eHkgp.js";import"./adobe-css-tools-Cq8Zs2rG.min.js";import"./dlv.umd-ByGaGM3P.min.js";import{__tla as Qe}from"./tailwindcss-D1kdoqZn.js";import{t as le}from"./logger-B3j_KY2M.js";import{t as T}from"./_plugin-vue_export-helper-89dl49sx.min.js";import{a as Je,i as Ne,n as Ze,r as et,t as tt}from"./chevron-right-iAp4ISoK.min.js";import{n as lt,t as ae}from"./constant-CofKsQH6.js";Promise.all([(()=>{try{return He}catch{}})(),(()=>{try{return Xe}catch{}})(),(()=>{try{return Qe}catch{}})()]).then(async()=>{var re={id:"windpressbuilderius-variable-app-header",class:"header-container bg:$(primary-1) cursor:grab bb:1|solid|$(primary-3)"},ie={class:"header-content flex gap:10 align-items:center fg:$(base-2)"},se={class:"header-logo flex px:12 py:2 align-items:center"},ne={class:"header-title text-transform:none font:medium text:center flex-grow:1 gap:10 align-items:center cursor:default px:12 py:2"},oe=T({__name:"PanelHeader",setup(a){let r=S("variableApp"),i=S("isOpen");function u(){let l=r.querySelector("#windpressbuilderius-variable-app-header"),t=_(!1),n=0,c=0;M(t,g=>{g?(document.body.style.userSelect="none",ae.style.pointerEvents="none",l.style.cursor="grabbing"):(document.body.style.removeProperty("user-select"),ae.style.removeProperty("pointer-events"),l.style.cursor="grab")});let o=g=>{t.value=!0;let w=l.getBoundingClientRect();n=g.clientX-w.left,c=g.clientY-w.top};l.removeEventListener("mousedown",o),l.addEventListener("mousedown",o);let $=g=>{if(!t.value)return;let w=l.getBoundingClientRect(),j=g.clientX,v=g.clientY,s=j-n,y=v-c,k=s<0?0:s>window.innerWidth-w.width?window.innerWidth-w.width:s,E=y<0?0:y>window.innerHeight-w.height?window.innerHeight-w.height:y;r.style.left=`${k}px`,r.style.top=`${E}px`};document.removeEventListener("mousemove",$),document.addEventListener("mousemove",$);let P=g=>{t.value=!1};document.removeEventListener("mouseup",P),document.addEventListener("mouseup",P)}return te(()=>{u()}),(l,t)=>{let n=De("inline-svg"),c=et,o=G("tooltip");return p(),d("div",re,[b("div",ie,[b("div",se,[h(n,{src:L(Ze),class:"inline-svg fill:current font:24"},null,8,["src"])]),I((p(),d("div",ne,[...t[1]||(t[1]=[je(" WindPress ",-1)])])),[[o,{placement:"top",content:`v${l.windpressbuilderius._version}`}]]),I((p(),d("button",{class:"uniPanelIconButton header-exit r:0 bg:$(primary-3):hover py:10 px:12",onClick:t[0]||(t[0]=$=>i.value=!L(i))},[h(c,{class:"iconify fg:$(base-2) font:16"})])),[[o,{placement:"top",content:"Close"}]])])])}}},[["__scopeId","data-v-4197d510"]]),ue={class:"header-slot flex-grow:1"},pe={key:0,class:"expansion-panel__body"},ce={__name:"ExpansionPanel",props:{namespace:{type:String,required:!0},name:{type:String,required:!0}},setup(a,{expose:r}){let i=a,u=_(null),l=Be(`windpressbuilderius-variable-app.ui.expansion-panels.${i.namespace}`,{[`${i.name}`]:!1},void 0,{mergeDefaults:!0});function t(c){l.value[i.name]=c===null?!l.value[i.name]:c}function n(){u.value.scrollIntoView()}return r({togglePanel:t,scrollIntoView:n}),(c,o)=>{let $=tt;return p(),d("div",{ref_key:"sectionRef",ref:u,class:"expansion-panel mx:10 py:8"},[b("div",{class:"expansion-panel__header flex justify-content:space-between p:10 r:8 cursor:pointer",onClick:o[0]||(o[0]=P=>L(l)[a.name]=!L(l)[a.name])},[b("div",ue,[ee(c.$slots,"header",{},void 0,!0)]),b("div",null,[h($,{style:D({transform:L(l)[a.name]?"rotate(-90deg)":"rotate(0deg)"}),class:"iconify ~duration:300 font:18"},null,8,["style"])])]),h(Ve,null,{default:C(()=>[L(l)[a.name]?(p(),d("div",pe,[ee(c.$slots,"default",{},void 0,!0)])):F("",!0)]),_:3})],512)}}},U=T(ce,[["__scopeId","data-v-ca3cf9eb"]]),de={class:"{m:10;pb:15}>div"},ve={class:"variable-section-title font:14 my:10"},me={class:"variable-section-items flex flex:row gap:8 flex-wrap:wrap"},ye=["onClick","onMouseenter"],be={class:"font:14"},fe={__name:"CommonVariableItems",props:{variableItems:{type:Object,required:!0}},setup(a){return(r,i)=>{let u=G("tooltip");return p(),d("div",de,[(p(!0),d(V,null,z(a.variableItems,(l,t)=>(p(),d("div",{key:t,class:"var-item"},[b("div",ve,K(t.replace("_","-")),1),b("div",me,[l.length>0?(p(!0),d(V,{key:0},z(l,(n,c)=>I((p(),d("button",{key:c,class:"px:12 py:8 r:8 fg:$(base-1) fg:$(accent-normal):hover bg:$(primary-3) bg:$(primary-2):hover b:0 flex-grow:1 flex-shrink:1 flex-basis:30% cursor:pointer {opacity:.5}>span opacity:100:hover>span",onClick:o=>r.$emit("previewChose",o,n.key),onMouseenter:o=>r.$emit("previewEnter",o,n.key),onMouseleave:i[0]||(i[0]=o=>r.$emit("previewLeave"))},[b("span",be,K(n.label),1)],40,ye)),[[u,{placement:"top",content:`var(${n.key}, ${n.value})`}]])),128)):F("",!0)])]))),128))])}}},Q=T(fe,[["__scopeId","data-v-188b1ad4"]]),ge={class:"{m:10;pb:15}>div"},he={class:"variable-section-title font:14 my:10"},we={key:0,class:"variable-section-items default-color"},ke=["onClick","onMouseenter"],_e=["onClick","onMouseenter"],$e={__name:"ColorVariableItems",props:{variableItems:{type:Object,required:!0}},setup(a){return(r,i)=>{let u=G("tooltip");return p(),d("div",ge,[(p(!0),d(V,null,z(a.variableItems,(l,t)=>(p(),d("div",{key:t,class:""},[b("div",he,K(t),1),l.DEFAULT?(p(),d("div",we,[I(b("button",{class:Me([`bg:$(${l.DEFAULT.key.slice(2)})`,"w:full r:4 h:24 border:1|solid|transparent border:white:hover cursor:pointer"]),style:D(`--wp-b-v-item-bg: var(--${l.DEFAULT.key.slice(2)});`),onClick:n=>r.$emit("previewChose",n,l.DEFAULT.key),onMouseenter:n=>r.$emit("previewEnter",n,l.DEFAULT.key),onMouseleave:i[0]||(i[0]=n=>r.$emit("previewLeave"))},null,46,ke),[[u,{placement:"top",content:`var(${l.DEFAULT.key}, ${l.DEFAULT.value})`}]])])):F("",!0),l.shades&&Object.keys(l.shades).length>0?(p(),d("div",{key:1,style:D(`--wp-b-v-items-grid: ${Object.keys(l.shades).length}`),class:"variable-section-items shades-colors grid r:4 overflow:hidden"},[(p(!0),d(V,null,z(l.shades,(n,c)=>(p(),d("div",{key:c,class:"flex gap:10"},[I(b("button",{style:D(`--wp-b-v-item-bg: var(--${n.key.slice(2)})`),class:"w:full h:24 border:1|solid|transparent border:white:hover cursor:pointer",onClick:o=>r.$emit("previewChose",o,n.key),onMouseenter:o=>r.$emit("previewEnter",o,n.key),onMouseleave:i[1]||(i[1]=o=>r.$emit("previewLeave"))},null,44,_e),[[u,{placement:"top",content:`var(${n.key}, ${n.value})`}]])]))),128))],4)):F("",!0)]))),128))])}}},Ee=T($e,[["__scopeId","data-v-a1f5a2af"]]),xe={id:"windpressbuilderius-variable-app-body",class:"var-body rel w:full h:full overflow-y:scroll! bb:1|solid|$(primary-3)>div:not(:last-child)"},Ce=1e3,Pe=T({__name:"PanelBody",setup(a){let r=_({colors:{},typography:{},sizing:{}}),i=S("focusedInput"),u=S("recentVariableSelectionTimestamp"),l=S("tempInputValue"),t=S("variableApp");async function n(){let v=lt.contentWindow.document.querySelector('script#windpress\\:vfs[type="text/plain"]'),s=Ye(v.textContent),y=await Ke(await Ge({volume:s})),k=t.querySelector("style#windpressbuilderius-variable-app-body-style");k||(k=document.createElement("style"),k.id="windpressbuilderius-variable-app-body-style",t.appendChild(k)),k.innerHTML=`
        #windpressbuilderius-variable-app-body {
            ${y.map(e=>`${e.key}:${e.value};`).join("")}
        }
    `;let E={};y.filter(e=>e.key.startsWith("--color")).forEach(e=>{let m=e.key.slice(8),X=m.split("-"),Y="";if(X.length>1){let Oe=X[0],Ae=X.slice(1).join("-");Y=`${Oe}.shades.'${Ae}'`}else Y=`${m}.DEFAULT`;Re(E,Y,e)}),r.value.colors=Object.keys(E).sort().reduce((e,m)=>(e[m]=E[m],e),{});let f={font_size:[],line_height:[],letter_spacing:[]};y.filter(e=>e.key.startsWith("--text-")&&!e.key.endsWith("--line-height")).forEach(e=>{let m=e.key.slice(7);f.font_size.push({key:e.key,label:m,value:e.value})}),y.filter(e=>e.key.startsWith("--leading-")||e.key.endsWith("--leading")).forEach(e=>{let m=e.key.startsWith("--leading-")?e.key.slice(10):e.key.slice(2,-9);f.line_height.push({key:e.key,label:m,value:e.value})}),f.line_height.sort((e,m)=>e.label.startsWith("font-size-")&&!m.label.startsWith("font-size-")?1:!e.label.startsWith("font-size-")&&m.label.startsWith("font-size-")?-1:0),y.filter(e=>e.key.startsWith("--tracking-")).forEach(e=>{let m=e.key.slice(11);f.letter_spacing.push({key:e.key,label:m,value:e.value})}),r.value.typography=f;let H={container:[],breakpoint:[]};y.filter(e=>e.key.startsWith("--container-")).forEach(e=>{let m=e.key.slice(12);H.container.push({key:e.key,label:m,value:e.value})}),y.filter(e=>e.key.startsWith("--breakpoint-")).forEach(e=>{let m=e.key.slice(13);H.breakpoint.push({key:e.key,label:m,value:e.value})}),r.value.sizing=H}let c=_(null),o=_(null),$=_(null);M(i,v=>{if(v){let s=v.getAttribute("name"),y=["color","backgroundColor"].some(f=>s.includes(f)),k=["fontSize"].some(f=>s.includes(f)),E=["padding","margin","gap","width","height"].some(f=>s.includes(f));o.value.togglePanel(!1),$.value.togglePanel(!1),c.value.togglePanel(!1),y?(c.value.togglePanel(!0),c.value.scrollIntoView()):k?(o.value.togglePanel(!0),o.value.scrollIntoView()):E&&($.value.togglePanel(!0),$.value.scrollIntoView())}});function P(v,s){let y=Object.getOwnPropertyDescriptor(v,"value").set,k=Object.getPrototypeOf(v),E=Object.getOwnPropertyDescriptor(k,"value").set;y&&y!==E?E.call(v,s):y.call(v,s);let f=new Event("input",{bubbles:!0});v.dispatchEvent(f)}function g(v,s){performance.now()-u.value<Ce||i.value&&P(i.value,`var(${s})`)}function w(v){!i.value||l.value===null||P(i.value,l.value)}function j(v,s){i.value&&(P(i.value,`var(${s})`),l.value=`var(${s})`,u.value=performance.now())}return te(()=>{n()}),new BroadcastChannel("windpress").addEventListener("message",async v=>{let s=v.data;s.source==="windpress/intellisense"&&s.task==="windpress.code-editor.saved.done"&&setTimeout(()=>{n()},1e3)}),(v,s)=>(p(),d("div",xe,[h(U,{ref_key:"sectionColor",ref:c,namespace:"variable",name:"color"},{header:C(()=>[...s[0]||(s[0]=[b("span",{class:"var-body-title"},"Color",-1)])]),default:C(()=>[h(Ee,{"variable-items":r.value.colors,onPreviewEnter:g,onPreviewLeave:w,onPreviewChose:j},null,8,["variable-items"])]),_:1},512),h(U,{ref_key:"sectionTypography",ref:o,namespace:"variable",name:"typography"},{header:C(()=>[...s[1]||(s[1]=[b("span",{class:"var-body-title"},"Typography",-1)])]),default:C(()=>[h(Q,{"variable-items":r.value.typography,onPreviewEnter:g,onPreviewLeave:w,onPreviewChose:j},null,8,["variable-items"])]),_:1},512),h(U,{ref_key:"sectionSpacing",ref:$,namespace:"variable",name:"spacing",class:""},{header:C(()=>[...s[2]||(s[2]=[b("span",{class:"var-body-title"},"Sizing",-1)])]),default:C(()=>[h(Q,{"variable-items":r.value.sizing,onPreviewEnter:g,onPreviewLeave:w,onPreviewChose:j},null,8,["variable-items"])]),_:1},512)]))}},[["__scopeId","data-v-a7b2a30e"]]),Se={id:"windpressbuilderius-variable-app-container",class:"flex flex:column w:full h:full fg:$(base-2) bg:$(primary-1)"},Le=T({__name:"App",setup(a){let r=S("isOpen");return(i,u)=>I((p(),d("div",Se,[h(oe),(p(),qe(ze,null,{default:C(()=>[h(Pe)]),_:1}))],512)),[[Ue,L(r)]])}},[["__scopeId","data-v-1cedf206"]]);function Ie({selector:a,callback:r,options:i}){let u=new MutationObserver(r),l=document.querySelector(a);if(!l){le(`Target not found for selector: ${a}`,{module:"variable-picker",type:"error"});return}u.observe(l,Object.assign(Object.assign({},{childList:!0,subtree:!0}),i))}var W=document.createElement("windpressbuilderius-variable-app");W.id="windpressbuilderius-variable-app",document.body.appendChild(W);for(let a of document.getElementById("builderius-builder-css").sheet.cssRules)if(a.selectorText&&a.selectorText.includes("#builderiusPanel"))for(let r=0;r<a.style.length;r++){let i=a.style[r];i.startsWith("--")&&W.style.setProperty(i,a.style.getPropertyValue(i).trim())}var O=_(!1),A=_(null),q=_(null),Te=_(0),B=_(null),x=Fe(Le);x.config.globalProperties.windpressbuilderius=window.windpressbuilderius,x.provide("variableApp",W),x.provide("isOpen",O),x.provide("focusedInput",A),x.provide("tempInputValue",q),x.provide("recentVariableSelectionTimestamp",Te),x.use(Ne,{container:"#windpressbuilderius-variable-app"}),x.component("InlineSvg",Je),x.mount("#windpressbuilderius-variable-app");function J(a){var r;!a.shiftKey||!a.target||((r=document==null?void 0:document.getSelection())==null||r.removeAllRanges(),a.preventDefault(),a.stopPropagation(),A.value=a.target,q.value=a.target.value,O.value=!0)}function N(a){A.value=a.target}var We=["div.uniCssInput","div.uniCssColorpicker"];function Z(){setTimeout(()=>{var i;let a=!1;We.forEach(u=>{(typeof u=="string"?[...document.querySelectorAll(u)]:[...document.querySelectorAll(u.selector)].filter(l=>u.hasChild.some(t=>l.querySelector(t)))).forEach(l=>{let t=l.querySelector("input[type='text']");(t==null?void 0:t.getAttribute("windpressbuilderius-variable-app"))!=="listened"&&(t==null||t.removeEventListener("click",J),t==null||t.addEventListener("click",J),t==null||t.removeEventListener("focus",N),t==null||t.addEventListener("focus",N),t==null||t.setAttribute("windpressbuilderius-variable-app","listened"),a=!0)})});let r=document.querySelector("div.uniSystemSelectClasses__valueWrapper span.uniSystemSelectClasses__placeholder")?"%root%":(i=document.querySelector("div.uniSystemSelectClasses__valueWrapper div.uniModuleCssSelectorItemSelected span"))==null?void 0:i.innerText;B.value!==r&&(B.value=r),a&&(A.value=null,q.value=null)},100)}var R=!1;Ie({selector:".uniLeftPanelOuter",options:{subtree:!0,childList:!0},callback(){R||(R=!0,Z(),setTimeout(()=>{R=!1},100))}}),Z(),document.addEventListener("keydown",a=>{a.key==="Escape"&&O.value&&(O.value=!1)}),M(O,a=>{W.style.zIndex=a?"calc(Infinity)":"-1"}),M(B,(a,r)=>{a!==r&&(A.value=null,q.value=null)}),le("Module loaded!",{module:"variable-picker"})});
