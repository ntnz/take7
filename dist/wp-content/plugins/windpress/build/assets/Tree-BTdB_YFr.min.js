import{Bt as ge,Ct as $,O as ye,On as me,S as P,St as be,Xt as w,b as z,er as B,gt as A,ir as he,j as le,jn as p,k as F,mt as xe,nt as O,rt as ue,s as de,ut as ke,v as V,x as H,xn as te,y as Ie}from"./runtime-core.esm-bundler-DRZAYnQ2.min.js";import{c as Y,l as X}from"./vue.runtime.esm-bundler-BlWQ9Hv9.min.js";import{G as Se,N as Ke,b as ae,v as Z,y as oe}from"./Button-DgwZaK7A.min.js";import{_ as qe,r as Te}from"./core-8AzxaLAT.min.js";import{t as ie}from"./arrays-DRBrU6gF.min.js";import{G as Ae,O as ce,W as ve,_ as Ce,k as Ve,y as _e}from"./Tooltip-8BMqxvlv.min.js";import{C as we,E as ne,d as Be,f as $e,g as pe,h as ze,m as Le,p as Ee,u as Fe,x as Oe}from"./namespaced-B-zXBPDg.min.js";function Re(s,m){let e=te(),f=(t,q)=>{if(m.multiple&&Array.isArray(s.value))if(m.selectionBehavior==="replace")s.value=[t],e.value=t;else{let I=s.value.findIndex(u=>q(u));I===-1?s.value=[...s.value,t]:s.value=s.value.filter((u,a)=>a!==I)}else m.selectionBehavior==="replace"?s.value={...t}:!Array.isArray(s.value)&&q(s.value)?s.value=void 0:s.value={...t};return s.value};function K(t,q,I,u){var g;if(!(e!=null&&e.value)||!m.multiple||!Array.isArray(s.value))return;let a=(g=I().filter(y=>y.ref.dataset.disabled!=="").find(y=>y.ref===q))==null?void 0:g.value;if(!a)return;let c=null;switch(t){case"prev":case"next":c=ie(u,e.value,a);break;case"first":c=ie(u,e.value,u==null?void 0:u[0]);break;case"last":c=ie(u,e.value,u==null?void 0:u[u.length-1]);break}s.value=c}return{firstValue:e,onSelectItem:f,handleMultipleReplace:K}}var fe=le({__name:"RovingFocusItem",props:{tabStopId:{type:String,required:!1},focusable:{type:Boolean,required:!1,default:!0},active:{type:Boolean,required:!1},allowShiftKey:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(s){let m=s,e=Be(),f=Ce(),K=V(()=>m.tabStopId||f),t=V(()=>e.currentTabStopId.value===K.value),{getItems:q,CollectionItem:I}=pe();ke(()=>{m.focusable&&e.onFocusableItemAdd()}),xe(()=>{m.focusable&&e.onFocusableItemRemove()});function u(a){if(a.key==="Tab"&&a.shiftKey){e.onItemShiftTab();return}if(a.target!==a.currentTarget)return;let c=Le(a,e.orientation.value,e.dir.value);if(c!==void 0){if(a.metaKey||a.ctrlKey||a.altKey||!m.allowShiftKey&&a.shiftKey)return;a.preventDefault();let g=[...q().map(y=>y.ref).filter(y=>y.dataset.disabled!=="")];if(c==="last")g.reverse();else if(c==="prev"||c==="next"){c==="prev"&&g.reverse();let y=g.indexOf(a.currentTarget);g=e.loop.value?ze(g,y+1):g.slice(y+1)}ue(()=>Ee(g))}}return(a,c)=>(A(),z(p(I),null,{default:w(()=>[F(p(ae),{tabindex:t.value?0:-1,"data-orientation":p(e).orientation.value,"data-active":a.active?"":void 0,"data-disabled":a.focusable?void 0:"",as:a.as,"as-child":a.asChild,onMousedown:c[0]||(c[0]=g=>{a.focusable?p(e).onItemFocus(K.value):g.preventDefault()}),onFocus:c[1]||(c[1]=g=>p(e).onItemFocus(K.value)),onKeydown:u},{default:w(()=>[$(a.$slots,"default")]),_:3},8,["tabindex","data-orientation","data-active","data-disabled","as","as-child"])]),_:3}))}});function ee(s){return s.reduce((m,e)=>(m.push(e),e.children&&m.push(...ee(e.children)),m),[])}var[We,Me]=Ae("TreeRoot"),je=le({__name:"TreeRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},items:{type:Array,required:!1},expanded:{type:Array,required:!1},defaultExpanded:{type:Array,required:!1},getKey:{type:Function,required:!0},getChildren:{type:Function,required:!1,default:s=>s.children},selectionBehavior:{type:String,required:!1,default:"toggle"},multiple:{type:Boolean,required:!1,skipCheck:!0},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},propagateSelect:{type:Boolean,required:!1},bubbleSelect:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"ul"}},emits:["update:modelValue","update:expanded"],setup(s,{emit:m}){let e=s,f=m,{items:K,multiple:t,disabled:q,propagateSelect:I,dir:u,bubbleSelect:a}=me(e),{handleTypeaheadSearch:c}=Oe(),g=we(u),y=te(),L=te(!1),v=Ve(),d=ce(e,"modelValue",f,{defaultValue:e.defaultValue??(t.value?[]:void 0),passive:!0,deep:!0}),x=ce(e,"expanded",f,{defaultValue:e.defaultExpanded??[],passive:e.expanded===void 0,deep:!0}),{onSelectItem:i,handleMultipleReplace:n}=Re(d,e),l=V(()=>t.value&&Array.isArray(d.value)?d.value.map(r=>e.getKey(r)):[e.getKey(d.value??{})]);function T(r,o=1,b){return r.reduce((k,h,_)=>{let E=e.getKey(h),R=e.getChildren(h),Q=x.value.includes(E),U={_id:E,value:h,index:_,level:o,parentItem:b,hasChildren:!!R,bind:{value:h,level:o,"aria-setsize":r.length,"aria-posinset":_+1}};return k.push(U),R&&Q&&k.push(...T(R,o+1,h)),k},[])}let S=V(()=>{let r=e.items;return x.value.map(o=>o),T(r??[])});function C(r){var o;if(L.value)v.trigger(r);else{let b=((o=y.value)==null?void 0:o.getItems())??[];c(r.key,b)}}function J(r){if(L.value)return;let o=$e[r.key];ue(()=>{var b;n(o,ne(),(b=y.value)==null?void 0:b.getItems,S.value.map(k=>k.value))})}function W(r){var o;if(r.parentItem!=null&&Array.isArray(d.value)&&e.multiple){let b=S.value.find(k=>r.parentItem!=null&&e.getKey(k.value)===e.getKey(r.parentItem));b!=null&&((o=e.getChildren(b.value))!=null&&o.every(k=>d.value.find(h=>e.getKey(h)===e.getKey(k)))?d.value=[...d.value,b.value]:d.value=d.value.filter(k=>e.getKey(k)!==e.getKey(b.value)),W(b))}}return Me({modelValue:d,selectedKeys:l,onSelect:r=>{var k;let o=h=>e.getKey(h??{})===e.getKey(r),b=e.multiple&&Array.isArray(d.value)?((k=d.value)==null?void 0:k.findIndex(o))!==-1:void 0;if(i(r,o),e.bubbleSelect&&e.multiple&&Array.isArray(d.value)){let h=S.value.find(_=>e.getKey(_.value)===e.getKey(r));h!=null&&W(h)}if(e.propagateSelect&&e.multiple&&Array.isArray(d.value)){let h=ee(e.getChildren(r)??[]);b?d.value=[...d.value].filter(_=>!h.some(E=>e.getKey(_??{})===e.getKey(E))):d.value=[...d.value,...h]}},expanded:x,onToggle(r){if(!(r&&e.getChildren(r)))return;let o=e.getKey(r)??r;x.value.includes(o)?x.value=x.value.filter(b=>b!==o):x.value.push(o)},getKey:e.getKey,getChildren:e.getChildren,items:K,expandedItems:S,disabled:q,multiple:t,dir:g,propagateSelect:I,bubbleSelect:a,isVirtual:L,virtualKeydownHook:v,handleMultipleReplace:n}),(r,o)=>(A(),z(p(Fe),{ref_key:"rovingFocusGroupRef",ref:y,"as-child":"",orientation:"vertical",dir:p(g)},{default:w(()=>[F(p(ae),{role:"tree",as:r.as,"as-child":r.asChild,"aria-multiselectable":p(t)?!0:void 0,onKeydown:[C,Y(X(J,["shift"]),["up","down"])]},{default:w(()=>[$(r.$slots,"default",{flattenItems:S.value,modelValue:p(d),expanded:p(x)})]),_:3},8,["as","as-child","aria-multiselectable","onKeydown"])]),_:3},8,["dir"]))}}),Ne="tree.select",De="tree.toggle",Ge=le({inheritAttrs:!1,__name:"TreeItem",props:{value:{type:null,required:!0},level:{type:Number,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"li"}},emits:["select","toggle"],setup(s,{expose:m,emit:e}){let f=s,K=e,t=We(),{getItems:q}=pe(),I=V(()=>!!t.getChildren(f.value)),u=V(()=>{let i=t.getKey(f.value);return t.expanded.value.includes(i)}),a=V(()=>{let i=t.getKey(f.value);return t.selectedKeys.value.includes(i)}),c=V(()=>{if(t.bubbleSelect.value&&I.value&&Array.isArray(t.modelValue.value)){let i=ee(t.getChildren(f.value)||[]);return i.some(n=>t.modelValue.value.find(l=>t.getKey(l)===t.getKey(n)))&&!i.every(n=>t.modelValue.value.find(l=>t.getKey(l)===t.getKey(n)))}else return t.propagateSelect.value&&a.value&&I.value&&Array.isArray(t.modelValue.value)?!ee(t.getChildren(f.value)||[]).every(i=>t.modelValue.value.find(n=>t.getKey(n)===t.getKey(i))):void 0});function g(i){if(I.value)if(u.value){let n=q().map(C=>C.ref),l=ne(),T=n.indexOf(l),S=[...n].slice(T).find(C=>Number(C.getAttribute("data-indent"))===f.level+1);S&&S.focus()}else x(i)}function y(i){if(u.value)x(i);else{let n=q().map(C=>C.ref),l=ne(),T=n.indexOf(l),S=[...n].slice(0,T).reverse().find(C=>Number(C.getAttribute("data-indent"))===f.level-1);S&&S.focus()}}async function L(i){K("select",i),!(i!=null&&i.defaultPrevented)&&t.onSelect(f.value)}async function v(i){K("toggle",i),!(i!=null&&i.defaultPrevented)&&t.onToggle(f.value)}async function d(i){if(!i)return;let n={originalEvent:i,value:f.value,isExpanded:u.value,isSelected:a.value};ve(Ne,L,n)}async function x(i){if(!i)return;let n={originalEvent:i,value:f.value,isExpanded:u.value,isSelected:a.value};ve(De,v,n)}return m({isExpanded:u,isSelected:a,isIndeterminate:c,handleToggle:()=>t.onToggle(f.value),handleSelect:()=>t.onSelect(f.value)}),(i,n)=>(A(),z(p(fe),{"as-child":"",value:i.value,"allow-shift-key":""},{default:w(()=>[F(p(ae),O(i.$attrs,{role:"treeitem",as:i.as,"as-child":i.asChild,"aria-selected":a.value,"aria-expanded":I.value?u.value:void 0,"aria-level":i.level,"data-indent":i.level,"data-selected":a.value?"":void 0,"data-expanded":u.value?"":void 0,onKeydown:[Y(X(d,["self","prevent"]),["enter","space"]),n[0]||(n[0]=Y(X(l=>p(t).dir.value==="ltr"?g(l):y(l),["prevent"]),["right"])),n[1]||(n[1]=Y(X(l=>p(t).dir.value==="ltr"?y(l):g(l),["prevent"]),["left"]))],onClick:n[2]||(n[2]=X(l=>{d(l),x(l)},["stop"]))}),{default:w(()=>[$(i.$slots,"default",{isExpanded:u.value,isSelected:a.value,isIndeterminate:c.value,handleSelect:()=>p(t).onSelect(i.value),handleToggle:()=>p(t).onToggle(i.value)})]),_:3},16,["as","as-child","aria-selected","aria-expanded","aria-level","data-indent","data-selected","data-expanded","onKeydown"])]),_:3},8,["value"]))}}),Pe={slots:{root:"relative isolate",item:"",listWithChildren:"ms-4.5 border-s border-default",itemWithChildren:"ps-1.5 -ms-px",link:"relative group w-full flex items-center text-sm before:absolute before:inset-y-px before:inset-x-0 before:z-[-1] before:rounded-md focus:outline-none focus-visible:outline-none focus-visible:before:ring-inset focus-visible:before:ring-2",linkLeadingIcon:"shrink-0",linkLabel:"truncate",linkTrailing:"ms-auto inline-flex gap-1.5 items-center",linkTrailingIcon:"shrink-0 transform transition-transform duration-200 group-data-[expanded=true]:rotate-180"},variants:{color:{primary:{link:"focus-visible:before:ring-primary"},secondary:{link:"focus-visible:before:ring-secondary"},success:{link:"focus-visible:before:ring-success"},info:{link:"focus-visible:before:ring-info"},warning:{link:"focus-visible:before:ring-warning"},error:{link:"focus-visible:before:ring-error"},neutral:{link:"focus-visible:before:ring-inverted"}},size:{xs:{link:"px-2 py-1 text-xs gap-1",linkLeadingIcon:"size-4",linkTrailingIcon:"size-4"},sm:{link:"px-2.5 py-1.5 text-xs gap-1.5",linkLeadingIcon:"size-4",linkTrailingIcon:"size-4"},md:{link:"px-2.5 py-1.5 text-sm gap-1.5",linkLeadingIcon:"size-5",linkTrailingIcon:"size-5"},lg:{link:"px-3 py-2 text-sm gap-2",linkLeadingIcon:"size-5",linkTrailingIcon:"size-5"},xl:{link:"px-3 py-2 text-base gap-2",linkLeadingIcon:"size-6",linkTrailingIcon:"size-6"}},selected:{true:{link:"before:bg-elevated"},false:{link:["hover:not-disabled:text-highlighted hover:not-disabled:before:bg-elevated/50","transition-colors before:transition-colors"]}},disabled:{true:{link:"cursor-not-allowed opacity-75"}}},compoundVariants:[{color:"primary",selected:!0,class:{link:"text-primary"}},{color:"secondary",selected:!0,class:{link:"text-secondary"}},{color:"success",selected:!0,class:{link:"text-success"}},{color:"info",selected:!0,class:{link:"text-info"}},{color:"warning",selected:!0,class:{link:"text-warning"}},{color:"error",selected:!0,class:{link:"text-error"}},{color:"neutral",selected:!0,class:{link:"text-highlighted"}}],defaultVariants:{color:"primary",size:"md"}},He=["disabled","data-expanded"],Xe=Object.assign({inheritAttrs:!1},{__name:"Tree",props:{as:{type:null,required:!1},color:{type:null,required:!1},size:{type:null,required:!1},getKey:{type:Function,required:!1},labelKey:{type:null,required:!1,default:"label"},trailingIcon:{type:[String,Object],required:!1},expandedIcon:{type:[String,Object],required:!1},collapsedIcon:{type:[String,Object],required:!1},items:{type:null,required:!1},modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},expanded:{type:Array,required:!1},defaultExpanded:{type:Array,required:!1},selectionBehavior:{type:String,required:!1},propagateSelect:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},bubbleSelect:{type:Boolean,required:!1}},emits:["update:modelValue","update:expanded"],setup(s,{emit:m}){let e=s,f=m,K=ge(),t=Se(),q=_e(qe(e,"as","items","multiple","expanded","disabled","propagateSelect","bubbleSelect"),f),[I,u]=Te(),a=V(()=>{var v;return oe({extend:oe(Pe),...((v=t.ui)==null?void 0:v.tree)||{}})({color:e.color,size:e.size})});function c(v){return Ke(v,e.labelKey)}function g(v){return e.getKey&&e.getKey(v)||c(v)}function y(v){var i;let d=v.defaultExpanded?g(v):null,x=((i=v.children)==null?void 0:i.flatMap(n=>y(n)))??[];return[d,...x].filter(Boolean)}let L=V(()=>{var v;return e.defaultExpanded??((v=e.items)==null?void 0:v.flatMap(d=>y(d)))});return(v,d)=>{var x;return A(),P(de,null,[F(p(I),null,{default:w(({items:i,level:n})=>[(A(!0),P(de,null,be(i,(l,T)=>{var S,C,J,W;return A(),z(p(Ge),{key:`${n}-${T}`,level:n,value:l,class:B(n>1?a.value.itemWithChildren({class:[(S=e.ui)==null?void 0:S.itemWithChildren,(C=l.ui)==null?void 0:C.itemWithChildren]}):a.value.item({class:[(J=e.ui)==null?void 0:J.item,(W=l.ui)==null?void 0:W.item]})),onToggle:l.onToggle,onSelect:l.onSelect},{default:w(({isExpanded:r,isSelected:o})=>{var b,k,h;return[$(v.$slots,l.slot?`${l.slot}-wrapper`:"item-wrapper",O({ref_for:!0},{index:T,level:n,expanded:r,selected:o},{item:l}),()=>{var _,E;return[Ie("button",{type:"button",disabled:l.disabled||s.disabled,"data-expanded":r,class:B(a.value.link({class:[(_=e.ui)==null?void 0:_.link,(E=l.ui)==null?void 0:E.link,l.class],selected:o,disabled:l.disabled||s.disabled}))},[$(v.$slots,l.slot||"item",O({ref_for:!0},{index:T,level:n,expanded:r,selected:o},{item:l}),()=>{var R,Q,U,re,se;return[$(v.$slots,l.slot?`${l.slot}-leading`:"item-leading",O({ref_for:!0},{index:T,level:n,expanded:r,selected:o},{item:l}),()=>{var M,j,N,D,G;return[l.icon?(A(),z(Z,{key:0,name:l.icon,class:B(a.value.linkLeadingIcon({class:[(M=e.ui)==null?void 0:M.linkLeadingIcon,(j=l.ui)==null?void 0:j.linkLeadingIcon]}))},null,8,["name","class"])):(N=l.children)!=null&&N.length?(A(),z(Z,{key:1,name:r?s.expandedIcon??p(t).ui.icons.folderOpen:s.collapsedIcon??p(t).ui.icons.folder,class:B(a.value.linkLeadingIcon({class:[(D=e.ui)==null?void 0:D.linkLeadingIcon,(G=l.ui)==null?void 0:G.linkLeadingIcon]}))},null,8,["name","class"])):H("",!0)]}),c(l)||K[l.slot?`${l.slot}-label`:"item-label"]?(A(),P("span",{key:0,class:B(a.value.linkLabel({class:[(R=e.ui)==null?void 0:R.linkLabel,(Q=l.ui)==null?void 0:Q.linkLabel]}))},[$(v.$slots,l.slot?`${l.slot}-label`:"item-label",O({ref_for:!0},{index:T,level:n,expanded:r,selected:o},{item:l}),()=>[ye(he(c(l)),1)])],2)):H("",!0),l.trailingIcon||(U=l.children)!=null&&U.length||K[l.slot?`${l.slot}-trailing`:"item-trailing"]?(A(),P("span",{key:1,class:B(a.value.linkTrailing({class:[(re=e.ui)==null?void 0:re.linkTrailing,(se=l.ui)==null?void 0:se.linkTrailing]}))},[$(v.$slots,l.slot?`${l.slot}-trailing`:"item-trailing",O({ref_for:!0},{index:T,level:n,expanded:r,selected:o},{item:l}),()=>{var M,j,N,D,G;return[l.trailingIcon?(A(),z(Z,{key:0,name:l.trailingIcon,class:B(a.value.linkTrailingIcon({class:[(M=e.ui)==null?void 0:M.linkTrailingIcon,(j=l.ui)==null?void 0:j.linkTrailingIcon]}))},null,8,["name","class"])):(N=l.children)!=null&&N.length?(A(),z(Z,{key:1,name:s.trailingIcon??p(t).ui.icons.chevronDown,class:B(a.value.linkTrailingIcon({class:[(D=e.ui)==null?void 0:D.linkTrailingIcon,(G=l.ui)==null?void 0:G.linkTrailingIcon]}))},null,8,["name","class"])):H("",!0)]})],2)):H("",!0)]})],10,He)]}),(b=l.children)!=null&&b.length&&r?(A(),P("ul",{key:0,role:"group",class:B(a.value.listWithChildren({class:[(k=e.ui)==null?void 0:k.listWithChildren,(h=l.ui)==null?void 0:h.listWithChildren]}))},[F(p(u),{items:l.children,level:n+1},null,8,["items","level"])],2)):H("",!0)]}),_:2},1032,["level","value","class","onToggle","onSelect"])}),128))]),_:3}),F(p(je),O({...p(q),...v.$attrs},{"model-value":s.modelValue,"default-value":s.defaultValue,class:a.value.root({class:[(x=e.ui)==null?void 0:x.root,e.class]}),"get-key":g,"default-expanded":L.value,"selection-behavior":s.selectionBehavior}),{default:w(()=>[F(p(u),{items:s.items,level:1},null,8,["items"])]),_:1},16,["model-value","default-value","class","default-expanded","selection-behavior"])],64)}}});export{fe as n,Xe as t};
