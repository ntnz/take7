import{s as V}from"./chunk-BP1tGd43.min.js";import"./dist-gE_XXzPp.min.js";import{E as D,O as h,S as F,Xt as o,at as O,b as w,gt as v,ir as _,j as Y,jn as s,k as r,x,xn as j,y}from"./runtime-core.esm-bundler-DRZAYnQ2.min.js";import"./vue.runtime.esm-bundler-BlWQ9Hv9.min.js";import{n as A,t as N,v as $}from"./Button-DgwZaK7A.min.js";import"./log-BpAY2Wg4.js";import"./core-8AzxaLAT.min.js";import"./vue-router-D04l_ZRW.min.js";import{n as z,t as I}from"./Tooltip-8BMqxvlv.min.js";import"./VisuallyHiddenInput-DC-luDZL.min.js";import"./usePrimitiveElement-VQ4eLKTw.min.js";import"./floating-ui.core-BwRAMOlv.min.js";import"./Label-B229t_lK.min.js";import{t as L}from"./Separator-C2-jR5Xu.min.js";import{t as U}from"./Switch-szFD6byv.min.js";import{t as W}from"./useToast-DGTAcHwR.min.js";import{t as Z}from"./api-j1hi8yn9.js";import"./index.browser-DQZXIZaU.min.js";import{a as H,t as K}from"./settings-EuhnKFOO.js";import"./isObject-DkMBgCmn.min.js";import"./_toKey-lf-76zFF.min.js";import"./_initCloneObject-7WDIrBbB.min.js";import"./set-D10waSiW.min.js";import"./get-CMyps7rf.min.js";import"./virtualRef-CZBazqxr.js";import{t as q}from"./useGenerateCache-MY04U1_j.js";import{t as R}from"./dayjs.min-BAjIZEkX.min.js";import{t as X}from"./FormField-3McXbx6Q.min.js";import{n as J,t as Q}from"./PageCard-PGYG4KWm.min.js";var ee=V(R()),ie=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],ae=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],te=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],re=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],S=(e,i,t)=>{let n=e;return typeof i=="string"||Array.isArray(i)?n=e.toLocaleString(i,t):(i===!0||t!==void 0)&&(n=e.toLocaleString(void 0,t)),n},B=e=>{if(typeof e=="number")return Math.log10(e);let i=e.toString(10);return i.length+Math.log10(`0.${i.slice(0,15)}`)},ne=e=>typeof e=="number"?Math.log(e):B(e)*Math.log(10),le=(e,i)=>{if(typeof e=="number")return e/i;let t=e/BigInt(i),n=e%BigInt(i);return Number(t)+Number(n)/i},C=(e,i)=>{if(i===void 0)return e;if(typeof i!="number"||!Number.isSafeInteger(i)||i<0)throw TypeError(`Expected fixedWidth to be a non-negative integer, got ${typeof i}: ${i}`);return i===0?e:e.length<i?e.padStart(i," "):e},se=e=>{let{minimumFractionDigits:i,maximumFractionDigits:t}=e;if(!(i===void 0&&t===void 0))return{...i!==void 0&&{minimumFractionDigits:i},...t!==void 0&&{maximumFractionDigits:t},roundingMode:"trunc"}};function oe(e,i){if(typeof e!="bigint"&&!Number.isFinite(e))throw TypeError(`Expected a finite number, got ${typeof e}: ${e}`);i={bits:!1,binary:!1,space:!0,nonBreakingSpace:!1,...i};let t=i.bits?i.binary?re:te:i.binary?ae:ie,n=i.space?i.nonBreakingSpace?"\xA0":" ":"",d=typeof e=="number"?e===0:e===0n;if(i.signed&&d){let m=` 0${n}${t[0]}`;return C(m,i.fixedWidth)}let c=e<0,g=c?"-":i.signed?"+":"";c&&(e=-e);let a=se(i),l;if(e<1){let m=S(e,i.locale,a);l=g+m+n+t[0]}else{let m=Math.min(Math.floor(i.binary?ne(e)/Math.log(1024):B(e)/3),t.length-1);if(e=le(e,(i.binary?1024:1e3)**m),!a){let f=Math.max(3,Math.floor(e).toString().length);e=e.toPrecision(f)}let u=S(Number(e),i.locale,a),p=t[m];l=g+u+n+p}return C(l,i.fixedWidth)}var de={class:"flex gap-2 items-center"},me={class:"flex gap-2 items-center"},pe={class:"font-semibold"},ce={key:0,class:"flex gap-1"},ue=Y({__name:"Performance",setup(e){let i=Z();W();let t=K(),n=H(),d=j({last_generated:null,last_full_build:null,file_url:null,file_size:null});function c(){i.get("admin/settings/cache/index").then(a=>{d.value=a.data.cache})}async function g(){q(a=>{c()})}return O(()=>{c()}),(a,l)=>{let m=Q,u=U,p=X,f=L,M=$,k=A,E=z,G=N,P=I,T=J;return v(),w(T,{id:"performance",state:{}},{default:o(()=>[r(m,{title:a.i18n.__("Performance","windpress"),variant:"naked",orientation:"horizontal",class:"mb-4"},null,8,["title"]),r(m,{variant:"subtle"},{default:o(()=>[r(p,{label:a.i18n.__("Use cached CSS","windpress"),description:a.i18n.__("Serve the cached CSS file when available instead of generating the style dynamically using the Compiler.","windpress"),class:"flex items-center justify-between gap-4"},{default:o(()=>[r(u,{modelValue:s(t).virtualOptions("performance.cache.enabled",!1).value,"onUpdate:modelValue":l[0]||(l[0]=b=>s(t).virtualOptions("performance.cache.enabled",!1).value=b),label:a.i18n.__("Enable Cached CSS","windpress"),ui:{label:"whitespace-nowrap"},class:"flex-row-reverse gap-2"},null,8,["modelValue","label"])]),_:1},8,["label","description"]),r(f),r(p,{label:a.i18n.__("Admin always uses Compiler","windpress"),description:a.i18n.__("Exclude the Admin from the cached CSS to ensure they always use the Compiler.","windpress"),class:"flex items-center justify-between gap-4"},{default:o(()=>[r(u,{modelValue:s(t).virtualOptions("performance.cache.exclude_admin",!1).value,"onUpdate:modelValue":l[1]||(l[1]=b=>s(t).virtualOptions("performance.cache.exclude_admin",!1).value=b),label:a.i18n.__("Exclude Admin","windpress"),ui:{label:"whitespace-nowrap"},class:"flex-row-reverse gap-2"},null,8,["modelValue","label"])]),_:1},8,["label","description"]),r(f),r(p,{label:a.i18n.__("Cached CSS loading method","windpress"),description:a.i18n.__("Load cached CSS as an inline instead of an external file.","windpress"),class:"flex items-center justify-between gap-4"},{default:o(()=>[r(u,{modelValue:s(t).virtualOptions("performance.cache.inline_load",!1).value,"onUpdate:modelValue":l[2]||(l[2]=b=>s(t).virtualOptions("performance.cache.inline_load",!1).value=b),label:a.i18n.__("Inline Cached CSS","windpress"),ui:{label:"whitespace-nowrap"},class:"flex-row-reverse gap-2"},null,8,["modelValue","label"])]),_:1},8,["label","description"]),r(f),r(p,{label:a.i18n.__("Generate the cached CSS","windpress"),class:"flex items-center justify-between gap-4"},D({default:o(()=>[r(P,{"delay-duration":0,text:a.i18n.__("Generate the cached CSS file","windpress")},{default:o(()=>[r(G,{color:"primary",variant:"subtle",onClick:g,disabled:s(n).isBusy,loading:s(n).isBusy&&s(n).hasTask("settings.performance.cached_css.generate")},{default:o(()=>[h(_(s(n).isBusy&&s(n).hasTask("settings.performance.cached_css.generate")?a.i18n.__("Generating...","windpress"):a.i18n.__("Generate","windpress")),1)]),_:1},8,["disabled","loading"])]),_:1},8,["text"])]),_:2},[d.value.last_generated?{name:"description",fn:o(()=>[y("div",de,[y("div",me,[y("span",pe,_(a.i18n.__("Last Generated","windpress"))+": ",1),d.value.file_size?(v(),F("span",ce,[h(_(s(ee.default)(d.value.last_generated*1e3).format("YYYY-MM-DD HH:mm:ss"))+" ",1),r(k,{to:d.value.file_url,target:"_blank",class:"underline"},{default:o(()=>[r(M,{name:"lucide:external-link"})]),_:1},8,["to"])])):x("",!0)]),d.value.file_size?(v(),w(E,{key:0,color:"success",variant:"subtle"},{default:o(()=>[h(_(s(oe)(d.value.file_size,{maximumFractionDigits:2,space:!0})),1)]),_:1})):x("",!0)])]),key:"0"}:void 0]),1032,["label"])]),_:1})]),_:1})}}});export{ue as default};
