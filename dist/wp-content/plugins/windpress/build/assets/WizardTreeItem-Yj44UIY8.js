import{s as Y,t as J}from"./chunk-BP1tGd43.min.js";import{Ct as B,E as _e,Kt as Q,S as H,Xt as K,b as Ke,er as M,gt as $,ir as me,j as ge,k as R,v as $e,x as ee,xn as P,y as E}from"./runtime-core.esm-bundler-DRZAYnQ2.min.js";import{c as z}from"./vue.runtime.esm-bundler-BlWQ9Hv9.min.js";import{t as Re,v as We}from"./Button-DgwZaK7A.min.js";import{i as te}from"./core-8AzxaLAT.min.js";import{t as Xe}from"./DropdownMenu-GYMMEqyI.min.js";import{n as V}from"./index.browser-DQZXIZaU.min.js";import{t as Ue}from"./Input-CwtauoHz.min.js";function Ye(e,t){let n=P([]),r=$e(()=>{let u=[];function p(a){for(let o of a)o.value&&u.push(o.value),o.children&&o.children.length>0&&p(o.children)}return p(n.value),u});function f(u){return Object.entries(u||{}).map(([p,a])=>{if(p==="$value")return null;let o={value:V(7),var:{key:p,value:a},defaultExpanded:!0,onToggle:c=>{c.preventDefault()}};if(typeof a=="object"&&a){o.children=f(a);let c=a;c.$value===void 0?o.var.value="":o.var.value=c.$value}else o.var.value=a;return o}).filter(p=>p!==null)}function v(){try{let u=a=>{var o;if(!((o=a.var)!=null&&o.key))return null;if(a.children&&a.children.length>0){let c={};return a.children.forEach(i=>{let y=u(i);y&&Object.assign(c,y)}),a.var.value!==void 0&&a.var.value!==null&&(c.$value=a.var.value),{[a.var.key]:c}}else if(a.var.value!==void 0&&a.var.value!==null)return{[a.var.key]:a.var.value};return null},p={};n.value.forEach(a=>{let o=u(a);o&&Object.assign(p,o)}),t.value.namespaces[e]=p}catch(u){console.error("Error updating theme from items:",u)}}function l(u,p){for(let a of u){if(a.value===p)return a;if(a.children&&a.children.length>0){let o=l(a.children,p);if(o)return o}}}function d(u,p){for(let a of u){if(a.children&&a.children.includes(p))return a;if(a.children){let o=d(a.children,p);if(o)return o}}}function s(u,p=!0){let a=u.split("-"),o=n.value,c=null;for(let i=0;i<a.length;i++){let y=a[i],m=i===a.length-1,b=o.find(O=>O.var.key===y);if(!b){if(!p)return null;let O={value:V(7),var:{key:y,value:""},defaultExpanded:!0,children:[],onToggle:x=>{x.preventDefault()}};o.push(O),b=O}c=b,m||(c.children||(c.children=[]),o=c.children)}return c}function g(u,p,a){let o=l(n.value,u);if(!o){console.error("Item not found for uid:",u);return}let c={value:V(7),var:{key:p||"",value:a===void 0?"":a},defaultExpanded:!0,children:[],onToggle:i=>{i.preventDefault()}};o.children?o.children.push(c):o.children=[c]}function w(u,p,a){var y;let o={value:V(7),var:{key:p||"",value:a===void 0?"":a},defaultExpanded:!0,children:[],onToggle:m=>{m.preventDefault()}};if(!u){n.value.push(o);return}let c=l(n.value,u);if(!c)return;let i=d(n.value,c);if(i&&i.children){let m=(y=i.children)==null?void 0:y.indexOf(c);m!==void 0&&m>=0&&i.children.splice(m+1,0,o)}else{let m=n.value.indexOf(c);m>=0&&n.value.splice(m+1,0,o)}}function h(u){let p=l(n.value,u);if(!p){console.error("Item not found for uid:",u);return}let a=d(n.value,p);if(a&&a.children){let o=a.children.indexOf(p);o>=0&&a.children.splice(o,1)}else{let o=n.value.indexOf(p);o>=0&&n.value.splice(o,1)}}function D(){n.value=f(t.value.namespaces[e])}return{expandedTree:r,items:n,namespaceToTree:f,updateThemeFromItems:v,findItemByUid:l,findOrCreateItemByKey:s,addChild:g,addNext:w,deleteItem:h,initializeItems:D}}function Be(e){if(Array.isArray(e))return e}function He(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,f,v,l,d=[],s=!0,g=!1;try{if(v=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=v.call(n)).done)&&(d.push(r.value),d.length!==t);s=!0);}catch(w){g=!0,f=w}finally{try{if(!s&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(g)throw f}}return d}}function ne(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ye(e,t){if(e){if(typeof e=="string")return ne(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ne(e,t):void 0}}function ze(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function he(e,t){return Be(e)||He(e,t)||ye(e,t)||ze()}var be=J((e=>{Object.defineProperty(e,"__esModule",{value:!0});function t(n,r){var f=r.type,v=r.listener,l=r.options;return n.addEventListener(f,v,l),function(){n.removeEventListener(f,v,l)}}e.bind=t})),Ve=J((e=>{var t=e&&e.__assign||function(){return t=Object.assign||function(l){for(var d,s=1,g=arguments.length;s<g;s++)for(var w in d=arguments[s],d)Object.prototype.hasOwnProperty.call(d,w)&&(l[w]=d[w]);return l},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var n=be();function r(l){if(l!==void 0)return typeof l=="boolean"?{capture:l}:l}function f(l,d){return d==null?l:t(t({},l),{options:t(t({},r(d)),r(l.options))})}function v(l,d,s){var g=d.map(function(w){var h=f(w,s);return(0,n.bind)(l,h)});return function(){g.forEach(function(w){return w()})}}e.bindAll=v})),G=J((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bindAll=e.bind=void 0;var t=be();Object.defineProperty(e,"bind",{enumerable:!0,get:function(){return t.bind}});var n=Ve();Object.defineProperty(e,"bindAll",{enumerable:!0,get:function(){return n.bindAll}})})),Ge="data-pdnd-honey-pot";function we(e){return e instanceof Element&&e.hasAttribute("data-pdnd-honey-pot")}function De(e){var t=document.elementsFromPoint(e.x,e.y),n=he(t,2),r=n[0],f=n[1];return r?we(r)?f??null:r:null}function W(e){"@babel/helpers - typeof";return W=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W(e)}function qe(e,t){if(W(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(W(r)!="object")return r;throw TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ze(e){var t=qe(e,"string");return W(t)=="symbol"?t:t+""}function re(e,t,n){return(t=Ze(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Je=2147483647,ae=Y(G());function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t];t%2?Oe(Object(n),!0).forEach(function(r){re(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var X=2,Te=X/2;function Qe(e){return{x:Math.floor(e.x),y:Math.floor(e.y)}}function et(e){return{x:e.x-Te,y:e.y-Te}}function tt(e){return{x:Math.max(e.x,0),y:Math.max(e.y,0)}}function nt(e){return{x:Math.min(e.x,window.innerWidth-X),y:Math.min(e.y,window.innerHeight-X)}}function Se(e){var t=e.client,n=nt(tt(et(Qe(t))));return DOMRect.fromRect({x:n.x,y:n.y,width:X,height:X})}function Ee(e){var t=e.clientRect;return{left:`${t.left}px`,top:`${t.top}px`,width:`${t.width}px`,height:`${t.height}px`}}function rt(e){var t=e.client,n=e.clientRect;return t.x>=n.x&&t.x<=n.x+n.width&&t.y>=n.y&&t.y<=n.y+n.height}function at(e){var t=e.initial,n=document.createElement("div");n.setAttribute(Ge,"true");var r=Se({client:t});Object.assign(n.style,xe(xe({backgroundColor:"transparent",position:"fixed",padding:0,margin:0,boxSizing:"border-box"},Ee({clientRect:r})),{},{pointerEvents:"auto",zIndex:Je})),document.body.appendChild(n);var f=(0,ae.bind)(window,{type:"pointermove",listener:function(v){var l={x:v.clientX,y:v.clientY};r=Se({client:l}),Object.assign(n.style,Ee({clientRect:r}))},options:{capture:!0}});return function(v){var l=v.current;if(f(),rt({client:l,clientRect:r})){n.remove();return}function d(){s(),n.remove()}var s=(0,ae.bindAll)(window,[{type:"pointerdown",listener:d},{type:"pointermove",listener:d},{type:"focusin",listener:d},{type:"focusout",listener:d},{type:"dragstart",listener:d},{type:"dragenter",listener:d},{type:"dragover",listener:d}],{capture:!0})}}function ot(){var e=null;function t(){return e=null,(0,ae.bind)(window,{type:"pointermove",listener:function(r){e={x:r.clientX,y:r.clientY}},options:{capture:!0}})}function n(){var r=null;return function(f){var v=f.eventName,l=f.payload;if(v==="onDragStart"){var d=l.location.initial.input,s=e??{x:d.clientX,y:d.clientY};r=at({initial:s})}if(v==="onDrop"){var g,w=l.location.current.input;(g=r)==null||g({current:{x:w.clientX,y:w.clientY}}),r=null,e=null}}}return{bindEvents:t,getOnPostDispatch:n}}function lt(e){if(Array.isArray(e))return ne(e)}function it(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ut(){throw TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function je(e){return lt(e)||it(e)||ye(e)||ut()}function N(e){var t=null;return function(){if(!t){var n=[...arguments];t={result:e.apply(this,n)}}return t.result}}var ct=N(function(){return navigator.userAgent.includes("Firefox")}),oe=N(function(){var e=navigator,t=e.userAgent;return t.includes("AppleWebKit")&&!t.includes("Chrome")}),dt=Y(G()),le={isLeavingWindow:Symbol("leaving"),isEnteringWindow:Symbol("entering")};function st(e){var t=e.dragLeave;return oe()?t.hasOwnProperty(le.isLeavingWindow):!1}(function(){if(typeof window>"u"||!oe())return;function e(){return{enterCount:0,isOverWindow:!1}}var t=e();function n(){t=e()}(0,dt.bindAll)(window,[{type:"dragstart",listener:function(){t.enterCount=0,t.isOverWindow=!0}},{type:"drop",listener:n},{type:"dragend",listener:n},{type:"dragenter",listener:function(r){!t.isOverWindow&&t.enterCount===0&&(r[le.isEnteringWindow]=!0),t.isOverWindow=!0,t.enterCount++}},{type:"dragleave",listener:function(r){t.enterCount--,t.isOverWindow&&t.enterCount===0&&(r[le.isLeavingWindow]=!0,t.isOverWindow=!1)}}],{capture:!0})})();function ft(e){return"nodeName"in e}function pt(e){return ft(e)&&e.ownerDocument!==document}function vt(e){var t=e.dragLeave,n=t.type,r=t.relatedTarget;return n==="dragleave"?oe()?st({dragLeave:t}):r==null?!0:ct()?pt(r):r instanceof HTMLIFrameElement:!1}function mt(e){var t=e.onDragEnd;return[{type:"pointermove",listener:(function(){var n=0;return function(){if(n<20){n++;return}t()}})()},{type:"pointerdown",listener:t}]}function U(e){return{altKey:e.altKey,button:e.button,buttons:e.buttons,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY}}var ie=(function(e){var t=[],n=null,r=function(){t=[...arguments],!n&&(n=requestAnimationFrame(function(){n=null,e.apply(void 0,t)}))};return r.cancel=function(){n&&(n=(cancelAnimationFrame(n),null))},r})(function(e){return e()}),q=(function(){var e=null;function t(r){e={frameId:requestAnimationFrame(function(){e=null,r()}),fn:r}}function n(){e&&(e=(cancelAnimationFrame(e.frameId),e.fn(),null))}return{schedule:t,flush:n}})();function gt(e){var t=e.source,n=e.initial,r=e.dispatchEvent,f={dropTargets:[]};function v(l){r(l),f={dropTargets:l.payload.location.current.dropTargets}}return{start:function(l){var d=l.nativeSetDragImage,s={current:n,previous:f,initial:n};v({eventName:"onGenerateDragPreview",payload:{source:t,location:s,nativeSetDragImage:d}}),q.schedule(function(){v({eventName:"onDragStart",payload:{source:t,location:s}})})},dragUpdate:function(l){var d=l.current;q.flush(),ie.cancel(),v({eventName:"onDropTargetChange",payload:{source:t,location:{initial:n,previous:f,current:d}}})},drag:function(l){var d=l.current;ie(function(){q.flush(),v({eventName:"onDrag",payload:{source:t,location:{initial:n,previous:f,current:d}}})})},drop:function(l){var d=l.current,s=l.updatedSourcePayload;q.flush(),ie.cancel(),v({eventName:"onDrop",payload:{source:s??t,location:{current:d,previous:f,initial:n}}})}}}var yt=Y(G()),ue={isActive:!1};function Ae(){return!ue.isActive}function ht(e){return e.dataTransfer?e.dataTransfer.setDragImage.bind(e.dataTransfer):null}function bt(e){var t=e.current,n=e.next;if(t.length!==n.length)return!0;for(var r=0;r<t.length;r++)if(t[r].element!==n[r].element)return!0;return!1}function wt(e){var t=e.event,n=e.dragType,r=e.getDropTargetsOver,f=e.dispatchEvent;if(!Ae())return;var v=Dt({event:t,dragType:n,getDropTargetsOver:r});ue.isActive=!0;var l={current:v};ce({event:t,current:v.dropTargets});var d=gt({source:n.payload,dispatchEvent:f,initial:v});function s(u){var p=bt({current:l.current.dropTargets,next:u.dropTargets});l.current=u,p&&d.dragUpdate({current:l.current})}function g(u){var p=U(u),a=we(u.target)?De({x:p.clientX,y:p.clientY}):u.target,o=r({target:a,input:p,source:n.payload,current:l.current.dropTargets});o.length&&(u.preventDefault(),ce({event:u,current:o})),s({dropTargets:o,input:p})}function w(){l.current.dropTargets.length&&s({dropTargets:[],input:l.current.input}),d.drop({current:l.current,updatedSourcePayload:null}),h()}function h(){ue.isActive=!1,D()}var D=(0,yt.bindAll)(window,[{type:"dragover",listener:function(u){g(u),d.drag({current:l.current})}},{type:"dragenter",listener:g},{type:"dragleave",listener:function(u){vt({dragLeave:u})&&(s({input:l.current.input,dropTargets:[]}),n.startedFrom==="external"&&w())}},{type:"drop",listener:function(u){if(l.current={dropTargets:l.current.dropTargets,input:U(u)},!l.current.dropTargets.length){w();return}u.preventDefault(),ce({event:u,current:l.current.dropTargets}),d.drop({current:l.current,updatedSourcePayload:n.type==="external"?n.getDropPayload(u):null}),h()}},{type:"dragend",listener:function(u){l.current={dropTargets:l.current.dropTargets,input:U(u)},w()}}].concat(je(mt({onDragEnd:w}))),{capture:!0});d.start({nativeSetDragImage:ht(t)})}function ce(e){var r;var t=e.event,n=(r=e.current[0])==null?void 0:r.dropEffect;n!=null&&t.dataTransfer&&(t.dataTransfer.dropEffect=n)}function Dt(e){var t=e.event,n=e.dragType,r=e.getDropTargetsOver,f=U(t);if(n.startedFrom==="external")return{input:f,dropTargets:[]};var v=r({input:f,source:n.payload,target:t.target,current:[]});return{input:f,dropTargets:v}}var Pe={canStart:Ae,start:wt},de=new Map;function Ot(e){var t=e.typeKey,n=e.mount,r=de.get(t);if(r)return r.usageCount++,r;var f={typeKey:t,unmount:n(),usageCount:1};return de.set(t,f),f}function xt(e){var t=Ot(e);return function(){t.usageCount--,!(t.usageCount>0)&&(t.unmount(),de.delete(e.typeKey))}}function F(){var e=[...arguments];return function(){e.forEach(function(t){return t()})}}function Ie(e,t){var n=t.attribute,r=t.value;return e.setAttribute(n,r),function(){return e.removeAttribute(n)}}function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t];t%2?ke(Object(n),!0).forEach(function(r){re(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function se(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Tt(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,f=function(){};return{s:f,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(s){throw s},f}}throw TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var v,l=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var s=n.next();return l=s.done,s},e:function(s){d=!0,v=s},f:function(){try{l||n.return==null||n.return()}finally{if(d)throw v}}}}function Tt(e,t){if(e){if(typeof e=="string")return Ce(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ce(e,t):void 0}}function Ce(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function fe(e){return e.slice(0).reverse()}function St(e){var t=e.typeKey,n=e.defaultDropEffect,r=new WeakMap,f=`data-drop-target-for-${t}`,v=`[${f}]`;function l(u){return r.set(u.element,u),function(){return r.delete(u.element)}}function d(u){var p=F(Ie(u.element,{attribute:f,value:"true"}),l(u));return N(p)}function s(u){var T,S;var p=u.source,a=u.target,o=u.input,c=u.result,i=c===void 0?[]:c;if(a==null)return i;if(!(a instanceof Element))return a instanceof Node?s({source:p,target:a.parentElement,input:o,result:i}):i;var y=a.closest(v);if(y==null)return i;var m=r.get(y);if(m==null)return i;var b={input:o,source:p,element:m.element};if(m.canDrop&&!m.canDrop(b))return s({source:p,target:m.element.parentElement,input:o,result:i});var O=((T=m.getData)==null?void 0:T.call(m,b))??{},x=((S=m.getDropEffect)==null?void 0:S.call(m,b))??n,j={data:O,element:m.element,dropEffect:x,isActiveDueToStickiness:!1};return s({source:p,target:m.element.parentElement,input:o,result:[].concat(je(i),[j])})}function g(u){var p=u.eventName,a=u.payload,o=se(a.location.current.dropTargets),c;try{for(o.s();!(c=o.n()).done;){var i,y=c.value,m=r.get(y.element),b=I(I({},a),{},{self:y});m==null||(i=m[p])==null||i.call(m,b)}}catch(O){o.e(O)}finally{o.f()}}var w={onGenerateDragPreview:g,onDrag:g,onDragStart:g,onDrop:g,onDropTargetChange:function(u){var p=u.payload,a=new Set(p.location.current.dropTargets.map(function(_){return _.element})),o=new Set,c=se(p.location.previous.dropTargets),i;try{for(c.s();!(i=c.n()).done;){var y,m=i.value;o.add(m.element);var b=r.get(m.element),O=a.has(m.element),x=I(I({},p),{},{self:m});if(b==null||(y=b.onDropTargetChange)==null||y.call(b,x),!O){var j;b==null||(j=b.onDragLeave)==null||j.call(b,x)}}}catch(_){c.e(_)}finally{c.f()}var T=se(p.location.current.dropTargets),S;try{for(T.s();!(S=T.n()).done;){var k,A,C=S.value;if(!o.has(C.element)){var ve=I(I({},p),{},{self:C}),L=r.get(C.element);L==null||(k=L.onDropTargetChange)==null||k.call(L,ve),L==null||(A=L.onDragEnter)==null||A.call(L,ve)}}}catch(_){T.e(_)}finally{T.f()}}};function h(u){w[u.eventName](u)}function D(u){var p=u.source,a=u.target,o=u.input,c=u.current,i=s({source:p,target:a,input:o});if(i.length>=c.length)return i;for(var y=fe(c),m=fe(i),b=[],O=0;O<y.length;O++){var x,j=y[O],T=m[O];if(T!=null){b.push(T);continue}var S=b[O-1],k=y[O-1];if((S==null?void 0:S.element)!==(k==null?void 0:k.element))break;var A=r.get(j.element);if(!A)break;var C={input:o,source:p,element:A.element};if(A.canDrop&&!A.canDrop(C)||!((x=A.getIsSticky)!=null&&x.call(A,C)))break;b.push(I(I({},j),{},{isActiveDueToStickiness:!0}))}return fe(b)}return{dropTargetForConsumers:d,getIsOver:D,dispatchEvent:h}}function Et(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=jt(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,f=function(){};return{s:f,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(s){throw s},f}}throw TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var v,l=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var s=n.next();return l=s.done,s},e:function(s){d=!0,v=s},f:function(){try{l||n.return==null||n.return()}finally{if(d)throw v}}}}function jt(e,t){if(e){if(typeof e=="string")return Le(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Le(e,t):void 0}}function Le(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),n.push.apply(n,r)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t];t%2?Me(Object(n),!0).forEach(function(r){re(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Pt(){var e=new Set,t=null;function n(v){t&&(!v.canMonitor||v.canMonitor(t.canMonitorArgs))&&t.active.add(v)}function r(v){var l=At({},v);e.add(l),n(l);function d(){e.delete(l),t&&t.active.delete(l)}return N(d)}function f(v){var l=v.eventName,d=v.payload;if(l==="onGenerateDragPreview"){t={canMonitorArgs:{initial:d.location.initial,source:d.source},active:new Set};var s=Et(e),g;try{for(s.s();!(g=s.n()).done;){var w=g.value;n(w)}}catch(o){s.e(o)}finally{s.f()}}if(t){for(var h=Array.from(t.active),D=0,u=h;D<u.length;D++){var p=u[D];if(t.active.has(p)){var a;(a=p[l])==null||a.call(p,d)}}l==="onDrop"&&(t.active.clear(),t=null)}}return{dispatchEvent:f,monitorForConsumers:r}}function It(e){var t=e.typeKey,n=e.mount,r=e.dispatchEventToSource,f=e.onPostDispatch,v=e.defaultDropEffect,l=Pt(),d=St({typeKey:t,defaultDropEffect:v});function s(h){r==null||r(h),d.dispatchEvent(h),l.dispatchEvent(h),f==null||f(h)}function g(h){var D=h.event,u=h.dragType;Pe.start({event:D,dragType:u,getDropTargetsOver:d.getIsOver,dispatchEvent:s})}function w(){function h(){var D={canStart:Pe.canStart,start:g};return n(D)}return xt({typeKey:t,mount:h})}return{registerUsage:w,dropTarget:d.dropTargetForConsumers,monitor:l.monitorForConsumers}}var kt=N(function(){return navigator.userAgent.toLocaleLowerCase().includes("android")}),Ct="pdnd:android-fallback",Lt="text/plain",Mt="application/vnd.pdnd",Nt=Y(G()),Z=new WeakMap;function Ft(e){return Z.set(e.element,e),function(){Z.delete(e.element)}}var Ne=ot(),pe=It({typeKey:"element",defaultDropEffect:"move",mount:function(e){return F(Ne.bindEvents(),(0,Nt.bind)(document,{type:"dragstart",listener:function(t){var p,a;if(e.canStart(t)&&!t.defaultPrevented&&t.dataTransfer){var n=t.target;if(n instanceof HTMLElement){var r=Z.get(n);if(r){var f=U(t),v={element:r.element,dragHandle:r.dragHandle??null,input:f};if(r.canDrag&&!r.canDrag(v)){t.preventDefault();return}if(r.dragHandle){var l=De({x:f.clientX,y:f.clientY});if(!r.dragHandle.contains(l)){t.preventDefault();return}}var d=((p=r.getInitialDataForExternal)==null?void 0:p.call(r,v))??null;if(d)for(var s=0,g=Object.entries(d);s<g.length;s++){var w=he(g[s],2),h=w[0],D=w[1];t.dataTransfer.setData(h,D??"")}kt()&&!t.dataTransfer.types.includes("text/plain")&&!t.dataTransfer.types.includes("text/uri-list")&&t.dataTransfer.setData(Lt,Ct),t.dataTransfer.setData(Mt,"");var u={type:"element",payload:{element:r.element,dragHandle:r.dragHandle??null,data:((a=r.getInitialData)==null?void 0:a.call(r,v))??{}},startedFrom:"internal"};e.start({event:t,dragType:u})}}}}}))},dispatchEventToSource:function(e){var t,n,r=e.eventName,f=e.payload;(t=Z.get(f.source.element))==null||(n=t[r])==null||n.call(t,f)},onPostDispatch:Ne.getOnPostDispatch()}),_t=pe.dropTarget,Fe=pe.monitor;function Kt(e){var t=F(pe.registerUsage(),Ft(e),Ie(e.element,{attribute:"draggable",value:"true"}));return N(t)}function $t(e,t,n){let r=P(null),f=P(null);function v(a){return a.instruction?a.instruction:a.type?{type:a.type,currentLevel:a.currentLevel,indentPerLevel:a.indentPerLevel,desiredLevel:a.desiredLevel}:null}function l(a,o){for(let c=0;c<a.length;c++){if(a[c].value===o)return a.splice(c,1),!0;if(a[c].children&&l(a[c].children,o))return!0}return!1}function d(a,o,c){for(let i=0;i<a.length;i++){if(a[i].value===o)return a.splice(i,0,c),!0;if(a[i].children&&d(a[i].children,o,c))return!0}return!1}function s(a,o,c){for(let i=0;i<a.length;i++){if(a[i].value===o)return a.splice(i+1,0,c),!0;if(a[i].children&&s(a[i].children,o,c))return!0}return!1}function g(a,o,c){for(let i=0;i<a.length;i++){if(a[i].value===o)return a[i].children||(a[i].children=[]),a[i].children.unshift(c),!0;if(a[i].children&&g(a[i].children,o,c))return!0}return!1}function w(a,o,c=[]){for(let i of a){if(i.value===o)return c;if(i.children){let y=w(i.children,o,[...c,i.value]);if(y)return y}}}function h(a,o,c){let i=n(e.value,a),y=n(e.value,o);if(!i||!y){console.warn("Source or target item not found in current namespace - cross-namespace drag operations are not supported",{sourceItem:!!i,targetItem:!!y,itemId:a,targetId:o});return}if(l(e.value,a),c.type==="reorder-above")d(e.value,o,i);else if(c.type==="reorder-below")s(e.value,o,i);else if(c.type==="make-child")g(e.value,o,i);else if(c.type==="reparent"){let m=w(e.value,o);if(m&&c.desiredLevel!==void 0&&m.length>c.desiredLevel){let b=m[c.desiredLevel];s(e.value,b,i)}}t(),f.value=a,setTimeout(()=>{f.value=null},1e3)}function D(a,o){let c=n(e.value,a);if(!c)return!1;function i(y){if(!y.children)return!1;for(let m of y.children)if(m.value===o||i(m))return!0;return!1}return i(c)}function u(a){return r.value?a===r.value||D(r.value,a):!1}function p(a){return f.value===a}return Q(a=>{let o=F(Fe({onDrop(c){let{location:i,source:y}=c;if(!i.current.dropTargets.length)return;let m=y.data.id,b=i.current.dropTargets[0],O=b.data.id,x=v(b.data);x!==null&&h(m,O,x)}}));a(()=>{o()})}),Q(a=>{let o=F(Fe({onDragStart({source:c}){r.value=c.data.id},onDrop(c){let{location:i,source:y}=c;if(r.value=null,!i.current.dropTargets.length)return;let m=y.data.id,b=i.current.dropTargets[0],O=b.data.id,x=v(b.data);x===null?h(m,O,{type:"reorder-below"}):h(m,O,x)}}));a(()=>{r.value=null,o()})}),{draggedItemId:r,recentlyMovedItemId:f,shouldBeDimmed:u,wasRecentlyMoved:p,isDescendantOf:D,handleDragAndDrop:h}}var Rt={key:2,class:"absolute text-primary bg-primary/30 backdrop-blur-md px-4 py-2 rounded-lg pointer-events-none top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 font-medium whitespace-nowrap z-10 transition-all duration-150 ease-out"},Wt=ge({__name:"DraggableTreeItem",props:{item:{},level:{},hasChildren:{type:Boolean},isLast:{type:Boolean},isDescendantOf:{type:Function},onDelete:{type:Function}},setup(e){function t(h,D){let{input:u,element:p,indentPerLevel:a,currentLevel:o}=D,c=p.getBoundingClientRect(),i=u.clientY-c.top,y=u.clientX-c.left,m=c.height,b="reorder-below";return b=i<m*.33?"reorder-above":i>m*.67?"reorder-below":y>a*2?"make-child":"reorder-below",{...h,instruction:{type:b,currentLevel:o,indentPerLevel:a}}}function n(h){return h.instruction||null}let r=e,f=P(),v=P(),l=P(),d=P(!1),s=P(!1),g=P(null);function w(h){if(h.key==="Delete"&&r.onDelete){let D=h.target;if(D.tagName==="INPUT"||D.tagName==="TEXTAREA"||D.isContentEditable)return;h.preventDefault(),r.onDelete(r.item.value)}}return Q(h=>{let D=te(f),u=te(v),p=te(l);if(!D||!u||!p)return;let a={id:r.item.value,level:r.level},o=p.querySelector(".drag-and-drop-handler");if(!o){console.warn("No drag handle found for item:",r.item.value);return}let c=F(Kt({element:o,getInitialData:()=>a,onGenerateDragPreview:({nativeSetDragImage:i})=>{var y;if(i){let m=document.createElement("div");m.className="bg-default border border-default rounded-lg p-2 shadow-lg opacity-90 max-w-md font-sans";let b=p.cloneNode(!0);if(b.className="m-0 py-2 px-0 [&_*]:!bg-default [&_*]:!text-highlighted",m.appendChild(b),r.hasChildren&&((y=r.item.children)==null?void 0:y.length)){let T=document.createElement("div");T.className="ml-4 pl-2 border-l-2 border-default";let S=document.createElement("div");S.className="text-sm text-dimmed py-1",S.textContent=`+ ${r.item.children.length} nested item${r.item.children.length>1?"s":""}`,T.appendChild(S),m.appendChild(T)}document.body.appendChild(m);let O=o.getBoundingClientRect(),x=O.width/2,j=O.height/2;i(m,x,j),setTimeout(()=>{document.body.contains(m)&&document.body.removeChild(m)},100)}},onDragStart:()=>{d.value=!0},onDrop:()=>{d.value=!1}}),_t({element:D,getData:({input:i,element:y})=>{let m={id:r.item.value};return t(m,{input:i,element:y,indentPerLevel:16,currentLevel:r.level,block:[]})},canDrop:({source:i})=>{let y=i.data.id,m=r.item.value;return!(y===m||r.isDescendantOf&&r.isDescendantOf(y,m))},onDrag:({self:i})=>{g.value=n(i.data)},onDragEnter:({source:i})=>{i.data.id!==r.item.value&&(s.value=!0)},onDragLeave:()=>{s.value=!1,g.value=null},onDrop:()=>{s.value=!1,g.value=null},getIsSticky:()=>!0}));h(()=>c())}),(h,D)=>($(),H("div",{ref_key:"outerDropZoneRef",ref:f,class:M(["relative w-full px-2.5 py-1.5 transition-all duration-200 ease-out",{"bg-elevated":s.value}]),onKeydown:w,tabindex:"0"},[g.value?($(),H("div",{key:0,class:M(["absolute pointer-events-none border-primary transition-all duration-150 ease-out",{"!border-b-2 -bottom-px left-1 right-0":g.value.type==="reorder-below","!border-t-2 -top-px left-1 right-0":g.value.type==="reorder-above","!border-2 rounded top-0 bottom-0 bg-primary/10 w-full -left-px":g.value.type==="make-child"}])},null,2)):ee("",!0),g.value&&(g.value.type==="reorder-below"||g.value.type==="reorder-above")?($(),H("div",{key:1,class:M(["absolute pointer-events-none w-2 h-2 border-2 border-primary bg-transparent rounded-full -left-1 z-10 transition-all duration-150 ease-out",{"-bottom-1":g.value.type==="reorder-below","-top-1":g.value.type==="reorder-above"}])},null,2)):ee("",!0),g.value&&g.value.type==="make-child"?($(),H("div",Rt," Drop to nest inside ")):ee("",!0),E("div",{ref_key:"dropZoneRef",ref:v,class:"relative w-full transition-all duration-200 ease-out"},[E("div",{ref_key:"draggableRef",ref:l,class:M(["relative w-full py-4 transition-all duration-200 ease-out",{"is-being-dragged":d.value}])},[B(h.$slots,"default")],2)],512)],34))}}),Xt={class:"flex items-center gap-2 w-full"},Ut={class:"drag-and-drop-handler bg-elevated rounded p-1 hover:bg-accented cursor-grab"},Yt={class:"pointer-events-none absolute left-0 -top-2.5 text-highlighted text-xs font-medium px-1.5 transition-all peer-focus:-top-2.5 peer-focus:text-highlighted peer-focus:text-xs peer-focus:font-medium peer-placeholder-shown:text-sm peer-placeholder-shown:text-dimmed peer-placeholder-shown:top-1.5 peer-placeholder-shown:font-normal"},Bt={class:"inline-flex bg-default px-1"},Ht={class:"w-full"},zt={class:"inline-flex bg-default px-1"},Vt=ge({__name:"WizardTreeItem",props:{item:{},level:{},shouldBeDimmed:{type:Function},wasRecentlyMoved:{type:Function},isDescendantOf:{type:Function},onAddNext:{type:Function},onAddChild:{type:Function},onDelete:{type:Function}},setup(e){function t(n){n.stopPropagation(),n.stopImmediatePropagation()}return(n,r)=>{let f=We,v=Ue,l=Re,d=Xe;return $(),Ke(Wt,{item:e.item,level:e.level,"has-children":!!(e.item.children&&e.item.children.length>0),"is-last":!1,"is-descendant-of":e.isDescendantOf,"on-delete":e.onDelete,class:M([{"opacity-30":e.shouldBeDimmed(e.item.value||""),"ring-2 ring-primary ring-offset-2 bg-primary/5":e.wasRecentlyMoved(e.item.value||"")},"transition-all duration-300 ease-out rounded-lg"])},{default:K(()=>[E("div",Xt,[E("div",Ut,[R(f,{name:"lucide:grip-vertical",class:"size-4 text-dimmed"})]),B(n.$slots,"leading",{item:e.item}),E("div",null,[R(v,{modelValue:e.item.var.key,"onUpdate:modelValue":[r[0]||(r[0]=s=>e.item.var.key=s),r[1]||(r[1]=s=>{let g=s.replace(/[^a-zA-Z0-9\\-_]/g,"");e.item.var.key=g})],onKeydown:[z(t,["left"]),z(t,["right"])],placeholder:"",ui:{base:"peer"}},{default:K(()=>[E("label",Yt,[E("span",Bt,me(n.i18n.__("Name")),1)])]),_:1},8,["modelValue"])]),B(n.$slots,"before-value",{item:e.item}),E("div",Ht,[R(v,{modelValue:e.item.var.value,"onUpdate:modelValue":[r[2]||(r[2]=s=>e.item.var.value=s),r[3]||(r[3]=s=>{e.item.var.value=s})],onKeydown:[z(t,["left"]),z(t,["right"])],placeholder:"",ui:{base:"peer",root:"block"}},_e({default:K(()=>[E("label",{class:M(["pointer-events-none absolute left-0 -top-2.5 text-highlighted text-xs font-medium px-1.5 transition-all peer-focus:-top-2.5 peer-focus:text-highlighted peer-focus:text-xs peer-focus:font-medium peer-placeholder-shown:text-sm peer-placeholder-shown:text-dimmed peer-placeholder-shown:top-1.5 peer-placeholder-shown:font-normal",{"peer-placeholder-shown:ps-9 peer-focus:ps-1.5":n.$slots["value-leading"]}])},[E("span",zt,me(n.i18n.__("Value")),1)],2)]),_:2},[n.$slots["value-leading"]?{name:"leading",fn:K(()=>[B(n.$slots,"value-leading",{item:e.item})]),key:"0"}:void 0]),1032,["modelValue"])]),E("div",null,[R(d,{items:[{label:n.i18n.__("Add (next)","windpress"),icon:"i-lucide-plus",onSelect(){e.onAddNext(e.item.value||"")}},{label:n.i18n.__("Add (child)","windpress"),icon:"lucide:corner-down-right",onSelect(){e.onAddChild(e.item.value||"")}},...e.onDelete?[{label:"Delete",icon:"i-lucide-trash-2",onSelect(){e.onDelete(e.item.value||"")}}]:[]],ui:{content:"w-48"}},{default:K(()=>[R(l,{icon:"lucide:ellipsis",color:"neutral",variant:"ghost"})]),_:1},8,["items"])])])]),_:3},8,["item","level","has-children","is-descendant-of","on-delete","class"])}}});export{$t as n,Ye as r,Vt as t};
