var li=Object.defineProperty;var kt=b=>{throw TypeError(b)};var pi=(b,y,m)=>y in b?li(b,y,{enumerable:!0,configurable:!0,writable:!0,value:m}):b[y]=m;var M=(b,y,m)=>pi(b,typeof y!="symbol"?y+"":y,m),ct=(b,y,m)=>y.has(b)||kt("Cannot "+m);var h=(b,y,m)=>(ct(b,y,"read from private field"),m?m.call(b):y.get(b)),L=(b,y,m)=>y.has(b)?kt("Cannot add the same private member more than once"):y instanceof WeakSet?y.add(b):y.set(b,m),v=(b,y,m,Q)=>(ct(b,y,"write to private field"),Q?Q.call(b,m):y.set(b,m),m),B=(b,y,m)=>(ct(b,y,"access private method"),m);import{r as fi}from"./chunk-BP1tGd43.min.js";import{n as ci,t as ut}from"./dist-CyCkKGye.min.js";import{t as ui}from"./log-BpAY2Wg4.js";import{t as gi}from"./api-j1hi8yn9.js";import{n as gt,t as di}from"./dist-7RENR6RM.min.js";let dt,zt,mi=(async()=>{var E,O,k,_,S,z,U,G,T,D,V,Z,Gt,I,W,nt,mt,It;var b=""+new URL("oxide_parser_wasm_bg-CicmRBGW.wasm",import.meta.url).href;ci();var y=async(t={},e)=>{let i;if(e.startsWith("data:")){let s=e.replace(/^data:.*?base64,/,""),r;if(typeof ut=="function"&&typeof ut.from=="function")r=ut.from(s,"base64");else if(typeof atob=="function"){let n=atob(s);r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o)}else throw Error("Cannot decode base64-encoded data URL");i=await WebAssembly.instantiate(r,t)}else{let s=await fetch(e),r=s.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&r.startsWith("application/wasm"))i=await WebAssembly.instantiateStreaming(s,t);else{let n=await s.arrayBuffer();i=await WebAssembly.instantiate(n,t)}}return i.instance.exports},m;function Q(t){m=t}var X=null;function Y(){return(X===null||X.byteLength===0)&&(X=new Uint8Array(m.memory.buffer)),X}var wt=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder,tt=new wt("utf-8",{ignoreBOM:!0,fatal:!0});tt.decode();var Bt=2146435072,ot=0;function Ut(t,e){return ot+=e,ot>=Bt&&(tt=new wt("utf-8",{ignoreBOM:!0,fatal:!0}),tt.decode(),ot=e),tt.decode(Y().subarray(t,t+e))}function Dt(t,e){return t>>>=0,Ut(t,e)}var at=0,et=new(typeof TextEncoder>"u"?(0,module.require)("util").TextEncoder:TextEncoder)("utf-8"),Zt=typeof et.encodeInto=="function"?function(t,e){return et.encodeInto(t,e)}:function(t,e){let i=et.encode(t);return e.set(i),{read:t.length,written:i.length}};function Ft(t,e,i){if(i===void 0){let a=et.encode(t),l=e(a.length,1)>>>0;return Y().subarray(l,l+a.length).set(a),at=a.length,l}let s=t.length,r=e(s,1)>>>0,n=Y(),o=0;for(;o<s;o++){let a=t.charCodeAt(o);if(a>127)break;n[r+o]=a}if(o!==s){o!==0&&(t=t.slice(o)),r=i(r,s,s=o+t.length*3,1)>>>0;let a=Y().subarray(r+o,r+s),l=Zt(t,a);o+=l.written,r=i(r,s,o,1)>>>0}return at=o,r}var F=null;function Jt(){return(F===null||F.buffer.detached===!0||F.buffer.detached===void 0&&F.buffer!==m.memory.buffer)&&(F=new DataView(m.memory.buffer)),F}function qt(t,e){t>>>=0;let i=Jt(),s=[];for(let r=t;r<t+4*e;r+=4)s.push(m.__wbindgen_export_0.get(i.getUint32(r,!0)));return m.__externref_drop_slice(t,e),s}dt=function(t){let e=Ft(t,m.__wbindgen_malloc,m.__wbindgen_realloc),i=at,s=m.find_tw_candidates(e,i);var r=qt(s[0],s[1]).slice();return m.__wbindgen_free(s[0],s[1]*4,4),r};function Ht(t,e){return Dt(t,e)}function Vt(){let t=m.__wbindgen_export_0,e=t.grow(4);t.set(0,void 0),t.set(e+0,void 0),t.set(e+1,null),t.set(e+2,!0),t.set(e+3,!1)}var Kt=fi({__externref_drop_slice:()=>re,__wbindgen_export_0:()=>ee,__wbindgen_free:()=>ne,__wbindgen_malloc:()=>ie,__wbindgen_realloc:()=>se,__wbindgen_start:()=>bt,find_tw_candidates:()=>te,find_tw_candidates_ffi:()=>Xt,free_candidates:()=>Yt,memory:()=>Qt});URL=globalThis.URL;var j=await y({"./oxide_parser_wasm_bg.js":{__wbindgen_init_externref_table:Vt,__wbindgen_cast_2241b6af4c4b2941:Ht}},b);const Qt=j.memory,Xt=j.find_tw_candidates_ffi,Yt=j.free_candidates,te=j.find_tw_candidates,ee=j.__wbindgen_export_0,ie=j.__wbindgen_malloc,se=j.__wbindgen_realloc,re=j.__externref_drop_slice,ne=j.__wbindgen_free,bt=j.__wbindgen_start;Q(Kt),bt();const yt=(t,e,i)=>{let s=t instanceof RegExp?_t(t,i):t,r=e instanceof RegExp?_t(e,i):e,n=s!==null&&r!=null&&oe(s,r,i);return n&&{start:n[0],end:n[1],pre:i.slice(0,n[0]),body:i.slice(n[0]+s.length,n[1]),post:i.slice(n[1]+r.length)}};var _t=(t,e)=>{let i=e.match(t);return i?i[0]:null};const oe=(t,e,i)=>{let s,r,n,o,a,l=i.indexOf(t),f=i.indexOf(e,l+1),p=l;if(l>=0&&f>0){if(t===e)return[l,f];for(s=[],n=i.length;p>=0&&!a;){if(p===l)s.push(p),l=i.indexOf(t,p+1);else if(s.length===1){let c=s.pop();c!==void 0&&(a=[c,f])}else r=s.pop(),r!==void 0&&r<n&&(n=r,o=f),f=i.indexOf(e,p+1);p=l<f&&l>=0?l:f}s.length&&o!==void 0&&(a=[n,o])}return a};var xt="\0SLASH"+Math.random()+"\0",vt="\0OPEN"+Math.random()+"\0",ht="\0CLOSE"+Math.random()+"\0",St="\0COMMA"+Math.random()+"\0",Et="\0PERIOD"+Math.random()+"\0",ae=new RegExp(xt,"g"),he=new RegExp(vt,"g"),le=new RegExp(ht,"g"),pe=new RegExp(St,"g"),fe=new RegExp(Et,"g"),ce=/\\\\/g,ue=/\\{/g,ge=/\\}/g,de=/\\,/g,me=/\\./g;function lt(t){return isNaN(t)?t.charCodeAt(0):parseInt(t,10)}function we(t){return t.replace(ce,xt).replace(ue,vt).replace(ge,ht).replace(de,St).replace(me,Et)}function be(t){return t.replace(ae,"\\").replace(he,"{").replace(le,"}").replace(pe,",").replace(fe,".")}function $t(t){if(!t)return[""];let e=[],i=yt("{","}",t);if(!i)return t.split(",");let{pre:s,body:r,post:n}=i,o=s.split(",");o[o.length-1]+="{"+r+"}";let a=$t(n);return n.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function ye(t){return t?(t.slice(0,2)==="{}"&&(t="\\{\\}"+t.slice(2)),J(we(t),!0).map(be)):[]}function _e(t){return"{"+t+"}"}function xe(t){return/^-?0\d/.test(t)}function ve(t,e){return t<=e}function Se(t,e){return t>=e}function J(t,e){let i=[],s=yt("{","}",t);if(!s)return[t];let r=s.pre,n=s.post.length?J(s.post,!1):[""];if(/\$$/.test(s.pre))for(let o=0;o<n.length;o++){let a=r+"{"+s.body+"}"+n[o];i.push(a)}else{let o=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(s.body),a=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(s.body),l=o||a,f=s.body.indexOf(",")>=0;if(!l&&!f)return s.post.match(/,(?!,).*\}/)?(t=s.pre+"{"+s.body+ht+s.post,J(t)):[t];let p;if(l)p=s.body.split(/\.\./);else if(p=$t(s.body),p.length===1&&p[0]!==void 0&&(p=J(p[0],!1).map(_e),p.length===1))return n.map(u=>s.pre+p[0]+u);let c;if(l&&p[0]!==void 0&&p[1]!==void 0){let u=lt(p[0]),w=lt(p[1]),g=Math.max(p[0].length,p[1].length),d=p.length===3&&p[2]!==void 0?Math.abs(lt(p[2])):1,x=ve;w<u&&(d*=-1,x=Se);let $=p.some(xe);c=[];for(let A=u;x(A,w);A+=d){let R;if(a)R=String.fromCharCode(A),R==="\\"&&(R="");else if(R=String(A),$){let K=g-R.length;if(K>0){let rt=Array(K+1).join("0");R=A<0?"-"+rt+R.slice(1):rt+R}}c.push(R)}}else{c=[];for(let u=0;u<p.length;u++)c.push.apply(c,J(p[u],!1))}for(let u=0;u<c.length;u++)for(let w=0;w<n.length;w++){let g=r+c[u]+n[w];(!e||l||g)&&i.push(g)}}return i}var Ee=1024*64;const it=t=>{if(typeof t!="string")throw TypeError("invalid pattern");if(t.length>Ee)throw TypeError("pattern is too long")};var $e={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},q=t=>t.replace(/[[\]\\-]/g,"\\$&"),Ae=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),At=t=>t.join("");const Me=(t,e)=>{let i=e;if(t.charAt(i)!=="[")throw Error("not in a brace expression");let s=[],r=[],n=i+1,o=!1,a=!1,l=!1,f=!1,p=i,c="";t:for(;n<t.length;){let g=t.charAt(n);if((g==="!"||g==="^")&&n===i+1){f=!0,n++;continue}if(g==="]"&&o&&!l){p=n+1;break}if(o=!0,g==="\\"&&!l){l=!0,n++;continue}if(g==="["&&!l){for(let[d,[x,$,A]]of Object.entries($e))if(t.startsWith(d,n)){if(c)return["$.",!1,t.length-i,!0];n+=d.length,A?r.push(x):s.push(x),a||(a=$);continue t}}if(l=!1,c){g>c?s.push(q(c)+"-"+q(g)):g===c&&s.push(q(g)),c="",n++;continue}if(t.startsWith("-]",n+1)){s.push(q(g+"-")),n+=2;continue}if(t.startsWith("-",n+1)){c=g,n+=2;continue}s.push(q(g)),n++}if(p<n)return["",!1,0,!1];if(!s.length&&!r.length)return["$.",!1,t.length-i,!0];if(r.length===0&&s.length===1&&/^\\?.$/.test(s[0])&&!f){let g=s[0].length===2?s[0].slice(-1):s[0];return[Ae(g),!1,p-i,!1]}let u="["+(f?"^":"")+At(s)+"]",w="["+(f?"":"^")+At(r)+"]";return[s.length&&r.length?"("+u+"|"+w+")":s.length?u:w,a,p-i,!0]},H=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var Oe=new Set(["!","?","+","*","@"]),Mt=t=>Oe.has(t),We="(?!(?:^|/)\\.\\.?(?:$|/))",pt="(?!\\.)",Pe=new Set(["[","."]),Re=new Set(["..","."]),Le=new Set("().*{}+?[]^$\\!"),Ne=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),ft="[^/]",Ot=ft+"*?",Wt=ft+"+?",Pt=(W=class{constructor(e,i,s={}){L(this,Z);M(this,"type");L(this,E);L(this,O);L(this,k,!1);L(this,_,[]);L(this,S);L(this,z);L(this,U);L(this,G,!1);L(this,T);L(this,D);L(this,V,!1);this.type=e,e&&v(this,O,!0),v(this,S,i),v(this,E,h(this,S)?h(h(this,S),E):this),v(this,T,h(this,E)===this?s:h(h(this,E),T)),v(this,U,h(this,E)===this?[]:h(h(this,E),U)),e==="!"&&!h(h(this,E),G)&&h(this,U).push(this),v(this,z,h(this,S)?h(h(this,S),_).length:0)}get hasMagic(){if(h(this,O)!==void 0)return h(this,O);for(let e of h(this,_))if(typeof e!="string"&&(e.type||e.hasMagic))return v(this,O,!0);return h(this,O)}toString(){return h(this,D)===void 0?this.type?v(this,D,this.type+"("+h(this,_).map(e=>String(e)).join("|")+")"):v(this,D,h(this,_).map(e=>String(e)).join("")):h(this,D)}push(...e){for(let i of e)if(i!==""){if(typeof i!="string"&&!(i instanceof W&&h(i,S)===this))throw Error("invalid part: "+i);h(this,_).push(i)}}toJSON(){var i;let e=this.type===null?h(this,_).slice().map(s=>typeof s=="string"?s:s.toJSON()):[this.type,...h(this,_).map(s=>s.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===h(this,E)||h(h(this,E),G)&&((i=h(this,S))==null?void 0:i.type)==="!")&&e.push({}),e}isStart(){var i;if(h(this,E)===this)return!0;if(!((i=h(this,S))!=null&&i.isStart()))return!1;if(h(this,z)===0)return!0;let e=h(this,S);for(let s=0;s<h(this,z);s++){let r=h(e,_)[s];if(!(r instanceof W&&r.type==="!"))return!1}return!0}isEnd(){var i,s,r;if(h(this,E)===this||((i=h(this,S))==null?void 0:i.type)==="!")return!0;if(!((s=h(this,S))!=null&&s.isEnd()))return!1;if(!this.type)return(r=h(this,S))==null?void 0:r.isEnd();let e=h(this,S)?h(h(this,S),_).length:0;return h(this,z)===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let i=new W(this.type,e);for(let s of h(this,_))i.copyIn(s);return i}static fromGlob(e,i={}){var r;let s=new W(null,void 0,i);return B(r=W,I,nt).call(r,e,s,0,i),s}toMMPattern(){if(this!==h(this,E))return h(this,E).toMMPattern();let e=this.toString(),[i,s,r,n]=this.toRegExpSource();if(!(r||h(this,O)||h(this,T).nocase&&!h(this,T).nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return s;let o=(h(this,T).nocase?"i":"")+(n?"u":"");return Object.assign(RegExp(`^${i}$`,o),{_src:i,_glob:e})}get options(){return h(this,T)}toRegExpSource(e){var l;let i=e??!!h(this,T).dot;if(h(this,E)===this&&B(this,Z,Gt).call(this),!this.type){let f=this.isStart()&&this.isEnd(),p=h(this,_).map(w=>{var A;let[g,d,x,$]=typeof w=="string"?B(A=W,I,It).call(A,w,h(this,O),f):w.toRegExpSource(e);return v(this,O,h(this,O)||x),v(this,k,h(this,k)||$),g}).join(""),c="";if(this.isStart()&&typeof h(this,_)[0]=="string"&&!(h(this,_).length===1&&Re.has(h(this,_)[0]))){let w=Pe,g=i&&w.has(p.charAt(0))||p.startsWith("\\.")&&w.has(p.charAt(2))||p.startsWith("\\.\\.")&&w.has(p.charAt(4)),d=!i&&!e&&w.has(p.charAt(0));c=g?We:d?pt:""}let u="";return this.isEnd()&&h(h(this,E),G)&&((l=h(this,S))==null?void 0:l.type)==="!"&&(u="(?:$|\\/)"),[c+p+u,H(p),v(this,O,!!h(this,O)),h(this,k)]}let s=this.type==="*"||this.type==="+",r=this.type==="!"?"(?:(?!(?:":"(?:",n=B(this,Z,mt).call(this,i);if(this.isStart()&&this.isEnd()&&!n&&this.type!=="!"){let f=this.toString();return v(this,_,[f]),this.type=null,v(this,O,void 0),[f,H(this.toString()),!1,!1]}let o=!s||e||i?"":B(this,Z,mt).call(this,!0);o===n&&(o=""),o&&(n=`(?:${n})(?:${o})*?`);let a="";if(this.type==="!"&&h(this,V))a=(this.isStart()&&!i?pt:"")+Wt;else{let f=this.type==="!"?"))"+(this.isStart()&&!i&&!e?pt:"")+Ot+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&o?")":this.type==="*"&&o?")?":`)${this.type}`;a=r+n+f}return[a,H(n),v(this,O,!!h(this,O)),h(this,k)]}},E=new WeakMap,O=new WeakMap,k=new WeakMap,_=new WeakMap,S=new WeakMap,z=new WeakMap,U=new WeakMap,G=new WeakMap,T=new WeakMap,D=new WeakMap,V=new WeakMap,Z=new WeakSet,Gt=function(){if(this!==h(this,E))throw Error("should only call on root");if(h(this,G))return this;this.toString(),v(this,G,!0);let e;for(;e=h(this,U).pop();){if(e.type!=="!")continue;let i=e,s=h(i,S);for(;s;){for(let r=h(i,z)+1;!s.type&&r<h(s,_).length;r++)for(let n of h(e,_)){if(typeof n=="string")throw Error("string part in extglob AST??");n.copyIn(h(s,_)[r])}i=s,s=h(i,S)}}return this},I=new WeakSet,nt=function(e,i,s,r){var w,g;let n=!1,o=!1,a=-1,l=!1;if(i.type===null){let d=s,x="";for(;d<e.length;){let $=e.charAt(d++);if(n||$==="\\"){n=!n,x+=$;continue}if(o){d===a+1?($==="^"||$==="!")&&(l=!0):$==="]"&&!(d===a+2&&l)&&(o=!1),x+=$;continue}else if($==="["){o=!0,a=d,l=!1,x+=$;continue}if(!r.noext&&Mt($)&&e.charAt(d)==="("){i.push(x),x="";let A=new W($,i);d=B(w=W,I,nt).call(w,e,A,d,r),i.push(A);continue}x+=$}return i.push(x),d}let f=s+1,p=new W(null,i),c=[],u="";for(;f<e.length;){let d=e.charAt(f++);if(n||d==="\\"){n=!n,u+=d;continue}if(o){f===a+1?(d==="^"||d==="!")&&(l=!0):d==="]"&&!(f===a+2&&l)&&(o=!1),u+=d;continue}else if(d==="["){o=!0,a=f,l=!1,u+=d;continue}if(Mt(d)&&e.charAt(f)==="("){p.push(u),u="";let x=new W(d,p);p.push(x),f=B(g=W,I,nt).call(g,e,x,f,r);continue}if(d==="|"){p.push(u),u="",c.push(p),p=new W(null,i);continue}if(d===")")return u===""&&h(i,_).length===0&&v(i,V,!0),p.push(u),u="",i.push(...c,p),f;u+=d}return i.type=null,v(i,O,void 0),v(i,_,[e.substring(s-1)]),f},mt=function(e){return h(this,_).map(i=>{if(typeof i=="string")throw Error("string type in extglob ast??");let[s,r,n,o]=i.toRegExpSource(e);return v(this,k,h(this,k)||o),s}).filter(i=>!(this.isStart()&&this.isEnd())||!!i).join("|")},It=function(e,i,s=!1){let r=!1,n="",o=!1;for(let a=0;a<e.length;a++){let l=e.charAt(a);if(r){r=!1,n+=(Le.has(l)?"\\":"")+l;continue}if(l==="\\"){a===e.length-1?n+="\\\\":r=!0;continue}if(l==="["){let[f,p,c,u]=Me(e,a);if(c){n+=f,o||(o=p),a+=c-1,i||(i=u);continue}}if(l==="*"){s&&e==="*"?n+=Wt:n+=Ot,i=!0;continue}if(l==="?"){n+=ft,i=!0;continue}n+=Ne(l)}return[n,H(e),!!i,o]},L(W,I),W);const Ce=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");di();const P=(t,e,i={})=>(it(e),!i.nocomment&&e.charAt(0)==="#"?!1:new st(e,i).match(t));var je=/^\*+([^+@!?\*\[\(]*)$/,Te=t=>e=>!e.startsWith(".")&&e.endsWith(t),ke=t=>e=>e.endsWith(t),ze=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),Ge=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),Ie=/^\*+\.\*+$/,Be=t=>!t.startsWith(".")&&t.includes("."),Ue=t=>t!=="."&&t!==".."&&t.includes("."),De=/^\.\*+$/,Ze=t=>t!=="."&&t!==".."&&t.startsWith("."),Fe=/^\*+$/,Je=t=>t.length!==0&&!t.startsWith("."),qe=t=>t.length!==0&&t!=="."&&t!=="..",He=/^\?+([^+@!?\*\[\(]*)?$/,Ve=([t,e=""])=>{let i=Rt([t]);return e?(e=e.toLowerCase(),s=>i(s)&&s.toLowerCase().endsWith(e)):i},Ke=([t,e=""])=>{let i=Lt([t]);return e?(e=e.toLowerCase(),s=>i(s)&&s.toLowerCase().endsWith(e)):i},Qe=([t,e=""])=>{let i=Lt([t]);return e?s=>i(s)&&s.endsWith(e):i},Xe=([t,e=""])=>{let i=Rt([t]);return e?s=>i(s)&&s.endsWith(e):i},Rt=([t])=>{let e=t.length;return i=>i.length===e&&!i.startsWith(".")},Lt=([t])=>{let e=t.length;return i=>i.length===e&&i!=="."&&i!==".."},Nt=typeof gt=="object"&&gt?{}.__MINIMATCH_TESTING_PLATFORM__||gt.platform:"posix",Ct={win32:{sep:"\\"},posix:{sep:"/"}};P.sep=Nt==="win32"?Ct.win32.sep:Ct.posix.sep;const N=Symbol("globstar **");P.GLOBSTAR=N;var Ye="[^/]*?",ti="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",ei="(?:(?!(?:\\/|^)\\.).)*?";P.filter=(t,e={})=>i=>P(i,t,e);var C=(t,e={})=>Object.assign({},t,e);P.defaults=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return P;let e=P;return Object.assign((i,s,r={})=>e(i,s,C(t,r)),{Minimatch:class extends e.Minimatch{constructor(i,s={}){super(i,C(t,s))}static defaults(i){return e.defaults(C(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,s,r={}){super(i,s,C(t,r))}static fromGlob(i,s={}){return e.AST.fromGlob(i,C(t,s))}},unescape:(i,s={})=>e.unescape(i,C(t,s)),escape:(i,s={})=>e.escape(i,C(t,s)),filter:(i,s={})=>e.filter(i,C(t,s)),defaults:i=>e.defaults(C(t,i)),makeRe:(i,s={})=>e.makeRe(i,C(t,s)),braceExpand:(i,s={})=>e.braceExpand(i,C(t,s)),match:(i,s,r={})=>e.match(i,s,C(t,r)),sep:e.sep,GLOBSTAR:N})};const jt=(t,e={})=>(it(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:ye(t));P.braceExpand=jt,P.makeRe=(t,e={})=>new st(t,e).makeRe(),P.match=(t,e,i={})=>{let s=new st(e,i);return t=t.filter(r=>s.match(r)),s.options.nonull&&!t.length&&t.push(e),t};var Tt=/[?*]|[+@!]\(.*?\)|\[|\]/,ii=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),st=class{constructor(t,e={}){M(this,"options");M(this,"set");M(this,"pattern");M(this,"windowsPathsNoEscape");M(this,"nonegate");M(this,"negate");M(this,"comment");M(this,"empty");M(this,"preserveMultipleSlashes");M(this,"partial");M(this,"globSet");M(this,"globParts");M(this,"nocase");M(this,"isWindows");M(this,"platform");M(this,"windowsNoMagicRoot");M(this,"regexp");it(t),e||(e={}),this.options=e,this.pattern=t,this.platform=e.platform||Nt,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||e.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!e.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!e.nonegate,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=e.windowsNoMagicRoot===void 0?!!(this.isWindows&&this.nocase):e.windowsNoMagicRoot,this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let t of this.set)for(let e of t)if(typeof e!="string")return!0;return!1}debug(...t){}make(){let t=this.pattern,e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],e.debug&&(this.debug=(...r)=>console.error(...r)),this.debug(this.pattern,this.globSet);let i=this.globSet.map(r=>this.slashSplit(r));this.globParts=this.preprocess(i),this.debug(this.pattern,this.globParts);let s=this.globParts.map((r,n,o)=>{if(this.isWindows&&this.windowsNoMagicRoot){let a=r[0]===""&&r[1]===""&&(r[2]==="?"||!Tt.test(r[2]))&&!Tt.test(r[3]),l=/^[a-z]:/i.test(r[0]);if(a)return[...r.slice(0,4),...r.slice(4).map(f=>this.parse(f))];if(l)return[r[0],...r.slice(1).map(f=>this.parse(f))]}return r.map(a=>this.parse(a))});if(this.debug(this.pattern,s),this.set=s.filter(r=>r.indexOf(!1)===-1),this.isWindows)for(let r=0;r<this.set.length;r++){let n=this.set[r];n[0]===""&&n[1]===""&&this.globParts[r][2]==="?"&&typeof n[3]=="string"&&/^[a-z]:$/i.test(n[3])&&(n[2]="?")}this.debug(this.pattern,this.set)}preprocess(t){if(this.options.noglobstar)for(let i=0;i<t.length;i++)for(let s=0;s<t[i].length;s++)t[i][s]==="**"&&(t[i][s]="*");let{optimizationLevel:e=1}=this.options;return e>=2?(t=this.firstPhasePreProcess(t),t=this.secondPhasePreProcess(t)):t=e>=1?this.levelOneOptimize(t):this.adjascentGlobstarOptimize(t),t}adjascentGlobstarOptimize(t){return t.map(e=>{let i=-1;for(;(i=e.indexOf("**",i+1))!==-1;){let s=i;for(;e[s+1]==="**";)s++;s!==i&&e.splice(i,s-i)}return e})}levelOneOptimize(t){return t.map(e=>(e=e.reduce((i,s)=>{let r=i[i.length-1];return s==="**"&&r==="**"?i:s===".."&&r&&r!==".."&&r!=="."&&r!=="**"?(i.pop(),i):(i.push(s),i)},[]),e.length===0?[""]:e))}levelTwoFileOptimize(t){Array.isArray(t)||(t=this.slashSplit(t));let e=!1;do{if(e=!1,!this.preserveMultipleSlashes){for(let s=1;s<t.length-1;s++){let r=t[s];s===1&&r===""&&t[0]===""||(r==="."||r==="")&&(e=!0,t.splice(s,1),s--)}t[0]==="."&&t.length===2&&(t[1]==="."||t[1]==="")&&(e=!0,t.pop())}let i=0;for(;(i=t.indexOf("..",i+1))!==-1;){let s=t[i-1];s&&s!=="."&&s!==".."&&s!=="**"&&(e=!0,t.splice(i-1,2),i-=2)}}while(e);return t.length===0?[""]:t}firstPhasePreProcess(t){let e=!1;do{e=!1;for(let i of t){let s=-1;for(;(s=i.indexOf("**",s+1))!==-1;){let n=s;for(;i[n+1]==="**";)n++;n>s&&i.splice(s+1,n-s);let o=i[s+1],a=i[s+2],l=i[s+3];if(o!==".."||!a||a==="."||a===".."||!l||l==="."||l==="..")continue;e=!0,i.splice(s,1);let f=i.slice(0);f[s]="**",t.push(f),s--}if(!this.preserveMultipleSlashes){for(let n=1;n<i.length-1;n++){let o=i[n];n===1&&o===""&&i[0]===""||(o==="."||o==="")&&(e=!0,i.splice(n,1),n--)}i[0]==="."&&i.length===2&&(i[1]==="."||i[1]==="")&&(e=!0,i.pop())}let r=0;for(;(r=i.indexOf("..",r+1))!==-1;){let n=i[r-1];if(n&&n!=="."&&n!==".."&&n!=="**"){e=!0;let o=r===1&&i[r+1]==="**"?["."]:[];i.splice(r-1,2,...o),i.length===0&&i.push(""),r-=2}}}}while(e);return t}secondPhasePreProcess(t){for(let e=0;e<t.length-1;e++)for(let i=e+1;i<t.length;i++){let s=this.partsMatch(t[e],t[i],!this.preserveMultipleSlashes);if(s){t[e]=[],t[i]=s;break}}return t.filter(e=>e.length)}partsMatch(t,e,i=!1){let s=0,r=0,n=[],o="";for(;s<t.length&&r<e.length;)if(t[s]===e[r])n.push(o==="b"?e[r]:t[s]),s++,r++;else if(i&&t[s]==="**"&&e[r]===t[s+1])n.push(t[s]),s++;else if(i&&e[r]==="**"&&t[s]===e[r+1])n.push(e[r]),r++;else if(t[s]==="*"&&e[r]&&(this.options.dot||!e[r].startsWith("."))&&e[r]!=="**"){if(o==="b")return!1;o="a",n.push(t[s]),s++,r++}else if(e[r]==="*"&&t[s]&&(this.options.dot||!t[s].startsWith("."))&&t[s]!=="**"){if(o==="a")return!1;o="b",n.push(e[r]),s++,r++}else return!1;return t.length===e.length&&n}parseNegate(){if(this.nonegate)return;let t=this.pattern,e=!1,i=0;for(let s=0;s<t.length&&t.charAt(s)==="!";s++)e=!e,i++;i&&(this.pattern=t.slice(i)),this.negate=e}matchOne(t,e,i=!1){let s=this.options;if(this.isWindows){let g=typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0]),d=!g&&t[0]===""&&t[1]===""&&t[2]==="?"&&/^[a-z]:$/i.test(t[3]),x=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),$=!x&&e[0]===""&&e[1]===""&&e[2]==="?"&&typeof e[3]=="string"&&/^[a-z]:$/i.test(e[3]),A=d?3:g?0:void 0,R=$?3:x?0:void 0;if(typeof A=="number"&&typeof R=="number"){let[K,rt]=[t[A],e[R]];K.toLowerCase()===rt.toLowerCase()&&(e[R]=K,R>A?e=e.slice(R):A>R&&(t=t.slice(A)))}}let{optimizationLevel:r=1}=this.options;r>=2&&(t=this.levelTwoFileOptimize(t)),this.debug("matchOne",this,{file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var n=0,o=0,a=t.length,l=e.length;n<a&&o<l;n++,o++){this.debug("matchOne loop");var f=e[o],p=t[n];if(this.debug(e,f,p),f===!1)return!1;if(f===N){this.debug("GLOBSTAR",[e,f,p]);var c=n,u=o+1;if(u===l){for(this.debug("** at the end");n<a;n++)if(t[n]==="."||t[n]===".."||!s.dot&&t[n].charAt(0)===".")return!1;return!0}for(;c<a;){var w=t[c];if(this.debug(`
globstar while`,t,c,e,u,w),this.matchOne(t.slice(c),e.slice(u),i))return this.debug("globstar found match!",c,a,w),!0;if(w==="."||w===".."||!s.dot&&w.charAt(0)==="."){this.debug("dot detected!",t,c,e,u);break}this.debug("globstar swallow a segment, and continue"),c++}return!!(i&&(this.debug(`
>>> no match, partial?`,t,c,e,u),c===a))}let g;if(typeof f=="string"?(g=p===f,this.debug("string match",f,p,g)):(g=f.test(p),this.debug("pattern match",f,p,g)),!g)return!1}if(n===a&&o===l)return!0;if(n===a)return i;if(o===l)return n===a-1&&t[n]==="";throw Error("wtf?")}braceExpand(){return jt(this.pattern,this.options)}parse(t){it(t);let e=this.options;if(t==="**")return N;if(t==="")return"";let i,s=null;(i=t.match(Fe))?s=e.dot?qe:Je:(i=t.match(je))?s=(e.nocase?e.dot?Ge:ze:e.dot?ke:Te)(i[1]):(i=t.match(He))?s=(e.nocase?e.dot?Ke:Ve:e.dot?Qe:Xe)(i):(i=t.match(Ie))?s=e.dot?Ue:Be:(i=t.match(De))&&(s=Ze);let r=Pt.fromGlob(t,this.options).toMMPattern();return s&&typeof r=="object"&&Reflect.defineProperty(r,"test",{value:s}),r}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let t=this.set;if(!t.length)return this.regexp=!1,this.regexp;let e=this.options,i=e.noglobstar?Ye:e.dot?ti:ei,s=new Set(e.nocase?["i"]:[]),r=t.map(a=>{let l=a.map(f=>{if(f instanceof RegExp)for(let p of f.flags.split(""))s.add(p);return typeof f=="string"?ii(f):f===N?N:f._src});return l.forEach((f,p)=>{let c=l[p+1],u=l[p-1];f!==N||u===N||(u===void 0?c!==void 0&&c!==N?l[p+1]="(?:\\/|"+i+"\\/)?"+c:l[p]=i:c===void 0?l[p-1]=u+"(?:\\/|"+i+")?":c!==N&&(l[p-1]=u+"(?:\\/|\\/"+i+"\\/)"+c,l[p+1]=N))}),l.filter(f=>f!==N).join("/")}).join("|"),[n,o]=t.length>1?["(?:",")"]:["",""];r="^"+n+r+o+"$",this.negate&&(r="^(?!"+r+").+$");try{this.regexp=new RegExp(r,[...s].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(t){return this.preserveMultipleSlashes?t.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(t)?["",...t.split(/\/+/)]:t.split(/\/+/)}match(t,e=this.partial){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return t==="";if(t==="/"&&e)return!0;let i=this.options;this.isWindows&&(t=t.split("\\").join("/"));let s=this.slashSplit(t);this.debug(this.pattern,"split",s);let r=this.set;this.debug(this.pattern,"set",r);let n=s[s.length-1];if(!n)for(let o=s.length-2;!n&&o>=0;o--)n=s[o];for(let o=0;o<r.length;o++){let a=r[o],l=s;if(i.matchBase&&a.length===1&&(l=[n]),this.matchOne(l,a,e))return i.flipNegate?!0:!this.negate}return i.flipNegate?!1:this.negate}static defaults(t){return P.defaults(t).Minimatch}};P.AST=Pt,P.Minimatch=st,P.escape=Ce,P.unescape=H;var si=/^(@[^\/]+\/[^@\/]+)(?:@([^\/]+))?(\/.*)?$/,ri=/^([^@\/]+)(?:@([^\/]+))?(\/.*)?$/;function ni(t){let e=si.exec(t)||ri.exec(t);if(!e)throw Error(`[parse-package-name] invalid package name: ${t}`);return{name:e[1]||"",version:e[2]||"latest",path:e[3]||""}}zt=async function(t){let e=ui(),i=[],s=t.map(async a=>{if(a.negated)return;let l;if(a.pattern.startsWith("jsdelivr:")?(l=e.add({message:`Loading source: jsDelivr (${a.pattern})`,type:"info",group:"source"}),i.push(...await oi(a))):a.pattern.startsWith("http")?(l=e.add({message:`Loading source: Network (${a.pattern})`,type:"info",group:"source"}),i.push(...await ai(a))):a.pattern.startsWith("wp-content:")&&(l=e.add({message:`Loading source: WP Content (${a.pattern})`,type:"info",group:"source"}),i.push(...await hi(a))),l){let f=e.logs.value.find(p=>p.id===l);f&&(f.message+=" - done")}});await Promise.all(s);let r=[],n=e.add({message:"Scanning sources...",type:"info",group:"source"});i.forEach(a=>{let l=dt(a);r.push(...l)});let o=e.logs.value.find(a=>a.id===n);return o&&(o.message+=" - done"),Array.from(new Set(r))};async function oi(t){let e=[],i=t.pattern.slice(9),{name:s,version:r,path:n}=ni(i),o=(await fetch(`https://data.jsdelivr.com/v1/packages/npm/${s}@${r}?structure=flat`).then(a=>a.json()).then(a=>a.files).then(a=>a.map(l=>l.name)).then(a=>a.filter(l=>P(l,n)))).map(async a=>{let l=await fetch(`https://cdn.jsdelivr.net/npm/${s}@${r}${a}`).then(f=>f.text());e.push(l)});return await Promise.all(o),e}async function ai(t){return[await fetch(t.pattern).then(e=>e.text())]}async function hi(t){let e=t.pattern.slice(11);return(await gi().post("admin/local-file-provider/scan",{path:e}).then(i=>i.data)).contents.map(i=>i.content)}})();export{mi as __tla,dt as n,zt as t};
