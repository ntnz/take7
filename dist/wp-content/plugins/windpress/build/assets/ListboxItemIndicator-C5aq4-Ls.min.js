import{$t as be,Ct as x,Gt as Ee,Jt as Ce,On as Fe,Xt as F,b as q,gt as _,j as k,jn as a,k as ie,mt as we,nt as J,rt as T,ut as qe,v as R,x as oe,xn as w}from"./runtime-core.esm-bundler-DRZAYnQ2.min.js";import{c as O,l as D}from"./vue.runtime.esm-bundler-BlWQ9Hv9.min.js";import{B as _e,b as B}from"./Button-DgwZaK7A.min.js";import{t as Ae}from"./arrays-DRBrU6gF.min.js";import{G as X,I as Ke,O as ne,W as xe,_ as ue,b as re,k as Q}from"./Tooltip-8BMqxvlv.min.js";import{C as ke,g as Y,m as Be,x as Se}from"./namespaced-B-zXBPDg.min.js";import{n as Ve,t as Te}from"./VisuallyHiddenInput-DC-luDZL.min.js";import{t as de}from"./usePrimitiveElement-VQ4eLKTw.min.js";function Oe(){return{ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",SPACE_CODE:"Space"}}function Ie(n,u,l){return n===void 0?!1:Array.isArray(n)?n.some(o=>I(o,u,l)):I(n,u,l)}function I(n,u,l){return n===void 0||u===void 0?!1:typeof n=="string"?n===u:typeof l=="function"?l(n,u):typeof l=="string"?(n==null?void 0:n[l])===(u==null?void 0:u[l]):_e(n,u)}var[N,Le]=X("ListboxRoot"),He=k({__name:"ListboxRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},orientation:{type:String,required:!1,default:"vertical"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},selectionBehavior:{type:String,required:!1,default:"toggle"},highlightOnHover:{type:Boolean,required:!1},by:{type:[String,Function],required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(n,{expose:u,emit:l}){let o=n,r=l,{multiple:v,highlightOnHover:y,orientation:c,disabled:s,selectionBehavior:h,dir:b}=Fe(o),{getItems:g}=Y({isProvider:!0}),{handleTypeaheadSearch:G}=Se(),{primitiveElement:L,currentElement:p}=de(),E=Oe(),H=ke(b),se=Ve(p),P=w(),S=w(!1),W=w(!0),m=ne(o,"modelValue",r,{defaultValue:o.defaultValue??(v.value?[]:void 0),passive:o.modelValue===void 0,deep:!0});function ve(e){if(S.value=!0,o.multiple){let t=Array.isArray(m.value)?[...m.value]:[],i=t.findIndex(d=>I(d,e,o.by));o.selectionBehavior==="toggle"?(i===-1?t.push(e):t.splice(i,1),m.value=t):(m.value=[e],P.value=e)}else o.selectionBehavior==="toggle"&&I(m.value,e,o.by)?m.value=void 0:m.value=e;setTimeout(()=>{S.value=!1},1)}let f=w(null),$=w(null),A=w(!1),U=w(!1),Z=Q(),M=Q(),ee=Q();function j(){return g().map(e=>e.ref).filter(e=>e.dataset.disabled!=="")}function C(e,t=!0){if(!e)return;f.value=e,W.value&&f.value.focus(),t&&f.value.scrollIntoView({block:"nearest"});let i=g().find(d=>d.ref===e);r("highlight",i)}function pe(e){if(A.value)ee.trigger(e);else{let t=g().find(i=>I(i.value,e,o.by));t&&(f.value=t.ref,C(t.ref))}}function he(e){f.value&&f.value.isConnected&&(e.preventDefault(),e.stopPropagation(),U.value||f.value.click())}function fe(e){if(W.value){if(S.value=!0,A.value)M.trigger(e);else{let t=e.altKey||e.ctrlKey||e.metaKey;if(t&&e.key==="a"&&v.value){let i=g();m.value=[...i.map(d=>d.value)],e.preventDefault(),C(i[i.length-1].ref)}else if(!t){let i=G(e.key,g());i&&C(i)}}setTimeout(()=>{S.value=!1},1)}}function me(){U.value=!0}function ge(){T(()=>{U.value=!1})}function ae(){T(()=>{let e=new KeyboardEvent("keydown",{key:"PageUp"});te(e)})}function z(e){let t=f.value;t!=null&&t.isConnected&&($.value=t),f.value=null,r("leave",e)}function ce(e){var i,d;let t=new CustomEvent("listbox.entryFocus",{bubbles:!1,cancelable:!0});if((i=e.currentTarget)==null||i.dispatchEvent(t),r("entryFocus",t),!t.defaultPrevented)if($.value)C($.value);else{let K=(d=j())==null?void 0:d[0];C(K)}}function te(e){let t=Be(e,c.value,H.value);if(!t)return;let i=j();if(f.value){if(t==="last")i.reverse();else if(t==="prev"||t==="next"){t==="prev"&&i.reverse();let d=i.indexOf(f.value);i=i.slice(d+1)}ye(e,i[0])}if(i.length){let d=!f.value&&t==="prev"?i.length-1:0;C(i[d])}if(A.value)return M.trigger(e)}function ye(e,t){var i;if(!(A.value||o.selectionBehavior!=="replace"||!v.value||!Array.isArray(m.value))&&!((e.altKey||e.ctrlKey||e.metaKey)&&!e.shiftKey)&&e.shiftKey){let d=g().filter(V=>V.ref.dataset.disabled!==""),K=(i=d.find(V=>V.ref===t))==null?void 0:i.value;if(e.key===E.END?K=d[d.length-1].value:e.key===E.HOME&&(K=d[0].value),!K||!P.value)return;m.value=Ae(d.map(V=>V.value),P.value,K)}}async function le(e){if(await T(),A.value)Z.trigger(e);else{let t=j(),i=t.find(d=>d.dataset.state==="checked");i?C(i):t.length&&C(t[0])}}return Ee(m,()=>{S.value||T(()=>{le()})},{immediate:!0,deep:!0}),u({highlightedElement:f,highlightItem:pe,highlightFirstItem:ae,highlightSelected:le,getItems:g}),Le({modelValue:m,onValueChange:ve,multiple:v,orientation:c,dir:H,disabled:s,highlightOnHover:y,highlightedElement:f,isVirtual:A,virtualFocusHook:Z,virtualKeydownHook:M,virtualHighlightHook:ee,by:o.by,firstValue:P,selectionBehavior:h,focusable:W,onLeave:z,onEnter:ce,changeHighlight:C,onKeydownEnter:he,onKeydownNavigation:te,onKeydownTypeAhead:fe,onCompositionStart:me,onCompositionEnd:ge,highlightFirstItem:ae}),(e,t)=>(_(),q(a(B),{ref_key:"primitiveElement",ref:L,as:e.as,"as-child":e.asChild,dir:a(H),"data-disabled":a(s)?"":void 0,onPointerleave:z,onFocusout:t[0]||(t[0]=async i=>{let d=i.relatedTarget||i.target;await T(),f.value&&a(p)&&!a(p).contains(d)&&z(i)})},{default:F(()=>[x(e.$slots,"default",{modelValue:a(m)}),a(se)&&e.name?(_(),q(a(Te),{key:0,name:e.name,value:a(m),disabled:a(s),required:e.required},null,8,["name","value","disabled","required"])):oe("v-if",!0)]),_:3},8,["as","as-child","dir","data-disabled"]))}}),Pe=k({__name:"ListboxContent",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){let{CollectionSlot:u}=Y(),l=N(),o=Ke(!1,10);return(r,v)=>(_(),q(a(u),null,{default:F(()=>[ie(a(B),{role:"listbox",as:r.as,"as-child":r.asChild,tabindex:a(l).focusable.value?a(l).highlightedElement.value?"-1":"0":void 0,"aria-orientation":a(l).orientation.value,"aria-multiselectable":!!a(l).multiple.value,"data-orientation":a(l).orientation.value,onMousedown:v[0]||(v[0]=D(y=>o.value=!0,["left"])),onFocus:v[1]||(v[1]=y=>{a(o)||a(l).onEnter(y)}),onKeydown:[v[2]||(v[2]=O(D(y=>{a(l).focusable.value&&a(l).onKeydownNavigation(y)},["prevent"]),["down","up","left","right","home","end"])),O(a(l).onKeydownEnter,["enter"]),a(l).onKeydownTypeAhead]},{default:F(()=>[x(r.$slots,"default")]),_:3},8,["as","as-child","tabindex","aria-orientation","aria-multiselectable","data-orientation","onKeydown"])]),_:3}))}}),Re=k({__name:"ListboxFilter",props:{modelValue:{type:String,required:!1},autoFocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},emits:["update:modelValue"],setup(n,{emit:u}){let l=n,o=ne(l,"modelValue",u,{defaultValue:"",passive:l.modelValue===void 0}),r=N(),{primitiveElement:v,currentElement:y}=de(),c=R(()=>l.disabled||r.disabled.value||!1),s=w();return Ce(()=>{var h;return s.value=(h=r.highlightedElement.value)==null?void 0:h.id}),qe(()=>{r.focusable.value=!1,setTimeout(()=>{var h;l.autoFocus&&((h=y.value)==null||h.focus())},1)}),we(()=>{r.focusable.value=!0}),(h,b)=>(_(),q(a(B),{ref_key:"primitiveElement",ref:v,as:h.as,"as-child":h.asChild,value:a(o),disabled:c.value?"":void 0,"data-disabled":c.value?"":void 0,"aria-disabled":c.value??void 0,"aria-activedescendant":s.value,type:"text",onKeydown:[O(D(a(r).onKeydownNavigation,["prevent"]),["down","up","home","end"]),O(a(r).onKeydownEnter,["enter"])],onInput:b[0]||(b[0]=g=>{o.value=g.target.value,a(r).highlightFirstItem()}),onCompositionstart:a(r).onCompositionStart,onCompositionend:a(r).onCompositionEnd},{default:F(()=>[x(h.$slots,"default",{modelValue:a(o)})]),_:3},8,["as","as-child","value","disabled","data-disabled","aria-disabled","aria-activedescendant","onKeydown","onCompositionstart","onCompositionend"]))}}),[De,Ne]=X("ListboxGroup"),Ge=k({__name:"ListboxGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){let u=n,l=ue(void 0,"reka-listbox-group");return Ne({id:l}),(o,r)=>(_(),q(a(B),J({role:"group"},u,{"aria-labelledby":a(l)}),{default:F(()=>[x(o.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),We="listbox.select",[$e,Ue]=X("ListboxItem"),Me=k({__name:"ListboxItem",props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},emits:["select"],setup(n,{emit:u}){let l=n,o=u,r=ue(void 0,"reka-listbox-item"),{CollectionItem:v}=Y(),{forwardRef:y,currentElement:c}=re(),s=N(),h=R(()=>c.value===s.highlightedElement.value),b=R(()=>Ie(s.modelValue.value,l.value,s.by)),g=R(()=>s.disabled.value||l.disabled);async function G(p){o("select",p),!(p!=null&&p.defaultPrevented)&&!g.value&&p&&(s.onValueChange(l.value),s.changeHighlight(c.value))}function L(p){let E={originalEvent:p,value:l.value};xe(We,G,E)}return Ue({isSelected:b}),(p,E)=>(_(),q(a(v),{value:p.value},{default:F(()=>[be([h.value,b.value],()=>ie(a(B),J({id:a(r)},p.$attrs,{ref:a(y),role:"option",tabindex:a(s).focusable.value?h.value?"0":"-1":-1,"aria-selected":b.value,as:p.as,"as-child":p.asChild,disabled:g.value?"":void 0,"data-disabled":g.value?"":void 0,"data-highlighted":h.value?"":void 0,"data-state":b.value?"checked":"unchecked",onClick:L,onKeydown:O(D(L,["prevent"]),["space"]),onPointermove:E[0]||(E[0]=H=>{a(s).highlightedElement.value!==a(c)&&(a(s).highlightOnHover.value?a(s).changeHighlight(a(c),!1):a(s).focusable.value||a(s).changeHighlight(a(c),!1))})}),{default:F(()=>[x(p.$slots,"default")]),_:3},16,["id","tabindex","aria-selected","as","as-child","disabled","data-disabled","data-highlighted","data-state","onKeydown"]),E,1)]),_:3},8,["value"]))}}),je=k({__name:"ListboxItemIndicator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(n){let u=n;re();let l=$e();return(o,r)=>a(l).isSelected.value?(_(),q(a(B),J({key:0,"aria-hidden":"true"},u),{default:F(()=>[x(o.$slots,"default")]),_:3},16)):oe("v-if",!0)}});export{Re as a,N as c,De as i,Me as n,Pe as o,Ge as r,He as s,je as t};
