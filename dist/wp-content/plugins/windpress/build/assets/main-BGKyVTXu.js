import{s as j}from"./chunk-BP1tGd43.min.js";import"./dist-gE_XXzPp.min.js";import{Gt as _,rt as d,xn as f}from"./runtime-core.esm-bundler-DRZAYnQ2.min.js";import"./vue.runtime.esm-bundler-BlWQ9Hv9.min.js";import"./dist-CyCkKGye.min.js";import"./isObject-DkMBgCmn.min.js";import"./_toKey-lf-76zFF.min.js";import{t as L}from"./debounce-DmqvMdin.min.js";import{t as B}from"./set-D10waSiW.min.js";import{t as p}from"./preload-helper-hRiy8xQv.min.js";import"./dist-7RENR6RM.min.js";import{t as C}from"./logger-B3j_KY2M.js";import{n as W,t as U}from"./tippy.esm-CtRNZGHn.min.js";import{n as G,t as X}from"./dist-DNqxA4Wq.min.js";import{n as q,t as Y}from"./highlight-in-textarea-By4lYHKb.js";import{t as J}from"./tribute.min-CuxQbPzU.min.js";import{a as m,i as A,n as K,r as T}from"./constant-C69KzVRS.js";(async()=>{var M=j(J()),g=null;(async()=>g=await G({themes:[p(()=>import("./dark-plus-DUxK4Phe.min.js").then(async e=>(await e.__tla,e)),[],import.meta.url),p(()=>import("./light-plus-D1Qkc2mD.min.js").then(async e=>(await e.__tla,e)),[],import.meta.url)],langs:[p(()=>import("./css-CZ_P402v.min.js").then(async e=>(await e.__tla,e)),[],import.meta.url)],engine:X(p(()=>import("./wasm-AKcBxSw7.min.js").then(async e=>(await e.__tla,e)),[],import.meta.url))}))();var s=document.createRange().createContextualFragment(`
    <textarea id="windpressbreakdance-plc-input" class="windpressbreakdance-plc-input" rows="2" spellcheck="false"></textarea>
`).querySelector("#windpressbreakdance-plc-input"),h=document.createElement("div");h.classList.add("windpressbreakdance-plc-input-container"),h.appendChild(s);var $=document.createRange().createContextualFragment(`
    <div class="windpressbreakdance-plc-action-container">
        <div class="actions">
        </div>
    </div>
`).querySelector(".windpressbreakdance-plc-action-container").querySelector(".actions"),I=document.createRange().createContextualFragment(`
    <span id="windpressbreakdance-plc-class-sort" class="bricks-svg-wrapper windpressbreakdance-plc-class-sort" data-balloon="Automatic Class Sorting" data-balloon-pos="bottom-right">
        <svg  xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round" class="bricks-svg icon icon-tabler icons-tabler-outline icon-tabler-reorder"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" /><path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" /><path d="M17 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" /><path d="M5 11v-3a3 3 0 0 1 3 -3h8a3 3 0 0 1 3 3v3" /><path d="M16.5 8.5l2.5 2.5l2.5 -2.5" /></svg>    
    </span>
`).querySelector("#windpressbreakdance-plc-class-sort");$.appendChild(I);var w=f(!1),k=f(null),y=null;q(s);var E=[];wp.hooks.addAction("windpressbreakdance-autocomplete-items-refresh","windpressbreakdance",()=>{E=wp.hooks.applyFilters("windpressbreakdance-autocomplete-items",[],s.value)}),wp.hooks.doAction("windpressbreakdance-autocomplete-items-refresh");var o=new M.default({menuContainer:document.querySelector("#app"),containerClass:"windpressbreakdance-tribute-container",autocompleteMode:!0,menuItemLimit:50,noMatchTemplate:"",values:async function(e,t){let a=await wp.hooks.applyFilters("windpressbreakdance-autocomplete-items-query",E,e);t(a)},lookup:"value",itemClass:"class-item",menuItemTemplate:function(e){let t="";return e.original.color!==void 0&&(t+=`background-color: ${e.original.color};`),e.original.fontWeight!==void 0&&(t+=`font-weight: ${e.original.fontWeight};`),`
            <span class="class-name" data-tribute-class-name="${e.original.value}">${e.string}</span>
            <span class="class-hint" style="${t}"></span>
        `}});o.setMenuContainer=function(e){this.menuContainer=e};var x=o.events.callbacks;o.events.callbacks=function(){return{...x.call(this),up:(e,t)=>{if(this.tribute.isActive&&this.tribute.current.filteredItems){e.preventDefault(),e.stopPropagation();let a=this.tribute.current.filteredItems.length,n=this.tribute.menuSelected;a>n&&n>0?(this.tribute.menuSelected--,this.setActiveLi()):n===0&&(this.tribute.menuSelected=a-1,this.setActiveLi(),this.tribute.menu.scrollTop=this.tribute.menu.scrollHeight),S()}},down:(e,t)=>{if(this.tribute.isActive&&this.tribute.current.filteredItems){e.preventDefault(),e.stopPropagation();let a=this.tribute.current.filteredItems.length-1,n=this.tribute.menuSelected;a>n?(this.tribute.menuSelected++,this.setActiveLi()):a===n&&(this.tribute.menuSelected=0,this.setActiveLi(),this.tribute.menu.scrollTop=0),S()}}}},o.attach(s),m.$store.subscribeAction((e,t)=>{e.type==="ui/activateElement"&&(k.value=e.payload),e.type==="ui/setLeftSidebarState"&&(w.value=e.payload==="elementproperties")}),_([k,w],(e,t)=>{e[0]!==t[0]&&d(()=>{N(),D()}),e[0]&&e[1]&&d(()=>{let a=document.querySelector(".breakdance-element-properties-panel .vscroll-scroll .vscroll-scroll");a&&a.querySelector(".windpressbreakdance-plc-input")===null&&a.insertBefore(h,a.firstChild)})}),y=new Y(s,{highlight:[{highlight:new RegExp("(?<=\\s|^)(?:(?!\\s).)+(?=\\s|$)","g"),className:"word"},{highlight:new RegExp("(?<=\\s)\\s","g"),className:"multispace",blank:!0}]});async function N(){var e,t,a,n,r;s.value=((r=(n=(a=(t=(e=m.$store.getters["ui/activeElement"].data)==null?void 0:e.properties)==null?void 0:t.settings)==null?void 0:a.advanced)==null?void 0:n.classes)==null?void 0:r.join(" "))||""}async function P(){var a,n,r,l;if((l=(r=(n=(a=m.$store.getters["ui/activeElement"].data)==null?void 0:a.properties)==null?void 0:n.settings)==null?void 0:r.advanced)!=null&&l.classes)return!0;document.querySelector(".properties-panel-tab.breakdance-tab.breakdance-tab--id-settings").click();let e=document.querySelector("#settings .properties-panel-accordion.conditional-control-display-visible>div");for(;e===null;)e=document.querySelector("#settings .properties-panel-accordion.conditional-control-display-visible>div"),await new Promise(i=>setTimeout(i,100));e.parentElement.classList.contains("expanded")||e.click();let t=document.querySelector('#breakdance-class-input-search input[placeholder=".my-cool-class"]');for(;t===null;)t=document.querySelector('#breakdance-class-input-search input[placeholder=".my-cool-class"]'),await new Promise(i=>setTimeout(i,100));return t.focus(),t.value="windpressbreakdance",t.dispatchEvent(new Event("input",{bubbles:!0})),await new Promise(i=>setTimeout(i,100)),document.querySelector("#breakdance-class-input-search>button").click(),!0}var F=L(R,50);async function R(){if(!await P()){C("Upstream path not found!",{module:"plain-classes",type:"error"});return}s.focus(),B(m.$store.getters["ui/activeElement"].data,"properties.settings.advanced.classes",s.value.trim().split(" ").filter(e=>e.trim()!=="")||[])}s.addEventListener("input",function(e){F()});function D(){d(()=>{try{y.handleInput()}catch{}q.update(s),o.hideMenu()})}var O=new MutationObserver(function(e){e.forEach(function(t){t.type==="childList"&&t.addedNodes.length>0&&t.addedNodes.forEach(a=>{let n=a.querySelector(".class-name").dataset.tributeClassName;a.addEventListener("mouseenter",r=>{v(n)}),a.addEventListener("mouseleave",r=>{b()}),a.addEventListener("click",r=>{b(),v(n)})})})}),c=null;s.addEventListener("tribute-active-true",function(e){c===null&&(c=document.querySelector(".windpressbreakdance-tribute-container>ul")),d(()=>{c&&O.observe(c,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"]})})});function v(e){let t=A.$store.getters["ui/activeElement"].id,a=T.querySelector(`[data-node-id="${t}"]`);a.classList.add(e),a.dataset.tributeClassName=e}function b(){z()}function S(){let e=o.menu.querySelector("li.highlight>span.class-name");b(),v(e.dataset.tributeClassName)}function z(){let e=A.$store.getters["ui/activeElement"].id,t=T.querySelector(`[data-node-id="${e}"]`);t.dataset.tributeClassName&&(t.classList.remove(t.dataset.tributeClassName),t.dataset.tributeClassName="")}s.addEventListener("highlights-updated",function(e){H()});var u=W(document.createElement("div"),{plugins:[U],allowHTML:!0,arrow:!1,duration:[500,0],followCursor:!0,trigger:"manual"});function H(){let e=document.querySelector(".hit-container");if(e===null)return;u.reference=e;async function t(r){let l=r.textContent,i=await K.contentWindow.windpress.module.classnameToCss.generate(l);if(i===null||i.trim()==="")return null;u.setContent(g.codeToHtml(i,{lang:"css",theme:document.querySelector("div#app.theme--light")===null?"dark-plus":"light-plus"})),u.show()}let a=f(null),n=L(function(r){let l=r.clientX,i=r.clientY;a.value=document.elementsFromPoint(l,i).find(V=>V.matches('mark[class="word"]'))||null},10);e.addEventListener("mousemove",n),e.addEventListener("mouseleave",function(r){n.cancel(),a.value=null}),_(a,(r,l)=>{r&&r!==l?t(r):u.hide()})}C("Module loaded!",{module:"plain-classes"})})();
