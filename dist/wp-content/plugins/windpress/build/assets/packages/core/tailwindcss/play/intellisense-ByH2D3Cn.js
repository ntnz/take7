import{n as x,r as j}from"../../../../lib-CIRtt3Rt.min.js";import"../../../../source-map-generator-CYV46cXA.min.js";import"../../../../dist-gE_XXzPp.min.js";import"../../../../dist-CyCkKGye.min.js";import"../../../../chunk-HTB5LLOP-BErhSb2z.min.js";import"../../../../isObject-DkMBgCmn.min.js";import"../../../../_toKey-lf-76zFF.min.js";import{t as h}from"../../../../set-D10waSiW.min.js";import{t as J}from"../../../../fuse-C49RXzuT.min.js";import"../../../../preload-helper-hRiy8xQv.min.js";import"../../../../base64-F91Q3Zd1.min.js";import"../../../../lib-DdqEuSaZ.min.js";import"../../../../dist-7RENR6RM.min.js";import"../../../../path-browserify-QbCHt7ci.min.js";import"../../../../pre-process-DdabCSb9.js";import"../../../../cssesc-CRBmtthf.js";import{t as L}from"../../../../vfs-Nkm45dX9.js";import{c as $,n as B,o as E,r as H}from"../../../../intellisense-Dz5eHkgp.js";import"../../../../adobe-css-tools-Cq8Zs2rG.min.js";import"../../../../dlv.umd-ByGaGM3P.min.js";async function I(e,t){let o=t.split(/\s+/).filter(l=>l!==""&&l!=="|"),r=await B(e,o);return Array.isArray(r)?r.join(" "):r}async function W(e,t){let o=t.split(/\s+/).filter(r=>r!==""&&r!=="|");return(await E(e,o)).join(" ")}var p=null;function _(e){return btoa(JSON.stringify(Object.keys(e).sort().map(t=>`${t}:${e[t].length}`)))}function D(){p=null}function C(e){var t;return((t=e==null?void 0:e.find(o=>o.property.includes("color")))==null?void 0:t.value)||null}function F(e){let t=new Set,o=r=>r.replace(/\\([0-9a-fA-F]{1,6}) ?/g,(l,c)=>String.fromCodePoint(parseInt(c,16))).replace(/\\([^\s])/g,"$1");for(let r of Object.keys(e))if(r.endsWith(".css")){let l=x(e[r]);j(l,{visit:"Selector",enter(c){j(c,{visit:"ClassSelector",enter(m){t.add(o(m.name))}})}})}return Array.from(t).map(r=>({kind:"user",selector:r}))}function P(e,t,o,r=!1){let l=_(e),c=Date.now();(r||!p||p.volumeHash!==l)&&(p={classLists:[...H(t),...F(e)],volumeHash:l,timestamp:c,queryCache:new Map});let{classLists:m,queryCache:u}=p;if(u.has(o))return u.get(o);if(o===""){let i=m.map(s=>({value:s.selector,color:C(s.declarations)}));return u.set(o,i),i}let v=o.split(":"),q=v.slice(0,-1).join(":"),n=v.pop()||"",b="";n.startsWith("!")&&(n=n.slice(1),b="!");let a=!1;if(n.includes("/")){let[i,s]=n.split("/");s===""?(n=i,a=s):isNaN(Number(s))||Number(s)<0||Number(s)>100?n=[i,s].join("/"):(n=i,a=parseInt(s.toString()))}let w=m.filter(i=>i.selector.includes(n));if(a!==!1){let i=[],s=a===""?5:1,A=a===""||Number(a)>9?0:Math.floor((Number(a)*10+1)/10)*10,M=a===""||Number(a)>9?100:Math.ceil((Number(a)*10+1)/10)*10;w.forEach(S=>{for(let y=A;y<=M;y+=s)i.push({...S,selector:S.selector+"/"+y})}),w=i}let N=new J(w,{keys:["selector"],threshold:.4}).search(n).map(i=>{let s=i.item;return{value:[q,(b?"!":"")+s.selector].filter(Boolean).join(":"),color:C(s.declarations)}});return u.set(o,N),N}var k=new BroadcastChannel("windpress"),g=document.querySelector('script#windpress\\:vfs[type="text/plain"]'),d,f;async function O(){let e=L((g==null?void 0:g.textContent)||"e30=");JSON.stringify(f)!==JSON.stringify(e)&&D(),f=e,d=await $({volume:f}),k.postMessage({source:"windpress/intellisense",target:"any",task:"windpress.code-editor.saved.done"})}O(),k.addEventListener("message",async e=>{let t=e.data;t.source==="windpress/dashboard"&&t.target==="windpress/intellisense"&&t.task==="windpress.code-editor.saved"&&O()}),h(window,"windpress.module.autocomplete.query",e=>P(f,d,e)),h(window,"windpress.module.classnameToCss.generate",async e=>I(d,e)),h(window,"windpress.module.classSorter.sort",async e=>W(d,e));
