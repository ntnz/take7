import{v as F,xn as ut}from"./runtime-core.esm-bundler-DRZAYnQ2.min.js";import{i as V,n as it}from"./log-BpAY2Wg4.js";import{t as bt}from"./api-j1hi8yn9.js";import{a as R,i as T,o as p,r as W,t as ft}from"./isObject-DkMBgCmn.min.js";import{c as v,i as A,s as y,u as q}from"./_toKey-lf-76zFF.min.js";import{_ as lt,a as jt,c as O,f as m,g as vt,l as pt,m as yt,n as mt,o as dt,p as C,r as G,s as gt,t as ht,u as wt,v as d,y as At}from"./_initCloneObject-7WDIrBbB.min.js";import{n as Ot}from"./set-D10waSiW.min.js";import{t as Pt}from"./virtualRef-CZBazqxr.js";const N=V("busy",()=>{let t=it(),r=ut([]),e=F(()=>r.value.length>0),a=F(()=>s=>r.value.some(c=>c.task===s));function i(s,c){r.value.unshift({timestamp:Date.now(),task:s}),c!=null&&(typeof c=="string"?t.add({message:c,type:"info",group:"busy"}):typeof c=="object"&&t.add(Object.assign({type:"info",group:"busy"},c)))}function u(s){let c=!1;r.value=r.value.filter(w=>c?!0:w.task===s?(c=!0,!1):!0)}function o(){r.value=[]}return{tasks:r,isBusy:e,hasTask:a,add:i,remove:u,reset:o}});var P=y(p,"WeakMap");function St(t,r){for(var e=-1,a=t==null?0:t.length;++e<a&&r(t[e],e,t)!==!1;);return t}var xt=St,kt=pt(Object.keys,Object),It=Object.prototype.hasOwnProperty;function Et(t){if(!vt(t))return kt(t);var r=[];for(var e in Object(t))It.call(t,e)&&e!="constructor"&&r.push(e);return r}var Mt=Et;function Ut(t){return lt(t)?wt(t):Mt(t)}var S=Ut;function Dt(t,r){for(var e=-1,a=r.length,i=t.length;++e<a;)t[i+e]=r[e];return t}var _=Dt;function Bt(t,r){return t&&d(r,S(r),t)}var Ft=Bt;function Vt(t,r){return t&&d(r,O(r),t)}var Rt=Vt;function Tt(t,r){for(var e=-1,a=t==null?0:t.length,i=0,u=[];++e<a;){var o=t[e];r(o,e,t)&&(u[i++]=o)}return u}var Wt=Tt;function qt(){return[]}var L=qt,Ct=Object.prototype.propertyIsEnumerable,$=Object.getOwnPropertySymbols,x=$?function(t){return t==null?[]:(t=Object(t),Wt($(t),function(r){return Ct.call(t,r)}))}:L;function Gt(t,r){return d(t,x(t),r)}var Nt=Gt,z=Object.getOwnPropertySymbols?function(t){for(var r=[];t;)_(r,x(t)),t=gt(t);return r}:L;function _t(t,r){return d(t,z(t),r)}var Lt=_t;function $t(t,r,e){var a=r(t);return q(t)?a:_(a,e(t))}var H=$t;function zt(t){return H(t,S,x)}var J=zt;function Ht(t){return H(t,O,z)}var Jt=Ht,k=y(p,"DataView"),I=y(p,"Promise"),E=y(p,"Set"),K="[object Map]",Kt="[object Object]",Q="[object Promise]",X="[object Set]",Y="[object WeakMap]",Z="[object DataView]",Qt=v(k),Xt=v(A),Yt=v(I),Zt=v(E),tr=v(P),l=T;(k&&l(new k(new ArrayBuffer(1)))!=Z||A&&l(new A)!=K||I&&l(I.resolve())!=Q||E&&l(new E)!=X||P&&l(new P)!=Y)&&(l=function(t){var r=T(t),e=r==Kt?t.constructor:void 0,a=e?v(e):"";if(a)switch(a){case Qt:return Z;case Xt:return K;case Yt:return Q;case Zt:return X;case tr:return Y}return r});var g=l,rr=Object.prototype.hasOwnProperty;function er(t){var r=t.length,e=new t.constructor(r);return r&&typeof t[0]=="string"&&rr.call(t,"index")&&(e.index=t.index,e.input=t.input),e}var nr=er;function ar(t,r){var e=r?G(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}var or=ar,sr=/\w*$/;function cr(t){var r=new t.constructor(t.source,sr.exec(t));return r.lastIndex=t.lastIndex,r}var ur=cr,tt=R?R.prototype:void 0,rt=tt?tt.valueOf:void 0;function ir(t){return rt?Object(rt.call(t)):{}}var br=ir,fr="[object Boolean]",lr="[object Date]",jr="[object Map]",vr="[object Number]",pr="[object RegExp]",yr="[object Set]",mr="[object String]",dr="[object Symbol]",gr="[object ArrayBuffer]",hr="[object DataView]",wr="[object Float32Array]",Ar="[object Float64Array]",Or="[object Int8Array]",Pr="[object Int16Array]",Sr="[object Int32Array]",xr="[object Uint8Array]",kr="[object Uint8ClampedArray]",Ir="[object Uint16Array]",Er="[object Uint32Array]";function Mr(t,r,e){var a=t.constructor;switch(r){case gr:return G(t);case fr:case lr:return new a(+t);case hr:return or(t,e);case wr:case Ar:case Or:case Pr:case Sr:case xr:case kr:case Ir:case Er:return mt(t,e);case jr:return new a;case vr:case mr:return new a(t);case pr:return ur(t);case yr:return new a;case dr:return br(t)}}var Ur=Mr,Dr="[object Map]";function Br(t){return W(t)&&g(t)==Dr}var Fr=Br,et=m&&m.isMap,Vr=et?C(et):Fr,Rr="[object Set]";function Tr(t){return W(t)&&g(t)==Rr}var Wr=Tr,nt=m&&m.isSet,qr=nt?C(nt):Wr,Cr=1,Gr=2,Nr=4,at="[object Arguments]",_r="[object Array]",Lr="[object Boolean]",$r="[object Date]",zr="[object Error]",ot="[object Function]",Hr="[object GeneratorFunction]",Jr="[object Map]",Kr="[object Number]",st="[object Object]",Qr="[object RegExp]",Xr="[object Set]",Yr="[object String]",Zr="[object Symbol]",te="[object WeakMap]",re="[object ArrayBuffer]",ee="[object DataView]",ne="[object Float32Array]",ae="[object Float64Array]",oe="[object Int8Array]",se="[object Int16Array]",ce="[object Int32Array]",ue="[object Uint8Array]",ie="[object Uint8ClampedArray]",be="[object Uint16Array]",fe="[object Uint32Array]",n={};n[at]=n[_r]=n[re]=n[ee]=n[Lr]=n[$r]=n[ne]=n[ae]=n[oe]=n[se]=n[ce]=n[Jr]=n[Kr]=n[st]=n[Qr]=n[Xr]=n[Yr]=n[Zr]=n[ue]=n[ie]=n[be]=n[fe]=!0,n[zr]=n[ot]=n[te]=!1;function h(t,r,e,a,i,u){var o,s=r&Cr,c=r&Gr,w=r&Nr;if(e&&(o=i?e(t,a,i,u):e(t)),o!==void 0)return o;if(!ft(t))return t;var M=q(t);if(M){if(o=nr(t),!s)return At(t,o)}else{var j=g(t),U=j==ot||j==Hr;if(yt(t))return jt(t,s);if(j==st||j==at||U&&!i){if(o=c||U?{}:ht(t),!s)return c?Lt(t,Rt(o,t)):Nt(t,Ft(o,t))}else{if(!n[j])return i?t:{};o=Ur(t,j,s)}}u||(u=new dt);var D=u.get(t);if(D)return D;u.set(t,o),qr(t)?t.forEach(function(b){o.add(h(b,r,e,b,t,u))}):Vr(t)&&t.forEach(function(b,f){o.set(f,h(b,r,e,f,t,u))});var B=M?void 0:(w?c?Jt:J:c?O:S)(t);return xt(B||t,function(b,f){B&&(f=b,b=t[f]),Ot(o,f,h(b,r,e,f,t,u))}),o}var le=h,je=1,ve=4;function pe(t){return le(t,je|ve)}var ct=pe;const ye=V("settings",()=>{let t=N(),r=bt(),{state:e,getVirtualRef:a}=Pt({});async function i(){return t.add("settings.doPull"),await r.request("/admin/settings/options/index",{method:"GET"}).then(s=>(e.value=ct(s.data.options),{message:s.data.message,success:!0})).catch(s=>{}).finally(()=>{t.remove("settings.doPull")})}async function u(){return t.add("settings.doPush"),r.request("/admin/settings/options/store",{method:"POST",data:{options:e.value}}).then(s=>({message:s.data.message,success:!0})).catch(s=>{throw Error(s.response?s.response.data.message:s.message)}).finally(()=>{t.remove("settings.doPush")})}function o(){Object.keys(e.value).length===0&&i()}return{options:e,virtualOptions:a,doPull:i,doPush:u,initPull:o}});export{N as a,J as i,ct as n,g as r,ye as t};
