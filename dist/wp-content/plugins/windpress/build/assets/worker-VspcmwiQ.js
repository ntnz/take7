import{t as Rn}from"./log-BpAY2Wg4.js";import{t as Wn}from"./api-j1hi8yn9.js";import{n as Vn}from"./index.browser-DQZXIZaU.min.js";import{t as Qn}from"./get-CMyps7rf.min.js";import{t as Ut}from"./preload-helper-hRiy8xQv.min.js";import{n as zn}from"./base64-F91Q3Zd1.min.js";import{t as qt}from"./dist-DHrCA_qW.min.js";let Rt,Yn=(async()=>{var Ge=[["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]],Gt=Object.fromEntries([...Ge.map(([e,t])=>[t,e]),["&apos;","'"],["&nbsp;","\xA0"]]),Ht=new Map(Ge);RegExp(`[${[...Ht.keys()].join("")}]`,"g");var Xt={entityList:Gt},Zt=1114111,en=/&#([0-9]+);/g,tn=new RegExp("&#x(\\p{AHex}+);","gu"),He=new WeakMap;function nn(e,t={}){let{entityList:n}={...Xt,...t},i=He.get(n);return i||(i=RegExp(`(${Object.keys(n).sort((r,s)=>s.length-r.length).join("|")})`,"g"),He.set(n,i)),e.replaceAll(i,r=>n[r]).replaceAll(en,(r,s)=>Xe(s,10)).replaceAll(tn,(r,s)=>Xe(s,16))}function Xe(e,t){let n=parseInt(e,t);return n>Zt?"\uFFFD":String.fromCodePoint(n)}var Ie=Symbol.for("yaml.alias"),Ce=Symbol.for("yaml.document"),P=Symbol.for("yaml.map"),Ze=Symbol.for("yaml.pair"),fe=Symbol.for("yaml.scalar"),R=Symbol.for("yaml.seq"),x=Symbol.for("yaml.node.type"),J=e=>!!e&&typeof e=="object"&&e[x]===Ie,W=e=>!!e&&typeof e=="object"&&e[x]===Ce,ne=e=>!!e&&typeof e=="object"&&e[x]===P,k=e=>!!e&&typeof e=="object"&&e[x]===Ze,$=e=>!!e&&typeof e=="object"&&e[x]===fe,ie=e=>!!e&&typeof e=="object"&&e[x]===R;function N(e){if(e&&typeof e=="object")switch(e[x]){case P:case R:return!0}return!1}function E(e){if(e&&typeof e=="object")switch(e[x]){case Ie:case P:case fe:case R:return!0}return!1}var et=e=>($(e)||N(e))&&!!e.anchor,j=Symbol("break visit"),tt=Symbol("skip children"),_=Symbol("remove node");function V(e,t){let n=nt(t);W(e)?Q(null,e.contents,n,Object.freeze([e]))===_&&(e.contents=null):Q(null,e,n,Object.freeze([]))}V.BREAK=j,V.SKIP=tt,V.REMOVE=_;function Q(e,t,n,i){let r=it(e,t,n,i);if(E(r)||k(r))return rt(e,i,r),Q(e,r,n,i);if(typeof r!="symbol"){if(N(t)){i=Object.freeze(i.concat(t));for(let s=0;s<t.items.length;++s){let o=Q(s,t.items[s],n,i);if(typeof o=="number")s=o-1;else{if(o===j)return j;o===_&&(t.items.splice(s,1),--s)}}}else if(k(t)){i=Object.freeze(i.concat(t));let s=Q("key",t.key,n,i);if(s===j)return j;s===_&&(t.key=null);let o=Q("value",t.value,n,i);if(o===j)return j;o===_&&(t.value=null)}}return r}async function _e(e,t){let n=nt(t);W(e)?await z(null,e.contents,n,Object.freeze([e]))===_&&(e.contents=null):await z(null,e,n,Object.freeze([]))}_e.BREAK=j,_e.SKIP=tt,_e.REMOVE=_;async function z(e,t,n,i){let r=await it(e,t,n,i);if(E(r)||k(r))return rt(e,i,r),z(e,r,n,i);if(typeof r!="symbol"){if(N(t)){i=Object.freeze(i.concat(t));for(let s=0;s<t.items.length;++s){let o=await z(s,t.items[s],n,i);if(typeof o=="number")s=o-1;else{if(o===j)return j;o===_&&(t.items.splice(s,1),--s)}}}else if(k(t)){i=Object.freeze(i.concat(t));let s=await z("key",t.key,n,i);if(s===j)return j;s===_&&(t.key=null);let o=await z("value",t.value,n,i);if(o===j)return j;o===_&&(t.value=null)}}return r}function nt(e){return typeof e=="object"&&(e.Collection||e.Node||e.Value)?Object.assign({Alias:e.Node,Map:e.Node,Scalar:e.Node,Seq:e.Node},e.Value&&{Map:e.Value,Scalar:e.Value,Seq:e.Value},e.Collection&&{Map:e.Collection,Seq:e.Collection},e):e}function it(e,t,n,i){var r,s,o,l,c;if(typeof n=="function")return n(e,t,i);if(ne(t))return(r=n.Map)==null?void 0:r.call(n,e,t,i);if(ie(t))return(s=n.Seq)==null?void 0:s.call(n,e,t,i);if(k(t))return(o=n.Pair)==null?void 0:o.call(n,e,t,i);if($(t))return(l=n.Scalar)==null?void 0:l.call(n,e,t,i);if(J(t))return(c=n.Alias)==null?void 0:c.call(n,e,t,i)}function rt(e,t,n){let i=t[t.length-1];if(N(i))i.items[e]=n;else if(k(i))e==="key"?i.key=n:i.value=n;else if(W(i))i.contents=n;else{let r=J(i)?"alias":"scalar";throw Error(`Cannot replace node with ${r} parent`)}}var rn={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},sn=e=>e.replace(/[!,[\]{}]/g,t=>rn[t]),re=class F{constructor(t,n){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},F.defaultYaml,t),this.tags=Object.assign({},F.defaultTags,n)}clone(){let t=new F(this.yaml,this.tags);return t.docStart=this.docStart,t}atDocument(){let t=new F(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:F.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},F.defaultTags);break}return t}add(t,n){this.atNextDocument&&(this.atNextDocument=(this.yaml={explicit:F.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},F.defaultTags),!1));let i=t.trim().split(/[ \t]+/),r=i.shift();switch(r){case"%TAG":{if(i.length!==2&&(n(0,"%TAG directive should contain exactly two parts"),i.length<2))return!1;let[s,o]=i;return this.tags[s]=o,!0}case"%YAML":{if(this.yaml.explicit=!0,i.length!==1)return n(0,"%YAML directive should contain exactly one part"),!1;let[s]=i;if(s==="1.1"||s==="1.2")return this.yaml.version=s,!0;{let o=/^\d+\.\d+$/.test(s);return n(6,`Unsupported YAML version ${s}`,o),!1}}default:return n(0,`Unknown directive ${r}`,!0),!1}}tagName(t,n){if(t==="!")return"!";if(t[0]!=="!")return n(`Not a valid tag: ${t}`),null;if(t[1]==="<"){let o=t.slice(2,-1);return o==="!"||o==="!!"?(n(`Verbatim tags aren't resolved, so ${t} is invalid.`),null):(t[t.length-1]!==">"&&n("Verbatim tags must end with a >"),o)}let[,i,r]=t.match(/^(.*!)([^!]*)$/s);r||n(`The ${t} tag has no suffix`);let s=this.tags[i];if(s)try{return s+decodeURIComponent(r)}catch(o){return n(String(o)),null}return i==="!"?t:(n(`Could not resolve tag: ${t}`),null)}tagString(t){for(let[n,i]of Object.entries(this.tags))if(t.startsWith(i))return n+sn(t.substring(i.length));return t[0]==="!"?t:`!<${t}>`}toString(t){let n=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],i=Object.entries(this.tags),r;if(t&&i.length>0&&E(t.contents)){let s={};V(t.contents,(o,l)=>{E(l)&&l.tag&&(s[l.tag]=!0)}),r=Object.keys(s)}else r=[];for(let[s,o]of i)s==="!!"&&o==="tag:yaml.org,2002:"||(!t||r.some(l=>l.startsWith(o)))&&n.push(`%TAG ${s} ${o}`);return n.join(`
`)}};re.defaultYaml={explicit:!1,version:"1.2"},re.defaultTags={"!!":"tag:yaml.org,2002:"};function st(e){if(/[\x00-\x19\s,[\]{}]/.test(e)){let t=`Anchor must not contain whitespace or control characters: ${JSON.stringify(e)}`;throw Error(t)}return!0}function ot(e){let t=new Set;return V(e,{Value(n,i){i.anchor&&t.add(i.anchor)}}),t}function lt(e,t){for(let n=1;;++n){let i=`${e}${n}`;if(!t.has(i))return i}}function on(e,t){let n=[],i=new Map,r=null;return{onAnchor:s=>{n.push(s),r??(r=ot(e));let o=lt(t,r);return r.add(o),o},setAnchors:()=>{for(let s of n){let o=i.get(s);if(typeof o=="object"&&o.anchor&&($(o.node)||N(o.node)))o.node.anchor=o.anchor;else{let l=Error("Failed to resolve repeated object (this should not happen)");throw l.source=s,l}}},sourceObjects:i}}function Y(e,t,n,i){if(i&&typeof i=="object")if(Array.isArray(i))for(let r=0,s=i.length;r<s;++r){let o=i[r],l=Y(e,i,String(r),o);l===void 0?delete i[r]:l!==o&&(i[r]=l)}else if(i instanceof Map)for(let r of Array.from(i.keys())){let s=i.get(r),o=Y(e,i,r,s);o===void 0?i.delete(r):o!==s&&i.set(r,o)}else if(i instanceof Set)for(let r of Array.from(i)){let s=Y(e,i,r,r);s===void 0?i.delete(r):s!==r&&(i.delete(r),i.add(s))}else for(let[r,s]of Object.entries(i)){let o=Y(e,i,r,s);o===void 0?delete i[r]:o!==s&&(i[r]=o)}return e.call(t,n,i)}function I(e,t,n){if(Array.isArray(e))return e.map((i,r)=>I(i,String(r),n));if(e&&typeof e.toJSON=="function"){if(!n||!et(e))return e.toJSON(t,n);let i={aliasCount:0,count:1,res:void 0};n.anchors.set(e,i),n.onCreate=s=>{i.res=s,delete n.onCreate};let r=e.toJSON(t,n);return n.onCreate&&n.onCreate(r),r}return typeof e=="bigint"&&!(n!=null&&n.keep)?Number(e):e}var Le=class{constructor(e){Object.defineProperty(this,x,{value:e})}clone(){let e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:t,maxAliasCount:n,onAnchor:i,reviver:r}={}){if(!W(e))throw TypeError("A document argument is required");let s={anchors:new Map,doc:e,keep:!0,mapAsMap:t===!0,mapKeyWarned:!1,maxAliasCount:typeof n=="number"?n:100},o=I(this,"",s);if(typeof i=="function")for(let{count:l,res:c}of s.anchors.values())i(c,l);return typeof r=="function"?Y(r,{"":o},"",o):o}},at=class extends Le{constructor(e){super(Ie),this.source=e,Object.defineProperty(this,"tag",{set(){throw Error("Alias nodes cannot have tags")}})}resolve(e,t){let n;t!=null&&t.aliasResolveCache?n=t.aliasResolveCache:(n=[],V(e,{Node:(r,s)=>{(J(s)||et(s))&&n.push(s)}}),t&&(t.aliasResolveCache=n));let i;for(let r of n){if(r===this)break;r.anchor===this.source&&(i=r)}return i}toJSON(e,t){if(!t)return{source:this.source};let{anchors:n,doc:i,maxAliasCount:r}=t,s=this.resolve(i,t);if(!s){let l=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw ReferenceError(l)}let o=n.get(s);if(o||(o=(I(s,null,t),n.get(s))),!o||o.res===void 0)throw ReferenceError("This should not happen: Alias anchor was not resolved?");if(r>=0&&(o.count+=1,o.aliasCount===0&&(o.aliasCount=de(i,s,n)),o.count*o.aliasCount>r))throw ReferenceError("Excessive alias count indicates a resource exhaustion attack");return o.res}toString(e,t,n){let i=`*${this.source}`;if(e){if(st(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){let r=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw Error(r)}if(e.implicitKey)return`${i} `}return i}};function de(e,t,n){if(J(t)){let i=t.resolve(e),r=n&&i&&n.get(i);return r?r.count*r.aliasCount:0}else if(N(t)){let i=0;for(let r of t.items){let s=de(e,r,n);s>i&&(i=s)}return i}else if(k(t)){let i=de(e,t.key,n),r=de(e,t.value,n);return Math.max(i,r)}return 1}var ct=e=>!e||typeof e!="function"&&typeof e!="object",w=class extends Le{constructor(e){super(fe),this.value=e}toJSON(e,t){return t!=null&&t.keep?this.value:I(this.value,e,t)}toString(){return String(this.value)}};w.BLOCK_FOLDED="BLOCK_FOLDED",w.BLOCK_LITERAL="BLOCK_LITERAL",w.PLAIN="PLAIN",w.QUOTE_DOUBLE="QUOTE_DOUBLE",w.QUOTE_SINGLE="QUOTE_SINGLE";var ln="tag:yaml.org,2002:";function an(e,t,n){if(t){let i=n.filter(s=>s.tag===t),r=i.find(s=>!s.format)??i[0];if(!r)throw Error(`Tag ${t} not found`);return r}return n.find(i=>{var r;return((r=i.identify)==null?void 0:r.call(i,e))&&!i.format})}function se(e,t,n){var d,g,u;if(W(e)&&(e=e.contents),E(e))return e;if(k(e)){let m=(g=(d=n.schema[P]).createNode)==null?void 0:g.call(d,n.schema,null,n);return m.items.push(e),m}(e instanceof String||e instanceof Number||e instanceof Boolean||typeof BigInt<"u"&&e instanceof BigInt)&&(e=e.valueOf());let{aliasDuplicateObjects:i,onAnchor:r,onTagObj:s,schema:o,sourceObjects:l}=n,c;if(i&&e&&typeof e=="object"){if(c=l.get(e),c)return c.anchor??(c.anchor=r(e)),new at(c.anchor);c={anchor:null,node:null},l.set(e,c)}t!=null&&t.startsWith("!!")&&(t=ln+t.slice(2));let a=an(e,t,o.tags);if(!a){if(e&&typeof e.toJSON=="function"&&(e=e.toJSON()),!e||typeof e!="object"){let m=new w(e);return c&&(c.node=m),m}a=e instanceof Map?o[P]:Symbol.iterator in Object(e)?o[R]:o[P]}s&&(s(a),delete n.onTagObj);let p=a!=null&&a.createNode?a.createNode(n.schema,e,n):typeof((u=a==null?void 0:a.nodeClass)==null?void 0:u.from)=="function"?a.nodeClass.from(n.schema,e,n):new w(e);return t?p.tag=t:a.default||(p.tag=a.tag),c&&(c.node=p),p}function he(e,t,n){let i=n;for(let r=t.length-1;r>=0;--r){let s=t[r];if(typeof s=="number"&&Number.isInteger(s)&&s>=0){let o=[];o[s]=i,i=o}else i=new Map([[s,i]])}return se(i,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw Error("This should not happen, please report a bug.")},schema:e,sourceObjects:new Map})}var oe=e=>e==null||typeof e=="object"&&!!e[Symbol.iterator]().next().done,ut=class extends Le{constructor(e,t){super(e),Object.defineProperty(this,"schema",{value:t,configurable:!0,enumerable:!1,writable:!0})}clone(e){let t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(t.schema=e),t.items=t.items.map(n=>E(n)||k(n)?n.clone(e):n),this.range&&(t.range=this.range.slice()),t}addIn(e,t){if(oe(e))this.add(t);else{let[n,...i]=e,r=this.get(n,!0);if(N(r))r.addIn(i,t);else if(r===void 0&&this.schema)this.set(n,he(this.schema,i,t));else throw Error(`Expected YAML collection at ${n}. Remaining path: ${i}`)}}deleteIn(e){let[t,...n]=e;if(n.length===0)return this.delete(t);let i=this.get(t,!0);if(N(i))return i.deleteIn(n);throw Error(`Expected YAML collection at ${t}. Remaining path: ${n}`)}getIn(e,t){let[n,...i]=e,r=this.get(n,!0);return i.length===0?!t&&$(r)?r.value:r:N(r)?r.getIn(i,t):void 0}hasAllNullValues(e){return this.items.every(t=>{if(!k(t))return!1;let n=t.value;return n==null||e&&$(n)&&n.value==null&&!n.commentBefore&&!n.comment&&!n.tag})}hasIn(e){let[t,...n]=e;if(n.length===0)return this.has(t);let i=this.get(t,!0);return N(i)?i.hasIn(n):!1}setIn(e,t){let[n,...i]=e;if(i.length===0)this.set(n,t);else{let r=this.get(n,!0);if(N(r))r.setIn(i,t);else if(r===void 0&&this.schema)this.set(n,he(this.schema,i,t));else throw Error(`Expected YAML collection at ${n}. Remaining path: ${i}`)}}},cn=e=>e.replace(/^(?!$)(?: $)?/gm,"#");function T(e,t){return/^\n+$/.test(e)?e.substring(1):t?e.replace(/^(?! *$)/gm,t):e}var K=(e,t,n)=>e.endsWith(`
`)?T(n,t):n.includes(`
`)?`
`+T(n,t):(e.endsWith(" ")?"":" ")+n,ft="flow",un="block",fn="quoted";function me(e,t,n="flow",{indentAtStart:i,lineWidth:r=80,minContentWidth:s=20,onFold:o,onOverflow:l}={}){if(!r||r<0)return e;r<s&&(s=0);let c=Math.max(1+s,1+r-t.length);if(e.length<=c)return e;let a=[],p={},d=r-t.length;typeof i=="number"&&(i>r-Math.max(2,s)?a.push(0):d=r-i);let g,u,m=!1,f=-1,h=-1,S=-1;n==="block"&&(f=dt(e,f,t.length),f!==-1&&(d=f+c));for(let b;b=e[f+=1];){if(n==="quoted"&&b==="\\"){switch(h=f,e[f+1]){case"x":f+=3;break;case"u":f+=5;break;case"U":f+=9;break;default:f+=1}S=f}if(b===`
`)n==="block"&&(f=dt(e,f,t.length)),d=f+t.length+c,g=void 0;else{if(b===" "&&u&&u!==" "&&u!==`
`&&u!=="	"){let v=e[f+1];v&&v!==" "&&v!==`
`&&v!=="	"&&(g=f)}if(f>=d)if(g)a.push(g),d=g+c,g=void 0;else if(n==="quoted"){for(;u===" "||u==="	";)u=b,b=e[f+=1],m=!0;let v=f>S+1?f-2:h-1;if(p[v])return e;a.push(v),p[v]=!0,d=v+c,g=void 0}else m=!0}u=b}if(m&&l&&l(),a.length===0)return e;o&&o();let y=e.slice(0,a[0]);for(let b=0;b<a.length;++b){let v=a[b],O=a[b+1]||e.length;v===0?y=`
${t}${e.slice(0,O)}`:(n==="quoted"&&p[v]&&(y+=`${e[v]}\\`),y+=`
${t}${e.slice(v+1,O)}`)}return y}function dt(e,t,n){let i=t,r=t+1,s=e[r];for(;s===" "||s==="	";)if(t<r+n)s=e[++t];else{do s=e[++t];while(s&&s!==`
`);i=t,r=t+1,s=e[r]}return i}var ge=(e,t)=>({indentAtStart:t?e.indent.length:e.indentAtStart,lineWidth:e.options.lineWidth,minContentWidth:e.options.minContentWidth}),pe=e=>/^(%|---|\.\.\.)/m.test(e);function dn(e,t,n){if(!t||t<0)return!1;let i=t-n,r=e.length;if(r<=i)return!1;for(let s=0,o=0;s<r;++s)if(e[s]===`
`){if(s-o>i)return!0;if(o=s+1,r-o<=i)return!1}return!0}function le(e,t){let n=JSON.stringify(e);if(t.options.doubleQuotedAsJSON)return n;let{implicitKey:i}=t,r=t.options.doubleQuotedMinMultiLineLength,s=t.indent||(pe(e)?"  ":""),o="",l=0;for(let c=0,a=n[c];a;a=n[++c])if(a===" "&&n[c+1]==="\\"&&n[c+2]==="n"&&(o+=n.slice(l,c)+"\\ ",c+=1,l=c,a="\\"),a==="\\")switch(n[c+1]){case"u":{o+=n.slice(l,c);let p=n.substr(c+2,4);switch(p){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:p.substr(0,2)==="00"?o+="\\x"+p.substr(2):o+=n.substr(c,6)}c+=5,l=c+1}break;case"n":if(i||n[c+2]==='"'||n.length<r)c+=1;else{for(o+=n.slice(l,c)+`

`;n[c+2]==="\\"&&n[c+3]==="n"&&n[c+4]!=='"';)o+=`
`,c+=2;o+=s,n[c+2]===" "&&(o+="\\"),c+=1,l=c+1}break;default:c+=1}return o=l?o+n.slice(l):n,i?o:me(o,s,fn,ge(t,!1))}function Te(e,t){if(t.options.singleQuote===!1||t.implicitKey&&e.includes(`
`)||/[ \t]\n|\n[ \t]/.test(e))return le(e,t);let n=t.indent||(pe(e)?"  ":""),i="'"+e.replace(/'/g,"''").replace(/\n+/g,`$&
${n}`)+"'";return t.implicitKey?i:me(i,n,ft,ge(t,!1))}function G(e,t){let{singleQuote:n}=t.options,i;if(n===!1)i=le;else{let r=e.includes('"'),s=e.includes("'");i=r&&!s?Te:s&&!r?le:n?Te:le}return i(e,t)}var Be;try{Be=RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{Be=/\n+(?!\n|$)/g}function ye({comment:e,type:t,value:n},i,r,s){let{blockQuote:o,commentString:l,lineWidth:c}=i.options;if(!o||/\n[\t ]+$/.test(n))return G(n,i);let a=i.indent||(i.forceBlockIndent||pe(n)?"  ":""),p=o==="literal"?!0:o==="folded"||t===w.BLOCK_FOLDED?!1:t===w.BLOCK_LITERAL?!0:!dn(n,c,a.length);if(!n)return p?`|
`:`>
`;let d,g;for(g=n.length;g>0;--g){let v=n[g-1];if(v!==`
`&&v!=="	"&&v!==" ")break}let u=n.substring(g),m=u.indexOf(`
`);m===-1?d="-":n===u||m!==u.length-1?(d="+",s&&s()):d="",u&&(u=(n=n.slice(0,-u.length),u[u.length-1]===`
`&&(u=u.slice(0,-1)),u.replace(Be,`$&${a}`)));let f=!1,h,S=-1;for(h=0;h<n.length;++h){let v=n[h];if(v===" ")f=!0;else if(v===`
`)S=h;else break}let y=n.substring(0,S<h?S+1:h);y&&(y=(n=n.substring(y.length),y.replace(/\n+/g,`$&${a}`)));let b=(f?a?"2":"1":"")+d;if(e&&(b+=" "+l(e.replace(/ ?[\r\n]+/g," ")),r&&r()),!p){let v=n.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${a}`),O=!1,A=ge(i,!0);o!=="folded"&&t!==w.BLOCK_FOLDED&&(A.onOverflow=()=>{O=!0});let M=me(`${y}${v}${u}`,a,un,A);if(!O)return`>${b}
${a}${M}`}return n=n.replace(/\n+/g,`$&${a}`),`|${b}
${a}${y}${n}${u}`}function hn(e,t,n,i){let{type:r,value:s}=e,{actualString:o,implicitKey:l,indent:c,indentStep:a,inFlow:p}=t;if(l&&s.includes(`
`)||p&&/[[\]{},]/.test(s))return G(s,t);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(s))return l||p||!s.includes(`
`)?G(s,t):ye(e,t,n,i);if(!l&&!p&&r!==w.PLAIN&&s.includes(`
`))return ye(e,t,n,i);if(pe(s)){if(c==="")return t.forceBlockIndent=!0,ye(e,t,n,i);if(l&&c===a)return G(s,t)}let d=s.replace(/\n+/g,`$&
${c}`);if(o){let g=f=>{var h;return f.default&&f.tag!=="tag:yaml.org,2002:str"&&((h=f.test)==null?void 0:h.test(d))},{compat:u,tags:m}=t.doc.schema;if(m.some(g)||u!=null&&u.some(g))return G(s,t)}return l?d:me(d,c,ft,ge(t,!1))}function Me(e,t,n,i){let{implicitKey:r,inFlow:s}=t,o=typeof e.value=="string"?e:Object.assign({},e,{value:String(e.value)}),{type:l}=e;l!==w.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(o.value)&&(l=w.QUOTE_DOUBLE);let c=p=>{switch(p){case w.BLOCK_FOLDED:case w.BLOCK_LITERAL:return r||s?G(o.value,t):ye(o,t,n,i);case w.QUOTE_DOUBLE:return le(o.value,t);case w.QUOTE_SINGLE:return Te(o.value,t);case w.PLAIN:return hn(o,t,n,i);default:return null}},a=c(l);if(a===null){let{defaultKeyType:p,defaultStringType:d}=t.options,g=r&&p||d;if(a=c(g),a===null)throw Error(`Unsupported default string type ${g}`)}return a}function ht(e,t){let n=Object.assign({blockQuote:!0,commentString:cn,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},e.schema.toStringOptions,t),i;switch(n.collectionStyle){case"block":i=!1;break;case"flow":i=!0;break;default:i=null}return{anchors:new Set,doc:e,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:typeof n.indent=="number"?" ".repeat(n.indent):"  ",inFlow:i,options:n}}function mn(e,t){var r;if(t.tag){let s=e.filter(o=>o.tag===t.tag);if(s.length>0)return s.find(o=>o.format===t.format)??s[0]}let n,i;if($(t)){i=t.value;let s=e.filter(o=>{var l;return(l=o.identify)==null?void 0:l.call(o,i)});if(s.length>1){let o=s.filter(l=>l.test);o.length>0&&(s=o)}n=s.find(o=>o.format===t.format)??s.find(o=>!o.format)}else i=t,n=e.find(s=>s.nodeClass&&i instanceof s.nodeClass);if(!n){let s=((r=i==null?void 0:i.constructor)==null?void 0:r.name)??(i===null?"null":typeof i);throw Error(`Tag not resolved for ${s} value`)}return n}function gn(e,t,{anchors:n,doc:i}){if(!i.directives)return"";let r=[],s=($(e)||N(e))&&e.anchor;s&&st(s)&&(n.add(s),r.push(`&${s}`));let o=e.tag??(t.default?null:t.tag);return o&&r.push(i.directives.tagString(o)),r.join(" ")}function H(e,t,n,i){var c;if(k(e))return e.toString(t,n,i);if(J(e)){if(t.doc.directives)return e.toString(t);if((c=t.resolvedAliases)!=null&&c.has(e))throw TypeError("Cannot stringify circular structure without alias nodes");t.resolvedAliases?t.resolvedAliases.add(e):t.resolvedAliases=new Set([e]),e=e.resolve(t.doc)}let r,s=E(e)?e:t.doc.createNode(e,{onTagObj:a=>r=a});r??(r=mn(t.doc.schema.tags,s));let o=gn(s,r,t);o.length>0&&(t.indentAtStart=(t.indentAtStart??0)+o.length+1);let l=typeof r.stringify=="function"?r.stringify(s,t,n,i):$(s)?Me(s,t,n,i):s.toString(t,n,i);return o?$(s)||l[0]==="{"||l[0]==="["?`${o} ${l}`:`${o}
${t.indent}${l}`:l}function pn({key:e,value:t},n,i,r){let{allNullValues:s,doc:o,indent:l,indentStep:c,options:{commentString:a,indentSeq:p,simpleKeys:d}}=n,g=E(e)&&e.comment||null;if(d){if(g)throw Error("With simple keys, key nodes cannot have comments");if(N(e)||!E(e)&&typeof e=="object")throw Error("With simple keys, collection cannot be used as a key value")}let u=!d&&(!e||g&&t==null&&!n.inFlow||N(e)||($(e)?e.type===w.BLOCK_FOLDED||e.type===w.BLOCK_LITERAL:typeof e=="object"));n=Object.assign({},n,{allNullValues:!1,implicitKey:!u&&(d||!s),indent:l+c});let m=!1,f=!1,h=H(e,n,()=>m=!0,()=>f=!0);if(!u&&!n.inFlow&&h.length>1024){if(d)throw Error("With simple keys, single line scalar must not span more than 1024 characters");u=!0}if(n.inFlow){if(s||t==null)return m&&i&&i(),h===""?"?":u?`? ${h}`:h}else if(s&&!d||t==null&&u)return h=`? ${h}`,g&&!m?h+=K(h,n.indent,a(g)):f&&r&&r(),h;m&&(g=null),u?(g&&(h+=K(h,n.indent,a(g))),h=`? ${h}
${l}:`):(h=`${h}:`,g&&(h+=K(h,n.indent,a(g))));let S,y,b;E(t)?(S=!!t.spaceBefore,y=t.commentBefore,b=t.comment):(S=!1,y=null,b=null,t&&typeof t=="object"&&(t=o.createNode(t))),n.implicitKey=!1,!u&&!g&&$(t)&&(n.indentAtStart=h.length+1),f=!1,!p&&c.length>=2&&!n.inFlow&&!u&&ie(t)&&!t.flow&&!t.tag&&!t.anchor&&(n.indent=n.indent.substring(2));let v=!1,O=H(t,n,()=>v=!0,()=>f=!0),A=" ";if(g||S||y){if(A=S?`
`:"",y){let M=a(y);A+=`
${T(M,n.indent)}`}O===""&&!n.inFlow?A===`
`&&(A=`

`):A+=`
${n.indent}`}else if(!u&&N(t)){let M=O[0],ce=O.indexOf(`
`),ue=ce!==-1,qn=n.inFlow??t.flow??t.items.length===0;if(ue||!qn){let Kt=!1;if(ue&&(M==="&"||M==="!")){let q=O.indexOf(" ");M==="&"&&q!==-1&&q<ce&&O[q+1]==="!"&&(q=O.indexOf(" ",q+1)),(q===-1||ce<q)&&(Kt=!0)}Kt||(A=`
${n.indent}`)}}else(O===""||O[0]===`
`)&&(A="");return h+=A+O,n.inFlow?v&&i&&i():b&&!v?h+=K(h,n.indent,a(b)):f&&r&&r(),h}function yn(e,t){(e==="debug"||e==="warn")&&console.warn(t)}var be="<<",B={identify:e=>e===be||typeof e=="symbol"&&e.description===be,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new w(Symbol(be)),{addToJSMap:mt}),stringify:()=>be},bn=(e,t)=>(B.identify(t)||$(t)&&(!t.type||t.type===w.PLAIN)&&B.identify(t.value))&&(e==null?void 0:e.doc.schema.tags.some(n=>n.tag===B.tag&&n.default));function mt(e,t,n){if(n=e&&J(n)?n.resolve(e.doc):n,ie(n))for(let i of n.items)Fe(e,t,i);else if(Array.isArray(n))for(let i of n)Fe(e,t,i);else Fe(e,t,n)}function Fe(e,t,n){let i=e&&J(n)?n.resolve(e.doc):n;if(!ne(i))throw Error("Merge sources must be maps or map aliases");let r=i.toJSON(null,e,Map);for(let[s,o]of r)t instanceof Map?t.has(s)||t.set(s,o):t instanceof Set?t.add(s):Object.prototype.hasOwnProperty.call(t,s)||Object.defineProperty(t,s,{value:o,writable:!0,enumerable:!0,configurable:!0});return t}function gt(e,t,{key:n,value:i}){if(E(n)&&n.addToJSMap)n.addToJSMap(e,t,i);else if(bn(e,n))mt(e,t,i);else{let r=I(n,"",e);if(t instanceof Map)t.set(r,I(i,r,e));else if(t instanceof Set)t.add(r);else{let s=vn(n,r,e),o=I(i,s,e);s in t?Object.defineProperty(t,s,{value:o,writable:!0,enumerable:!0,configurable:!0}):t[s]=o}}return t}function vn(e,t,n){if(t===null)return"";if(typeof t!="object")return String(t);if(E(e)&&(n!=null&&n.doc)){let i=ht(n.doc,{});i.anchors=new Set;for(let s of n.anchors.keys())i.anchors.add(s.anchor);i.inFlow=!0,i.inStringifyKey=!0;let r=e.toString(i);if(!n.mapKeyWarned){let s=JSON.stringify(r);s.length>40&&(s=s.substring(0,36)+'..."'),yn(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${s}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return r}return JSON.stringify(t)}function Pe(e,t,n){let i=se(e,void 0,n),r=se(t,void 0,n);return new L(i,r)}var L=class Wt{constructor(t,n=null){Object.defineProperty(this,x,{value:Ze}),this.key=t,this.value=n}clone(t){let{key:n,value:i}=this;return E(n)&&(n=n.clone(t)),E(i)&&(i=i.clone(t)),new Wt(n,i)}toJSON(t,n){let i=n!=null&&n.mapAsMap?new Map:{};return gt(n,i,this)}toString(t,n,i){return t!=null&&t.doc?pn(this,t,n,i):JSON.stringify(this)}};function pt(e,t,n){return(t.inFlow??e.flow?Sn:wn)(e,t,n)}function wn({comment:e,items:t},n,{blockItemPrefix:i,flowChars:r,itemIndent:s,onChompKeep:o,onComment:l}){let{indent:c,options:{commentString:a}}=n,p=Object.assign({},n,{indent:s,type:null}),d=!1,g=[];for(let m=0;m<t.length;++m){let f=t[m],h=null;if(E(f))!d&&f.spaceBefore&&g.push(""),ve(n,g,f.commentBefore,d),f.comment&&(h=f.comment);else if(k(f)){let y=E(f.key)?f.key:null;y&&(!d&&y.spaceBefore&&g.push(""),ve(n,g,y.commentBefore,d))}d=!1;let S=H(f,p,()=>h=null,()=>d=!0);h&&(S+=K(S,s,a(h))),d&&h&&(d=!1),g.push(i+S)}let u;if(g.length===0)u=r.start+r.end;else{u=g[0];for(let m=1;m<g.length;++m){let f=g[m];u+=f?`
${c}${f}`:`
`}}return e?(u+=`
`+T(a(e),c),l&&l()):d&&o&&o(),u}function Sn({items:e},t,{flowChars:n,itemIndent:i}){let{indent:r,indentStep:s,flowCollectionPadding:o,options:{commentString:l}}=t;i+=s;let c=Object.assign({},t,{indent:i,inFlow:!0,type:null}),a=!1,p=0,d=[];for(let m=0;m<e.length;++m){let f=e[m],h=null;if(E(f))f.spaceBefore&&d.push(""),ve(t,d,f.commentBefore,!1),f.comment&&(h=f.comment);else if(k(f)){let y=E(f.key)?f.key:null;y&&(y.spaceBefore&&d.push(""),ve(t,d,y.commentBefore,!1),y.comment&&(a=!0));let b=E(f.value)?f.value:null;b?(b.comment&&(h=b.comment),b.commentBefore&&(a=!0)):f.value==null&&(y!=null&&y.comment)&&(h=y.comment)}h&&(a=!0);let S=H(f,c,()=>h=null);m<e.length-1&&(S+=","),h&&(S+=K(S,i,l(h))),!a&&(d.length>p||S.includes(`
`))&&(a=!0),d.push(S),p=d.length}let{start:g,end:u}=n;if(d.length===0)return g+u;if(!a){let m=d.reduce((f,h)=>f+h.length+2,2);a=t.options.lineWidth>0&&m>t.options.lineWidth}if(a){let m=g;for(let f of d)m+=f?`
${s}${r}${f}`:`
`;return`${m}
${r}${u}`}else return`${g}${o}${d.join(" ")}${o}${u}`}function ve({indent:e,options:{commentString:t}},n,i,r){if(i&&r&&(i=i.replace(/^\n+/,"")),i){let s=T(t(i),e);n.push(s.trimStart())}}function U(e,t){let n=$(t)?t.value:t;for(let i of e)if(k(i)&&(i.key===t||i.key===n||$(i.key)&&i.key.value===n))return i}var D=class extends ut{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(P,e),this.items=[]}static from(e,t,n){let{keepUndefined:i,replacer:r}=n,s=new this(e),o=(l,c)=>{if(typeof r=="function")c=r.call(t,l,c);else if(Array.isArray(r)&&!r.includes(l))return;(c!==void 0||i)&&s.items.push(Pe(l,c,n))};if(t instanceof Map)for(let[l,c]of t)o(l,c);else if(t&&typeof t=="object")for(let l of Object.keys(t))o(l,t[l]);return typeof e.sortMapEntries=="function"&&s.items.sort(e.sortMapEntries),s}add(e,t){var s;let n;n=k(e)?e:!e||typeof e!="object"||!("key"in e)?new L(e,e==null?void 0:e.value):new L(e.key,e.value);let i=U(this.items,n.key),r=(s=this.schema)==null?void 0:s.sortMapEntries;if(i){if(!t)throw Error(`Key ${n.key} already set`);$(i.value)&&ct(n.value)?i.value.value=n.value:i.value=n.value}else if(r){let o=this.items.findIndex(l=>r(n,l)<0);o===-1?this.items.push(n):this.items.splice(o,0,n)}else this.items.push(n)}delete(e){let t=U(this.items,e);return t?this.items.splice(this.items.indexOf(t),1).length>0:!1}get(e,t){var i;let n=(i=U(this.items,e))==null?void 0:i.value;return(!t&&$(n)?n.value:n)??void 0}has(e){return!!U(this.items,e)}set(e,t){this.add(new L(e,t),!0)}toJSON(e,t,n){let i=n?new n:t!=null&&t.mapAsMap?new Map:{};t!=null&&t.onCreate&&t.onCreate(i);for(let r of this.items)gt(t,i,r);return i}toString(e,t,n){if(!e)return JSON.stringify(this);for(let i of this.items)if(!k(i))throw Error(`Map items must all be pairs; found ${JSON.stringify(i)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),pt(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:n,onComment:t})}},X={collection:"map",default:!0,nodeClass:D,tag:"tag:yaml.org,2002:map",resolve(e,t){return ne(e)||t("Expected a mapping for this tag"),e},createNode:(e,t,n)=>D.from(e,t,n)},we=class extends ut{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(R,e),this.items=[]}add(e){this.items.push(e)}delete(e){let t=Se(e);return typeof t=="number"?this.items.splice(t,1).length>0:!1}get(e,t){let n=Se(e);if(typeof n!="number")return;let i=this.items[n];return!t&&$(i)?i.value:i}has(e){let t=Se(e);return typeof t=="number"&&t<this.items.length}set(e,t){let n=Se(e);if(typeof n!="number")throw Error(`Expected a valid index, not ${e}.`);let i=this.items[n];$(i)&&ct(t)?i.value=t:this.items[n]=t}toJSON(e,t){let n=[];t!=null&&t.onCreate&&t.onCreate(n);let i=0;for(let r of this.items)n.push(I(r,String(i++),t));return n}toString(e,t,n){return e?pt(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:n,onComment:t}):JSON.stringify(this)}static from(e,t,n){let{replacer:i}=n,r=new this(e);if(t&&Symbol.iterator in Object(t)){let s=0;for(let o of t){if(typeof i=="function"){let l=t instanceof Set?o:String(s++);o=i.call(t,l,o)}r.items.push(se(o,void 0,n))}}return r}};function Se(e){let t=$(e)?e.value:e;return t&&typeof t=="string"&&(t=Number(t)),typeof t=="number"&&Number.isInteger(t)&&t>=0?t:null}var Z={collection:"seq",default:!0,nodeClass:we,tag:"tag:yaml.org,2002:seq",resolve(e,t){return ie(e)||t("Expected a sequence for this tag"),e},createNode:(e,t,n)=>we.from(e,t,n)},Oe={identify:e=>typeof e=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify(e,t,n,i){return t=Object.assign({actualString:!0},t),Me(e,t,n,i)}},$e={identify:e=>e==null,createNode:()=>new w(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new w(null),stringify:({source:e},t)=>typeof e=="string"&&$e.test.test(e)?e:t.options.nullStr},De={identify:e=>typeof e=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:e=>new w(e[0]==="t"||e[0]==="T"),stringify({source:e,value:t},n){if(e&&De.test.test(e)){let i=e[0]==="t"||e[0]==="T";if(t===i)return e}return t?n.options.trueStr:n.options.falseStr}};function C({format:e,minFractionDigits:t,tag:n,value:i}){if(typeof i=="bigint")return String(i);let r=typeof i=="number"?i:Number(i);if(!isFinite(r))return isNaN(r)?".nan":r<0?"-.inf":".inf";let s=JSON.stringify(i);if(!e&&t&&(!n||n==="tag:yaml.org,2002:float")&&/^\d/.test(s)){let o=s.indexOf(".");o<0&&(o=s.length,s+=".");let l=t-(s.length-o-1);for(;l-- >0;)s+="0"}return s}var yt={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>e.slice(-3).toLowerCase()==="nan"?NaN:e[0]==="-"?-1/0:1/0,stringify:C},bt={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e),stringify(e){let t=Number(e.value);return isFinite(t)?t.toExponential():C(e)}},vt={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(e){let t=new w(parseFloat(e)),n=e.indexOf(".");return n!==-1&&e[e.length-1]==="0"&&(t.minFractionDigits=e.length-n-1),t},stringify:C},ke=e=>typeof e=="bigint"||Number.isInteger(e),Je=(e,t,n,{intAsBigInt:i})=>i?BigInt(e):parseInt(e.substring(t),n);function wt(e,t,n){let{value:i}=e;return ke(i)&&i>=0?n+i.toString(t):C(e)}var St={identify:e=>ke(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(e,t,n)=>Je(e,2,8,n),stringify:e=>wt(e,8,"0o")},Ot={identify:ke,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(e,t,n)=>Je(e,0,10,n),stringify:C},$t={identify:e=>ke(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(e,t,n)=>Je(e,2,16,n),stringify:e=>wt(e,16,"0x")},On=[X,Z,Oe,$e,De,St,Ot,$t,yt,bt,vt];function kt(e){return typeof e=="bigint"||Number.isInteger(e)}var Ne=({value:e})=>JSON.stringify(e),$n=[{identify:e=>typeof e=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:Ne},{identify:e=>e==null,createNode:()=>new w(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:Ne},{identify:e=>typeof e=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:e=>e==="true",stringify:Ne},{identify:kt,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(e,t,{intAsBigInt:n})=>n?BigInt(e):parseInt(e,10),stringify:({value:e})=>kt(e)?e.toString():JSON.stringify(e)},{identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:e=>parseFloat(e),stringify:Ne}],kn=[X,Z].concat($n,{default:!0,tag:"",test:/^/,resolve(e,t){return t(`Unresolved plain scalar ${JSON.stringify(e)}`),e}}),Ke={identify:e=>e instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(e,t){if(typeof atob=="function"){let n=atob(e.replace(/[\n\r]/g,"")),i=new Uint8Array(n.length);for(let r=0;r<n.length;++r)i[r]=n.charCodeAt(r);return i}else return t("This environment does not support reading binary tags; either Buffer or atob is required"),e},stringify({comment:e,type:t,value:n},i,r,s){if(!n)return"";let o=n,l;if(typeof btoa=="function"){let c="";for(let a=0;a<o.length;++a)c+=String.fromCharCode(o[a]);l=btoa(c)}else throw Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(t??(t=w.BLOCK_LITERAL),t!==w.QUOTE_DOUBLE){let c=Math.max(i.options.lineWidth-i.indent.length,i.options.minContentWidth),a=Math.ceil(l.length/c),p=Array(a);for(let d=0,g=0;d<a;++d,g+=c)p[d]=l.substr(g,c);l=p.join(t===w.BLOCK_LITERAL?`
`:" ")}return Me({comment:e,type:t,value:l},i,r,s)}};function Nt(e,t){if(ie(e))for(let n=0;n<e.items.length;++n){let i=e.items[n];if(!k(i)){if(ne(i)){i.items.length>1&&t("Each pair must have its own sequence indicator");let r=i.items[0]||new L(new w(null));if(i.commentBefore&&(r.key.commentBefore=r.key.commentBefore?`${i.commentBefore}
${r.key.commentBefore}`:i.commentBefore),i.comment){let s=r.value??r.key;s.comment=s.comment?`${i.comment}
${s.comment}`:i.comment}i=r}e.items[n]=k(i)?i:new L(i)}}else t("Expected a sequence for this tag");return e}function Et(e,t,n){let{replacer:i}=n,r=new we(e);r.tag="tag:yaml.org,2002:pairs";let s=0;if(t&&Symbol.iterator in Object(t))for(let o of t){typeof i=="function"&&(o=i.call(t,String(s++),o));let l,c;if(Array.isArray(o))if(o.length===2)l=o[0],c=o[1];else throw TypeError(`Expected [key, value] tuple: ${o}`);else if(o&&o instanceof Object){let a=Object.keys(o);if(a.length===1)l=a[0],c=o[l];else throw TypeError(`Expected tuple with one key, not ${a.length} keys`)}else l=o;r.items.push(Pe(l,c,n))}return r}var Ue={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:Nt,createNode:Et},Ee=class Vt extends we{constructor(){super(),this.add=D.prototype.add.bind(this),this.delete=D.prototype.delete.bind(this),this.get=D.prototype.get.bind(this),this.has=D.prototype.has.bind(this),this.set=D.prototype.set.bind(this),this.tag=Vt.tag}toJSON(t,n){if(!n)return super.toJSON(t);let i=new Map;n!=null&&n.onCreate&&n.onCreate(i);for(let r of this.items){let s,o;if(k(r)?(s=I(r.key,"",n),o=I(r.value,s,n)):s=I(r,"",n),i.has(s))throw Error("Ordered maps must not include duplicate keys");i.set(s,o)}return i}static from(t,n,i){let r=Et(t,n,i),s=new this;return s.items=r.items,s}};Ee.tag="tag:yaml.org,2002:omap";var qe={collection:"seq",identify:e=>e instanceof Map,nodeClass:Ee,default:!1,tag:"tag:yaml.org,2002:omap",resolve(e,t){let n=Nt(e,t),i=[];for(let{key:r}of n.items)$(r)&&(i.includes(r.value)?t(`Ordered maps must not include duplicate keys: ${r.value}`):i.push(r.value));return Object.assign(new Ee,n)},createNode:(e,t,n)=>Ee.from(e,t,n)};function At({value:e,source:t},n){return t&&(e?jt:xt).test.test(t)?t:e?n.options.trueStr:n.options.falseStr}var jt={identify:e=>e===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new w(!0),stringify:At},xt={identify:e=>e===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new w(!1),stringify:At},Nn={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>e.slice(-3).toLowerCase()==="nan"?NaN:e[0]==="-"?-1/0:1/0,stringify:C},En={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e.replace(/_/g,"")),stringify(e){let t=Number(e.value);return isFinite(t)?t.toExponential():C(e)}},An={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(e){let t=new w(parseFloat(e.replace(/_/g,""))),n=e.indexOf(".");if(n!==-1){let i=e.substring(n+1).replace(/_/g,"");i[i.length-1]==="0"&&(t.minFractionDigits=i.length)}return t},stringify:C},ae=e=>typeof e=="bigint"||Number.isInteger(e);function Ae(e,t,n,{intAsBigInt:i}){let r=e[0];if((r==="-"||r==="+")&&(t+=1),e=e.substring(t).replace(/_/g,""),i){switch(n){case 2:e=`0b${e}`;break;case 8:e=`0o${e}`;break;case 16:e=`0x${e}`;break}let o=BigInt(e);return r==="-"?BigInt(-1)*o:o}let s=parseInt(e,n);return r==="-"?-1*s:s}function Re(e,t,n){let{value:i}=e;if(ae(i)){let r=i.toString(t);return i<0?"-"+n+r.substr(1):n+r}return C(e)}var jn={identify:ae,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(e,t,n)=>Ae(e,2,2,n),stringify:e=>Re(e,2,"0b")},xn={identify:ae,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(e,t,n)=>Ae(e,1,8,n),stringify:e=>Re(e,8,"0")},In={identify:ae,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(e,t,n)=>Ae(e,0,10,n),stringify:C},Cn={identify:ae,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(e,t,n)=>Ae(e,2,16,n),stringify:e=>Re(e,16,"0x")},je=class Qt extends D{constructor(t){super(t),this.tag=Qt.tag}add(t){let n;n=k(t)?t:t&&typeof t=="object"&&"key"in t&&"value"in t&&t.value===null?new L(t.key,null):new L(t,null),U(this.items,n.key)||this.items.push(n)}get(t,n){let i=U(this.items,t);return!n&&k(i)?$(i.key)?i.key.value:i.key:i}set(t,n){if(typeof n!="boolean")throw Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof n}`);let i=U(this.items,t);i&&!n?this.items.splice(this.items.indexOf(i),1):!i&&n&&this.items.push(new L(t))}toJSON(t,n){return super.toJSON(t,n,Set)}toString(t,n,i){if(!t)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},t,{allNullValues:!0}),n,i);throw Error("Set items must all have null values")}static from(t,n,i){let{replacer:r}=i,s=new this(t);if(n&&Symbol.iterator in Object(n))for(let o of n)typeof r=="function"&&(o=r.call(n,o,o)),s.items.push(Pe(o,null,i));return s}};je.tag="tag:yaml.org,2002:set";var We={collection:"map",identify:e=>e instanceof Set,nodeClass:je,default:!1,tag:"tag:yaml.org,2002:set",createNode:(e,t,n)=>je.from(e,t,n),resolve(e,t){if(ne(e)){if(e.hasAllNullValues(!0))return Object.assign(new je,e);t("Set items must all have null values")}else t("Expected a mapping for this tag");return e}};function Ve(e,t){let n=e[0],i=n==="-"||n==="+"?e.substring(1):e,r=o=>t?BigInt(o):Number(o),s=i.replace(/_/g,"").split(":").reduce((o,l)=>o*r(60)+r(l),r(0));return n==="-"?r(-1)*s:s}function It(e){let{value:t}=e,n=o=>o;if(typeof t=="bigint")n=o=>BigInt(o);else if(isNaN(t)||!isFinite(t))return C(e);let i="";t<0&&(i="-",t*=n(-1));let r=n(60),s=[t%r];return t<60?s.unshift(0):(t=(t-s[0])/r,s.unshift(t%r),t>=60&&(t=(t-s[0])/r,s.unshift(t))),i+s.map(o=>String(o).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}var Ct={identify:e=>typeof e=="bigint"||Number.isInteger(e),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(e,t,{intAsBigInt:n})=>Ve(e,n),stringify:It},_t={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:e=>Ve(e,!1),stringify:It},xe={identify:e=>e instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(e){let t=e.match(xe.test);if(!t)throw Error("!!timestamp expects a date, starting with yyyy-mm-dd");let[,n,i,r,s,o,l]=t.map(Number),c=t[7]?Number((t[7]+"00").substr(1,3)):0,a=Date.UTC(n,i-1,r,s||0,o||0,l||0,c),p=t[8];if(p&&p!=="Z"){let d=Ve(p,!1);Math.abs(d)<30&&(d*=60),a-=6e4*d}return new Date(a)},stringify:({value:e})=>(e==null?void 0:e.toISOString().replace(/(T00:00:00)?\.000Z$/,""))??""},Lt=[X,Z,Oe,$e,jt,xt,jn,xn,In,Cn,Nn,En,An,Ke,B,qe,Ue,We,Ct,_t,xe],Tt=new Map([["core",On],["failsafe",[X,Z,Oe]],["json",kn],["yaml11",Lt],["yaml-1.1",Lt]]),Bt={binary:Ke,bool:De,float:vt,floatExp:bt,floatNaN:yt,floatTime:_t,int:Ot,intHex:$t,intOct:St,intTime:Ct,map:X,merge:B,null:$e,omap:qe,pairs:Ue,seq:Z,set:We,timestamp:xe},_n={"tag:yaml.org,2002:binary":Ke,"tag:yaml.org,2002:merge":B,"tag:yaml.org,2002:omap":qe,"tag:yaml.org,2002:pairs":Ue,"tag:yaml.org,2002:set":We,"tag:yaml.org,2002:timestamp":xe};function Qe(e,t,n){let i=Tt.get(t);if(i&&!e)return n&&!i.includes(B)?i.concat(B):i.slice();let r=i;if(!r)if(Array.isArray(e))r=[];else{let s=Array.from(Tt.keys()).filter(o=>o!=="yaml11").map(o=>JSON.stringify(o)).join(", ");throw Error(`Unknown schema "${t}"; use one of ${s} or define customTags array`)}if(Array.isArray(e))for(let s of e)r=r.concat(s);else typeof e=="function"&&(r=e(r.slice()));return n&&(r=r.concat(B)),r.reduce((s,o)=>{let l=typeof o=="string"?Bt[o]:o;if(!l){let c=JSON.stringify(o),a=Object.keys(Bt).map(p=>JSON.stringify(p)).join(", ");throw Error(`Unknown custom tag ${c}; use one of ${a}`)}return s.includes(l)||s.push(l),s},[])}var Ln=(e,t)=>e.key<t.key?-1:e.key>t.key?1:0,Tn=class zt{constructor({compat:t,customTags:n,merge:i,resolveKnownTags:r,schema:s,sortMapEntries:o,toStringDefaults:l}){this.compat=Array.isArray(t)?Qe(t,"compat"):t?Qe(null,t):null,this.name=typeof s=="string"&&s||"core",this.knownTags=r?_n:{},this.tags=Qe(n,this.name,i),this.toStringOptions=l??null,Object.defineProperty(this,P,{value:X}),Object.defineProperty(this,fe,{value:Oe}),Object.defineProperty(this,R,{value:Z}),this.sortMapEntries=typeof o=="function"?o:o===!0?Ln:null}clone(){let t=Object.create(zt.prototype,Object.getOwnPropertyDescriptors(this));return t.tags=this.tags.slice(),t}};function Bn(e,t){var c;let n=[],i=t.directives===!0;if(t.directives!==!1&&e.directives){let a=e.directives.toString(e);a?(n.push(a),i=!0):e.directives.docStart&&(i=!0)}i&&n.push("---");let r=ht(e,t),{commentString:s}=r.options;if(e.commentBefore){n.length!==1&&n.unshift("");let a=s(e.commentBefore);n.unshift(T(a,""))}let o=!1,l=null;if(e.contents){if(E(e.contents)){if(e.contents.spaceBefore&&i&&n.push(""),e.contents.commentBefore){let d=s(e.contents.commentBefore);n.push(T(d,""))}r.forceBlockIndent=!!e.comment,l=e.contents.comment}let a=l?void 0:()=>o=!0,p=H(e.contents,r,()=>l=null,a);l&&(p+=K(p,"",s(l))),(p[0]==="|"||p[0]===">")&&n[n.length-1]==="---"?n[n.length-1]=`--- ${p}`:n.push(p)}else n.push(H(e.contents,r));if((c=e.directives)!=null&&c.docEnd)if(e.comment){let a=s(e.comment);a.includes(`
`)?(n.push("..."),n.push(T(a,""))):n.push(`... ${a}`)}else n.push("...");else{let a=e.comment;a&&o&&(a=a.replace(/^\n+/,"")),a&&((!o||l)&&n[n.length-1]!==""&&n.push(""),n.push(T(s(a),"")))}return n.join(`
`)+`
`}var Mn=class Yt{constructor(t,n,i){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,x,{value:Ce});let r=null;typeof n=="function"||Array.isArray(n)?r=n:i===void 0&&n&&(i=n,n=void 0);let s=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},i);this.options=s;let{version:o}=s;i!=null&&i._directives?(this.directives=i._directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new re({version:o}),this.setSchema(o,i),this.contents=t===void 0?null:this.createNode(t,r,i)}clone(){let t=Object.create(Yt.prototype,{[x]:{value:Ce}});return t.commentBefore=this.commentBefore,t.comment=this.comment,t.errors=this.errors.slice(),t.warnings=this.warnings.slice(),t.options=Object.assign({},this.options),this.directives&&(t.directives=this.directives.clone()),t.schema=this.schema.clone(),t.contents=E(this.contents)?this.contents.clone(t.schema):this.contents,this.range&&(t.range=this.range.slice()),t}add(t){ee(this.contents)&&this.contents.add(t)}addIn(t,n){ee(this.contents)&&this.contents.addIn(t,n)}createAlias(t,n){if(!t.anchor){let i=ot(this);t.anchor=!n||i.has(n)?lt(n||"a",i):n}return new at(t.anchor)}createNode(t,n,i){let r;if(typeof n=="function")t=n.call({"":t},"",t),r=n;else if(Array.isArray(n)){let h=n.filter(S=>typeof S=="number"||S instanceof String||S instanceof Number).map(String);h.length>0&&(n=n.concat(h)),r=n}else i===void 0&&n&&(i=n,n=void 0);let{aliasDuplicateObjects:s,anchorPrefix:o,flow:l,keepUndefined:c,onTagObj:a,tag:p}=i??{},{onAnchor:d,setAnchors:g,sourceObjects:u}=on(this,o||"a"),m={aliasDuplicateObjects:s??!0,keepUndefined:c??!1,onAnchor:d,onTagObj:a,replacer:r,schema:this.schema,sourceObjects:u},f=se(t,p,m);return l&&N(f)&&(f.flow=!0),g(),f}createPair(t,n,i={}){let r=this.createNode(t,null,i),s=this.createNode(n,null,i);return new L(r,s)}delete(t){return ee(this.contents)?this.contents.delete(t):!1}deleteIn(t){return oe(t)?this.contents==null?!1:(this.contents=null,!0):ee(this.contents)?this.contents.deleteIn(t):!1}get(t,n){return N(this.contents)?this.contents.get(t,n):void 0}getIn(t,n){return oe(t)?!n&&$(this.contents)?this.contents.value:this.contents:N(this.contents)?this.contents.getIn(t,n):void 0}has(t){return N(this.contents)?this.contents.has(t):!1}hasIn(t){return oe(t)?this.contents!==void 0:N(this.contents)?this.contents.hasIn(t):!1}set(t,n){this.contents==null?this.contents=he(this.schema,[t],n):ee(this.contents)&&this.contents.set(t,n)}setIn(t,n){oe(t)?this.contents=n:this.contents==null?this.contents=he(this.schema,Array.from(t),n):ee(this.contents)&&this.contents.setIn(t,n)}setSchema(t,n={}){typeof t=="number"&&(t=String(t));let i;switch(t){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new re({version:"1.1"}),i={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=t:this.directives=new re({version:t}),i={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,i=null;break;default:{let r=JSON.stringify(t);throw Error(`Expected '1.1', '1.2' or null as first argument, but found: ${r}`)}}if(n.schema instanceof Object)this.schema=n.schema;else if(i)this.schema=new Tn(Object.assign(i,n));else throw Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:t,jsonArg:n,mapAsMap:i,maxAliasCount:r,onAnchor:s,reviver:o}={}){let l={anchors:new Map,doc:this,keep:!t,mapAsMap:i===!0,mapKeyWarned:!1,maxAliasCount:typeof r=="number"?r:100},c=I(this.contents,n??"",l);if(typeof s=="function")for(let{count:a,res:p}of l.anchors.values())s(p,a);return typeof o=="function"?Y(o,{"":c},"",c):c}toJSON(t,n){return this.toJS({json:!0,jsonArg:t,mapAsMap:!1,onAnchor:n})}toString(t={}){if(this.errors.length>0)throw Error("Document with errors cannot be stringified");if("indent"in t&&(!Number.isInteger(t.indent)||Number(t.indent)<=0)){let n=JSON.stringify(t.indent);throw Error(`"indent" option must be a positive integer, not ${n}`)}return Bn(this,t)}};function ee(e){if(N(e))return!0;throw Error("Expected a YAML collection as document contents")}var ze=Symbol("break visit"),Fn=Symbol("skip children"),Mt=Symbol("remove item");function te(e,t){"type"in e&&e.type==="document"&&(e={start:e.start,value:e.value}),Ft(Object.freeze([]),e,t)}te.BREAK=ze,te.SKIP=Fn,te.REMOVE=Mt,te.itemAtPath=(e,t)=>{let n=e;for(let[i,r]of t){let s=n==null?void 0:n[i];if(s&&"items"in s)n=s.items[r];else return}return n},te.parentCollection=(e,t)=>{let n=te.itemAtPath(e,t.slice(0,-1)),i=t[t.length-1][0],r=n==null?void 0:n[i];if(r&&"items"in r)return r;throw Error("Parent collection not found")};function Ft(e,t,n){let i=n(t,e);if(typeof i=="symbol")return i;for(let r of["key","value"]){let s=t[r];if(s&&"items"in s){for(let o=0;o<s.items.length;++o){let l=Ft(Object.freeze(e.concat([[r,o]])),s.items[o],n);if(typeof l=="number")o=l-1;else{if(l===ze)return ze;l===Mt&&(s.items.splice(o,1),--o)}}typeof i=="function"&&r==="key"&&(i=i(t,e))}}return typeof i=="function"?i(t,e):i}function Pn(e,t,n){let i=null;if(typeof t=="function"||Array.isArray(t)?i=t:n===void 0&&t&&(n=t),typeof n=="string"&&(n=n.length),typeof n=="number"){let r=Math.round(n);n=r<1?void 0:r>8?{indent:8}:{indent:r}}if(e===void 0){let{keepUndefined:r}=n??t??{};if(!r)return}return W(e)&&!i?e.toString(n):new Mn(e,i,n).toString(n)}function Ye(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function Dn(e,t){let n,i=()=>{if(n)return n;let r=indexedDB.open(e);return r.onupgradeneeded=()=>r.result.createObjectStore(t),n=Ye(r),n.then(s=>{s.onclose=()=>n=void 0},()=>{}),n};return(r,s)=>i().then(o=>s(o.transaction(t,r).objectStore(t)))}var Pt;function Dt(){return Pt||(Pt=Dn("keyval-store","keyval")),Pt}function Jn(e,t=Dt()){return t("readonly",n=>Ye(n.get(e)))}function Kn(e,t,n=Dt()){return n("readwrite",i=>(i.put(t,e),Ye(i.transaction)))}async function Un(e={}){let t=Wn(),n=Rn();n.add({message:"Starting cache build...",type:"info"});let i=Object.assign({store:!0,kind:"full"},e),r=[],s={},o={last_generated:null,last_full_build:null,file_url:null,file_size:0};n.add({message:"Getting the latest Simple File System data...",type:"info"}),await t.get("admin/settings/cache/providers").then(u=>{r=u.data.providers}),await t.get("admin/settings/cache/index").then(u=>{o=u.data.cache}),await t.request("/admin/volume/index",{method:"GET"}).then(u=>u.data).then(u=>{s=u.entries.reduce((m,f)=>(m[`/${f.relative_path}`]=f.content,m),{})}),i.tailwindcss_version||await t.request("/admin/settings/options/index",{method:"GET"}).then(u=>{let m=Number(Qn(u.data.options,"general.tailwindcss.version",4));m===3||m===4?i.tailwindcss_version=m:i.tailwindcss_version=4}),(r.length===0||r.filter(u=>u.enabled).length===0)&&n.add({message:"No scanner provider found. If this is unexpected, please check the integrations setting page.",type:"warning"});let l=[];async function c(u){var h,S;let m=!1,f=[];if(i.kind==="incremental"&&((h=i.incremental)!=null&&h.providers)&&!i.incremental.providers.includes(u.id)){let y=await Jn(`windpress.cache.provider.${u.id}`);if(y){let b=qt.decompressFromUTF16(y),v=b?JSON.parse(b):null;if(v&&!(o.last_full_build!==null&&Number(v.timestamp)<Number(o.last_full_build)))return l.push(...v.contents),n.add({message:`Using cached sources for provider: ${u.name}`,type:"info"}),Promise.resolve()}}try{do{let y=Vn(10),b=`Scanning provider: ${u.name}... (${m===!1?"initial":m})`;n.add({message:b,type:"info",id:y});let v=await t.post("admin/settings/cache/providers/scan",{provider_id:u.id,metadata:{next_batch:m}}).then(O=>O.data).catch(O=>{throw n.update(y,{type:"error",message:`${b} - failed: ${O.statusText} -> ${O.data.message}`}),O});f.push(...v.contents),m=((S=v.metadata)==null?void 0:S.next_batch)||!1,n.update(y,{type:"info",message:`${b} - done`})}while(m!==!1)}catch(y){throw n.add({message:"Canceling cache build...",type:"info"}),y}return l.push(...f),Kn(`windpress.cache.provider.${u.id}`,qt.compressToUTF16(JSON.stringify({contents:f,timestamp:Date.now()}))),Promise.resolve()}let a=r.filter(u=>u.enabled).map(u=>c(u));await Promise.all(a);let p=l.map(u=>{let m=atob(u.content);return u.type==="json"&&(m=Pn(JSON.parse(m))),nn(m)}),d=null,g=null;if(i.tailwindcss_version===4){let{compile:u,find_tw_candidates:m,optimize:f,loadSource:h}=await Ut(async()=>{let{compile:O,find_tw_candidates:A,optimize:M,loadSource:ce}=await import("./tailwindcss-Dp1eGGVp.min.js").then(async ue=>(await ue.__tla,ue));return{compile:O,find_tw_candidates:A,optimize:M,loadSource:ce}},[],import.meta.url),S=[];p.forEach(O=>{let A=m(O);S.push(...A)});let y=await u({entrypoint:"/main.css",volume:s}),b=[...new Set([...S,...await h(y.sources)])];n.add({message:"Scanning complete",type:"success"}),n.add({message:`Found ${b.length} candidates`,type:"info",options:{raw:!0,candidates:b.sort()}}),n.add({message:"Building cache...",type:"info"});let v=y.build(b);d=(await f({css:v})).css,g=(await f({css:v,minify:!0})).css}else if(i.tailwindcss_version===3){let{build:u,optimize:m}=await Ut(async()=>{let{build:h,optimize:S}=await import("./tailwindcss-v3-rhwg7QMl.js").then(async y=>(await y.__tla,y));return{build:h,optimize:S}},[],import.meta.url);n.add({message:"Scanning complete",type:"success"}),n.add({message:"Building cache...",type:"info"});let f=await u({entrypoint:{css:"/main.css",config:"/tailwind.config.js"},contents:p,volume:s});d=(await m(f)).css,g=(await m(f,!0)).css}return n.add({message:"Cache built",type:"success"}),o.last_generated=Date.now(),o.last_full_build=i.kind==="full"?Date.now():o.last_full_build,i.store===!0&&await t.post("admin/settings/cache/store",{content:zn(g||""),full_build:i.kind==="full"?o.last_full_build:null}).then(u=>{o=u.data.cache,n.add({message:"Cache stored",type:"success"})}),{normal:d,minified:g,css_cache:o}}function Jt(){let e=new BroadcastChannel("windpress"),t=Promise.resolve();e.addEventListener("message",async n=>{let i=n.data;["windpress/dashboard","windpress/integration"].includes(i.source)&&i.target==="windpress/compiler"&&i.task==="generate-cache"&&(t=t.then(async()=>{await Un(i.data).then(()=>{e.postMessage({source:"windpress/compiler",target:"windpress/dashboard",task:"generate-cache.response",data:{status:"success"}})}).catch(r=>{e.postMessage({source:"windpress/compiler",target:"windpress/dashboard",task:"generate-cache.response",data:{status:"error"}}),console.error(r)})}).catch(r=>{console.error(r)}))})}Rt=async function(){"locks"in navigator?navigator.locks.request("task_lock",{mode:"exclusive"},e=>(console.log("Lock acquired. Starting worker."),Jt(),new Promise(()=>{}))).catch(()=>{console.log("Failed to acquire lock. Worker already running in another tab.")}):(console.log("Locks API not supported in this browser. Starting worker without lock."),Jt())}})();export{Yn as __tla,Rt as t};
