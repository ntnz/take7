import{Gt as b,H as w,j as U,mt as W,rt as F,ut as C,v as R,wn as P,xn as G}from"./runtime-core.esm-bundler-DRZAYnQ2.min.js";function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t];t%2?H(Object(n),!0).forEach(function(r){pe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ve(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function me(e,t){if(e==null)return{};var n=ve(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ye(e,t){return he(e)||be(e,t)||Oe(e,t)||je()}function he(e){if(Array.isArray(e))return e}function be(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,a=!1,i=void 0;try{for(var l=e[Symbol.iterator](),o;!(r=(o=l.next()).done)&&(n.push(o.value),!(t&&n.length===t));r=!0);}catch(d){a=!0,i=d}finally{try{!r&&l.return!=null&&l.return()}finally{if(a)throw i}}return n}}function Oe(e,t){if(e){if(typeof e=="string")return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(e,t)}}function J(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function je(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t];t%2?K(Object(n),!0).forEach(function(r){we(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Se(){var e=[...arguments];return function(t){return e.reduceRight(function(n,r){return r(n)},t)}}function M(e){return function t(){var n=this,r=[...arguments];return r.length>=e.length?e.apply(this,r):function(){var a=[...arguments];return t.apply(n,[].concat(r,a))}}}function k(e){return{}.toString.call(e).includes("Object")}function Pe(e){return!Object.keys(e).length}function E(e){return typeof e=="function"}function Me(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ee(e,t){return k(t)||j("changeType"),Object.keys(t).some(function(n){return!Me(e,n)})&&j("changeField"),t}function Le(e){E(e)||j("selectorType")}function Ie(e){E(e)||k(e)||j("handlerType"),k(e)&&Object.values(e).some(function(t){return!E(t)})&&j("handlersType")}function Re(e){e||j("initialIsRequired"),k(e)||j("initialType"),Pe(e)&&j("initialContent")}function ke(e,t){throw Error(e[t]||e.default)}var j=M(ke)({initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"}),V={changes:Ee,selector:Le,handler:Ie,initial:Re};function Ve(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};V.initial(e),V.handler(t);var n={current:e},r=M(De)(n,t),a=M(Te)(n),i=M(V.changes)(e),l=M(xe)(n);function o(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(u){return u};return V.selector(p),p(n.current)}function d(p){Se(r,a,i,l)(p)}return[o,d]}function xe(e,t){return E(t)?t(e.current):t}function Te(e,t){return e.current=Q(Q({},e.current),t),t}function De(e,t,n){return E(t)?t(e.current):Object.keys(n).forEach(function(r){var a;return(a=t[r])==null?void 0:a.call(t,e.current[r])}),n}var Fe={create:Ve},Ce={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}};function Ne(e){return function t(){var n=this,r=[...arguments];return r.length>=e.length?e.apply(this,r):function(){var a=[...arguments];return t.apply(n,[].concat(r,a))}}}var _e=Ne;function qe(e){return{}.toString.call(e).includes("Object")}var Ae=qe;function ze(e){return e||Z("configIsRequired"),Ae(e)||Z("configType"),e.urls?($e(),{paths:{vs:e.urls.monacoBase}}):e}function $e(){console.warn(X.deprecation)}function Be(e,t){throw Error(e[t]||e.default)}var X={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Z=_e(Be)(X),Ue={config:ze},We=function(){var e=[...arguments];return function(t){return e.reduceRight(function(n,r){return r(n)},t)}};function ee(e,t){return Object.keys(t).forEach(function(n){t[n]instanceof Object&&e[n]&&Object.assign(t[n],ee(e[n],t[n]))}),Y(Y({},e),t)}var Ge=ee,He={type:"cancelation",msg:"operation is manually canceled"};function Ye(e){var t=!1,n=new Promise(function(r,a){e.then(function(i){return t?a(He):r(i)}),e.catch(a)});return n.cancel=function(){return t=!0},n}var N=Ye,Je=Fe.create({config:Ce,isInitialized:!1,resolve:null,reject:null,monaco:null}),te=ye(Je,2),L=te[0],x=te[1];function Ke(e){var t=Ue.config(e),n=t.monaco,r=me(t,["monaco"]);x(function(a){return{config:Ge(a.config,r),monaco:n}})}function Qe(){var e=L(function(t){var n=t.monaco,r=t.isInitialized,a=t.resolve;return{monaco:n,isInitialized:r,resolve:a}});if(!e.isInitialized){if(x({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),N(_);if(window.monaco&&window.monaco.editor)return ne(window.monaco),e.resolve(window.monaco),N(_);We(Xe,et)(tt)}return N(_)}function Xe(e){return document.body.appendChild(e)}function Ze(e){var t=document.createElement("script");return e&&(t.src=e),t}function et(e){var t=L(function(r){var a=r.config,i=r.reject;return{config:a,reject:i}}),n=Ze(`${t.config.paths.vs}/loader.js`);return n.onload=function(){return e()},n.onerror=t.reject,n}function tt(){var e=L(function(n){var r=n.config,a=n.resolve,i=n.reject;return{config:r,resolve:a,reject:i}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(n){ne(n),e.resolve(n)},function(n){e.reject(n)})}function ne(e){L().monaco||x({monaco:e})}function nt(){return L(function(e){return e.monaco})}var _=new Promise(function(e,t){return x({resolve:e,reject:t})}),T={config:Ke,init:Qe,__getMonacoInstance:nt},rt=Object.defineProperty,at=Object.defineProperties,it=Object.getOwnPropertyDescriptors,re=Object.getOwnPropertySymbols,ot=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable,ae=(e,t,n)=>t in e?rt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,q=(e,t)=>{for(var n in t||(t={}))ot.call(t,n)&&ae(e,n,t[n]);if(re)for(var n of re(t))lt.call(t,n)&&ae(e,n,t[n]);return e},ut=(e,t)=>at(e,it(t)),A={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}};function ie(e,t){let n=R(()=>{let{width:a,height:i}=e;return ut(q({},A.wrapper),{width:a,height:i})}),r=R(()=>q(q({},A.fullWidth),!t.value&&A.hide));return{wrapperStyle:n,containerStyle:r}}function oe(){let e=P(T.__getMonacoInstance()),t=G(!1),n;return C(()=>{e.value||(n=T.init(),n.then(r=>e.value=r).catch(r=>{(r==null?void 0:r.type)!=="cancelation"&&(t.value=!0,console.error("Monaco initialization error:",r))}))}),{monacoRef:e,unload:()=>n==null?void 0:n.cancel(),isLoadFailed:t}}function D(e){return typeof e=="function"?e():e}function z(e){return e===void 0}function S(e,t,n,r){return ct(e,r)||ft(e,t,n,r)}function ct(e,t){return e.editor.getModel(le(e,t))}function ft(e,t,n,r){return e.editor.createModel(t,n,r?le(e,r):void 0)}function le(e,t){return e.Uri.parse(t)}var st=Object.defineProperty,ue=Object.getOwnPropertySymbols,dt=Object.prototype.hasOwnProperty,gt=Object.prototype.propertyIsEnumerable,ce=(e,t,n)=>t in e?st(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pt=(e,t)=>{for(var n in t||(t={}))dt.call(t,n)&&ce(e,n,t[n]);if(ue)for(var n of ue(t))gt.call(t,n)&&ce(e,n,t[n]);return e},vt={display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"},fe=U({name:"VueMonacoEditor",model:{prop:"value",event:"update:value"},props:{defaultValue:String,defaultPath:String,defaultLanguage:String,value:String,language:String,path:String,theme:{type:String,default:"vs"},line:Number,options:{type:Object,default:()=>({})},overrideServices:{type:Object,default:()=>({})},saveViewState:{type:Boolean,default:!0},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"},className:String},emits:["update:value","beforeMount","mount","change","validate"],setup(e,t){let n=new Map,r=P(null),{monacoRef:a,unload:i,isLoadFailed:l}=oe(),{editorRef:o}=mt(t,e,a,r),{disposeValidator:d}=yt(t,e,a,o),p=R(()=>!!a.value&&!!o.value),{wrapperStyle:u,containerStyle:f}=ie(e,p);return W(()=>{var c,s;(c=d.value)==null||c.call(d),o.value?((s=o.value.getModel())==null||s.dispose(),o.value.dispose()):i()}),b([()=>e.path,()=>e.value,()=>e.language,()=>e.line],([c,s,m,y],[O,v,g,h])=>{if(p.value){if(c!==O){let I=S(a.value,s||e.defaultValue||"",m||e.defaultLanguage||"",c||e.defaultPath||"");e.saveViewState&&n.set(O,o.value.saveViewState()),o.value.setModel(I),e.saveViewState&&o.value.restoreViewState(n.get(c)),z(y)||o.value.revealLine(y);return}o.value.getValue()!==s&&o.value.setValue(s),m!==g&&a.value.editor.setModelLanguage(o.value.getModel(),m),!z(y)&&y!==h&&o.value.revealLine(y)}}),b(()=>e.options,c=>o.value&&o.value.updateOptions(c),{deep:!0}),b(()=>e.theme,c=>a.value&&a.value.editor.setTheme(c)),{containerRef:r,isEditorReady:p,isLoadFailed:l,wrapperStyle:u,containerStyle:f}},render(){let{$slots:e,isEditorReady:t,isLoadFailed:n,wrapperStyle:r,containerStyle:a,className:i}=this;return w("div",{style:r},[!t&&w("div",{style:vt},n?e.failure?D(e.failure):"load failed":e.default?D(e.default):"loading..."),w("div",{ref:"containerRef",key:"monaco_editor_container",style:a,class:i})])}});function mt({emit:e},t,n,r){let a=P(null);C(()=>{let l=b(n,()=>{r.value&&n.value&&(F(()=>l()),i())},{immediate:!0})});function i(){var l;if(!r.value||!n.value||a.value)return;e("beforeMount",n.value);let o=t.path||t.defaultPath,d=S(n.value,t.value||t.defaultValue||"",t.language||t.defaultLanguage||"",o||"");a.value=n.value.editor.create(r.value,pt({model:d,theme:t.theme,automaticLayout:!0,autoIndent:"brackets",formatOnPaste:!0,formatOnType:!0},t.options),t.overrideServices),(l=a.value)==null||l.onDidChangeModelContent(p=>{let u=a.value.getValue();u!==t.value&&(e("update:value",u),e("change",u,p))}),a.value&&!z(t.line)&&a.value.revealLine(t.line),e("mount",a.value,n.value)}return{editorRef:a}}function yt({emit:e},t,n,r){let a=G(null),i=b([n,r],()=>{if(n.value&&r.value){F(()=>i());let l=n.value.editor.onDidChangeMarkers(o=>{var p,u;let d=(u=(p=r.value)==null?void 0:p.getModel())==null?void 0:u.uri;if(d&&o.find(f=>f.path===d.path)){let f=n.value.editor.getModelMarkers({resource:d});e("validate",f)}});a.value=()=>l==null?void 0:l.dispose()}});return{disposeValidator:a}}var ht=Object.defineProperty,se=Object.getOwnPropertySymbols,bt=Object.prototype.hasOwnProperty,Ot=Object.prototype.propertyIsEnumerable,de=(e,t,n)=>t in e?ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jt=(e,t)=>{for(var n in t||(t={}))bt.call(t,n)&&de(e,n,t[n]);if(se)for(var n of se(t))Ot.call(t,n)&&de(e,n,t[n]);return e},wt={display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"},ge=U({name:"VueMonacoDiffEditor",props:{original:String,modified:String,language:String,originalLanguage:String,modifiedLanguage:String,originalModelPath:String,modifiedModelPath:String,theme:{type:String,default:"vs"},options:{type:Object,default:()=>({})},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"},className:String},setup(e,t){let n=P(null),{monacoRef:r,unload:a,isLoadFailed:i}=oe(),{diffEditorRef:l}=St(t,e,r,n),o=R(()=>!!r.value&&!!l.value),{wrapperStyle:d,containerStyle:p}=ie(e,o);return W(()=>{var g,h,I,$,B;var u,f,c,s,m,y,O;!r.value&&a();let v=(h=(g=u=l.value)==null?void 0:g.getModel)==null?void 0:h.call(u);(c=(I=f=v==null?void 0:v.original)==null?void 0:I.dispose)==null||c.call(f),(m=($=s=v==null?void 0:v.modified)==null?void 0:$.dispose)==null||m.call(s),(O=(B=y=l.value)==null?void 0:B.dispose)==null||O.call(y)}),b([()=>e.originalModelPath,()=>e.original,()=>e.originalLanguage,()=>e.language],([u,f,c,s],[m,y,O,v])=>{if(!o.value)return;let g=l.value.getOriginalEditor();if(u!==m){let h=S(r.value,f||"",c||s||"text",u||"");g.setModel(h);return}f!==g.getValue()&&g.setValue(f||""),(c!==O||s!==v)&&r.value.editor.setModelLanguage(l.value.getModel().original,c||s||"text")}),b([()=>e.modifiedModelPath,()=>e.modified,()=>e.modifiedLanguage,()=>e.language],([u,f,c,s],[m,y,O,v])=>{if(!o.value)return;let g=l.value.getModifiedEditor();if(m!==u){let h=S(r.value,f||"",c||s||"text",u||"");g.setModel(h);return}if(f!==g.getValue()){let h=r.value.editor.EditorOption.readOnly;g.getOption(h)?g.setValue(f||""):(g.executeEdits("",[{range:g.getModel().getFullModelRange(),text:f||"",forceMoveMarkers:!0}]),g.pushUndoStop())}(c!==O||s!==v)&&r.value.editor.setModelLanguage(l.value.getModel().modified,c||s||"text")}),b(()=>e.theme,()=>{var u;return(u=r.value)==null?void 0:u.editor.setTheme(e.theme)}),b(()=>e.options,()=>{var u;return(u=l.value)==null?void 0:u.updateOptions(e.options)},{deep:!0}),{containerRef:n,isDiffEditorReady:o,isLoadFailed:i,wrapperStyle:d,containerStyle:p}},render(){let{$slots:e,isDiffEditorReady:t,isLoadFailed:n,wrapperStyle:r,containerStyle:a,className:i}=this;return w("div",{style:r},[!t&&w("div",{style:wt},n?e.failure?D(e.failure):"load failed":e.default?D(e.default):"loading..."),w("div",{ref:"containerRef",key:"monaco_diff_editor_container",style:a,class:i})])}});function St({emit:e},t,n,r){let a=P(null);C(()=>{let l=b(n,()=>{r.value&&n.value&&(F(()=>l()),i())},{immediate:!0})});function i(){var l;if(!r.value||!n.value||a.value)return;e("beforeMount",n.value),a.value=n.value.editor.createDiffEditor(r.value,jt({automaticLayout:!0,autoIndent:"brackets",theme:t.theme,formatOnPaste:!0,formatOnType:!0},t.options));let o=S(n.value,t.original||"",t.originalLanguage||t.language||"text",t.originalModelPath||""),d=S(n.value,t.modified||"",t.modifiedLanguage||t.language||"text",t.modifiedModelPath||"");(l=a.value)==null||l.setModel({original:o,modified:d}),e("mount",a.value,n.value)}return{diffEditorRef:a}}function Pt(e,t){t&&T.config(t),e.component(fe.name,fe),e.component(ge.name,ge)}export{T as n,Pt as t};
