import{s as B}from"../../chunk-BP1tGd43.min.js";import"../../dist-gE_XXzPp.min.js";import{Gt as L,rt as b,xn as d}from"../../runtime-core.esm-bundler-DRZAYnQ2.min.js";import"../../vue.runtime.esm-bundler-BlWQ9Hv9.min.js";import"../../dist-CyCkKGye.min.js";import"../../isObject-DkMBgCmn.min.js";import{t as X}from"../../debounce-DmqvMdin.min.js";import{t as v}from"../../preload-helper-hRiy8xQv.min.js";import"../../dist-7RENR6RM.min.js";import{n as D,t as $}from"../../tippy.esm-CtRNZGHn.min.js";import{n as J,t as O}from"../../dist-DNqxA4Wq.min.js";import{n as I,t as q}from"../../highlight-in-textarea-By4lYHKb.js";import{t as z}from"../../tribute.min-CuxQbPzU.min.js";(async()=>{var M=e=>ReactJSXRuntime.jsxs("svg",{id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",...e,children:[ReactJSXRuntime.jsx("g",{children:ReactJSXRuntime.jsx("path",{fill:"currentColor",d:"M176,384H16c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h160c8.832,0,16,7.2,16,16s-7.168,16-16,16 c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16c26.464,0,48-21.536,48-48S202.464,384,176,384z"})}),ReactJSXRuntime.jsx("g",{children:ReactJSXRuntime.jsx("path",{d:"M240,256c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16c8.832,0,16,7.2,16,16s-7.168,16-16,16H16 c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h224c26.464,0,48-21.536,48-48S266.464,256,240,256z"})}),ReactJSXRuntime.jsx("g",{children:ReactJSXRuntime.jsx("path",{d:"M288,32C164.288,32,64,132.288,64,256c0,10.88,1.056,21.536,2.56,32h128.192c-1.792-4.992-2.752-10.4-2.752-16 c0-26.464,21.536-48,48-48c44.096,0,80,35.904,80,80c0,44.128-35.904,80-80,80h-0.416C249.76,397.408,256,413.92,256,432 c0,16.032-4.864,30.944-13.024,43.456c14.56,2.976,29.6,4.544,45.024,4.544c123.712,0,224-100.288,224-224S411.712,32,288,32z"})})]}),A=B(z()),E=null,N=e=>React.createElement(M,{...e,width:20,height:20,"aria-hidden":"true",focusable:"false"});(async()=>E=await J({themes:[v(()=>import("../../dark-plus-DUxK4Phe.min.js").then(async e=>(await e.__tla,e)),[],import.meta.url),v(()=>import("../../light-plus-D1Qkc2mD.min.js").then(async e=>(await e.__tla,e)),[],import.meta.url)],langs:[v(()=>import("../../css-CZ_P402v.min.js").then(async e=>(await e.__tla,e)),[],import.meta.url)],engine:O(v(()=>import("../../wasm-AKcBxSw7.min.js").then(async e=>(await e.__tla,e)),[],import.meta.url))}))();var l=d(null),R=null,_=[];wp.hooks.addAction("windpressgutenberg-autocomplete-items-refresh","windpressgutenberg",()=>{_=wp.hooks.applyFilters("windpressgutenberg-autocomplete-items",[],"")}),wp.hooks.doAction("windpressgutenberg-autocomplete-items-refresh");var c=new A.default({containerClass:"windpressgutenberg-tribute-container",autocompleteMode:!0,menuItemLimit:50,noMatchTemplate:"",values:async function(e,t){let n=await wp.hooks.applyFilters("windpressgutenberg-autocomplete-items-query",_,e);t(n)},lookup:"value",itemClass:"class-item",menuItemTemplate:function(e){let t="";return e.original.color!==void 0&&(t+=`background-color: ${e.original.color};`),e.original.fontWeight!==void 0&&(t+=`font-weight: ${e.original.fontWeight};`),`
            <span class="class-name" data-tribute-class-name="${e.original.value}">${e.string}</span>
            <span class="class-hint" style="${t}"></span>
        `}});c.setMenuContainer=function(e){this.menuContainer=e};var T=c.events.callbacks;c.events.callbacks=function(){return{...T.call(this),up:(e,t)=>{if(this.tribute.isActive&&this.tribute.current.filteredItems){e.preventDefault(),e.stopPropagation();let n=this.tribute.current.filteredItems.length,i=this.tribute.menuSelected;n>i&&i>0?(this.tribute.menuSelected--,this.setActiveLi()):i===0&&(this.tribute.menuSelected=n-1,this.setActiveLi(),this.tribute.menu.scrollTop=this.tribute.menu.scrollHeight),k()}},down:(e,t)=>{if(this.tribute.isActive&&this.tribute.current.filteredItems){e.preventDefault(),e.stopPropagation();let n=this.tribute.current.filteredItems.length-1,i=this.tribute.menuSelected;n>i?(this.tribute.menuSelected++,this.setActiveLi()):n===i&&(this.tribute.menuSelected=0,this.setActiveLi(),this.tribute.menu.scrollTop=0),k()}}}};var h=D(document.createElement("div"),{plugins:[$],allowHTML:!0,arrow:!1,duration:[500,0],followCursor:!0,trigger:"manual"});function y(){let e=document.querySelector(".hit-container");if(e===null)return;h.reference=e;async function t(a){let s=a.textContent,o=await window.windpress.module.classnameToCss.generate(s);if(o===null||o.trim()==="")return null;h.setContent(E.codeToHtml(o,{lang:"css",theme:"dark-plus"})),h.show()}let n=d(null),i=X(function(a){let s=a.clientX,o=a.clientY;n.value=document.elementsFromPoint(s,o).find(f=>f.matches('mark[class="word"]'))||null},10);e.addEventListener("mousemove",i),e.addEventListener("mouseleave",function(a){i.cancel(),n.value=null}),L(n,(a,s)=>{a&&a!==s?t(a):h.hide()})}var g=d(null),u=d(null),m=d(null);function k(){let e=c.menu.querySelector("li.highlight>span.class-name");m.value&&w(m.value),m.value=e.dataset.tributeClassName,x(e.dataset.tributeClassName)}var p=null,P=new MutationObserver(function(e){e.forEach(function(t){t.type==="childList"&&t.addedNodes.length>0&&t.addedNodes.forEach(n=>{let i=n.querySelector(".class-name").dataset.tributeClassName;n.addEventListener("mouseenter",a=>{x(i)}),n.addEventListener("mouseleave",a=>{w(i)}),n.addEventListener("click",a=>{},{capture:!0})})})});function S(){let e=document.querySelector('iframe[name="editor-canvas"]'),t=(e==null?void 0:e.contentWindow)||e;return(e==null?void 0:e.contentDocument)||(t==null?void 0:t.document)}function x(e){let t=S();if(!t)return;let n=t.getElementById(`block-${g.value}`);n&&n.classList.add(e)}function w(e){let t=S();if(!t)return;let n=t.getElementById(`block-${g.value}`);n&&u.value&&!u.value.includes(e)&&n.classList.remove(e)}L(l,(e,t)=>{e&&(I(l.value),c.attach(l.value),setTimeout(()=>{R=new q(l.value,{highlight:[{highlight:new RegExp("(?<=\\s|^)(?:(?!\\s).)+(?=\\s|$)","g"),className:"word"},{highlight:new RegExp("(?<=\\s)\\s","g"),className:"multispace",blank:!0}]}),y(),l.value.addEventListener("highlights-updated",function(n){y()}),l.value.addEventListener("tribute-active-true",function(n){p===null&&(p=document.querySelector(".windpressgutenberg-tribute-container>ul")),b(()=>{p&&P.observe(p,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"]})})}),l.value.addEventListener("tribute-active-false",function(n){m.value&&w(m.value)}),b(()=>{C()})},10))});function C(){b(()=>{try{R.handleInput()}catch{}I.update(l.value),c.hideMenu()})}function j(e){return t=>{let{name:n,clientId:i,attributes:a,setAttributes:s}=t;React.useEffect(()=>{g.value=i,u.value=a.className});function o(r){s({className:r}),u.value=r}async function f(){let r=await windpress.module.classSorter.sort(a.className);s({className:r}),u.value=r,C()}return React.createElement(React.Fragment,null,React.createElement(e,t),React.createElement(wp.blockEditor.InspectorControls,null,React.createElement(wp.components.PanelBody,{title:wp.i18n.__("WindPress","windpress"),icon:N,initialOpen:!0},React.createElement(wp.components.PanelRow,{className:"windpressgutenberg-actions"},React.createElement("div",null,React.createElement(wp.components.Button,{showTooltip:!0,variant:"secondary",label:wp.i18n.__("Automatic Class Sorting","windpress"),onClick:f},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"tabler-icon tabler-icon-reorder icon icon-tabler icons-tabler-outline icon-tabler-reorder"},React.createElement("path",{d:"M3 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),React.createElement("path",{d:"M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),React.createElement("path",{d:"M17 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),React.createElement("path",{d:"M5 11v-3a3 3 0 0 1 3 -3h8a3 3 0 0 1 3 3v3"}),React.createElement("path",{d:"M16.5 8.5l2.5 2.5l2.5 -2.5"}))))),React.createElement(wp.components.TextareaControl,{__nextHasNoMarginBottom:!0,value:a.className,onChange:r=>o(r),onInput:r=>o(r.target.value),ref:r=>l.value=r}))))}}wp.hooks.addFilter("editor.BlockEdit","windpress/add-class-inspector-controls",j)})();
